var Re=Object.defineProperty,Le=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var de=(o,e,t)=>e in o?Re(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,A=(o,e)=>{for(var t in e||(e={}))ze.call(e,t)&&de(o,t,e[t]);if(Ce)for(var t of Ce(e))Ve.call(e,t)&&de(o,t,e[t]);return o},M=(o,e)=>Le(o,Ke(e));var B=(o,e,t)=>(de(o,typeof e!="symbol"?e+"":e,t),t);import{r as d,o as C,c as D,a as u,F as R,b as v,d as se,e as pe,m as K,f as $,g as T,h as Y,i as We,n as q,u as E,B as be,M as qe,j as ue,k as Ae,l as w,w as U,p as S,q as i,L as Ge,U as Fe,s as Ee,t as Ye,v as ee,x as te,y as k,z as we,A as He,C as Je,D as xe,E as Qe,G as Xe,H as Ze,I as et,J as tt,K as at,N as z,O as H,P as ot,Q as nt,T as st,R as _e,S as he,V as ut,W as ke,X as lt,Y as rt,Z as Be,_ as it,$ as ct,a0 as dt,a1 as pt,a2 as _t,a3 as ht,a4 as ft}from"./vendor-ea278687.js";const mt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}};mt();var N=(o,e)=>{const t=o.__vccOpts||o;for(const[n,a]of e)t[n]=a;return t};const vt={},gt=v("div",{id:"modal",style:{display:"none"}},null,-1);function yt(o,e){const t=d("router-view");return C(),D(R,null,[gt,u(t)],64)}var Ct=N(vt,[["render",yt]]);const bt="modulepreload",Se={},At="/",fe=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${At}${n}`,n in Se)return;Se[n]=!0;const a=n.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":bt,a||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),a)return new Promise((r,p)=>{s.addEventListener("load",r),s.addEventListener("error",p)})})).then(()=>e())},ae={getItem(o){return decodeURIComponent(document.cookie.replace(new RegExp(`(?:(?:^|.*;)\\s*${encodeURIComponent(o).replace(/[-.+*]/g,"\\$&")}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1"))||null},setItem(o,e,t=null,n="",a="",l=""){if(!o||/^(?:expires|max\-age|path|domain|secure)$/i.test(o))return!1;let s="";if(t)switch(t.constructor){case Number:s=t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":`; max-age=${t}`;break;case String:s=`; expires=${t}`;break;case Date:s=`; expires=${t.toUTCString()}`;break}return document.cookie=`${encodeURIComponent(o)}=${encodeURIComponent(e)}${s}${a?`; domain=${a}`:""}${n?`; path=${n}`:""}${l?"; secure":""}`,!0},removeItem(o,e,t){return!o||!this.hasItem(o)?!1:(document.cookie=`${encodeURIComponent(o)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${t?`; domain=${t}`:""}${e?`; path=${e}`:""}`,!0)},hasItem(o){return new RegExp(`(?:^|;\\s*)${encodeURIComponent(o).replace(/[-.+*]/g,"\\$&")}\\s*\\=`).test(document.cookie)},keys(){const o=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(let e=0;e<o.length;e++)o[e]=decodeURIComponent(o[e]);return o}},De=se({id:"user",state:()=>({username:ae.getItem("user")}),actions:{updateStatus(){this.username=ae.getItem("user")}}});function Me(o){const{method:e,url:t,params:n,data:a}=o;return[e,t,JSON.stringify(n),JSON.stringify(a)].join("&")}const oe=new Map;function Ft(o){const e=Me(o);o.cancelToken=o.cancelToken||new pe.CancelToken(t=>{oe.has(e)||oe.set(e,t)})}function Et(o){const e=Me(o);oe.has(e)&&(oe.get(e)(e),oe.delete(e))}var le={addPendingRequest:Ft,removePendingRequest:Et};const wt={baseUrl:"https://datavis.all1024.com",proxyUrl:"https://datavis.all1024.com"};let re;const xt=(o,e)=>{const t=pe.create({baseURL:wt.baseUrl,timeout:1e4});t.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";const n=A({repeatRequestCancel:!0,loading:!0,dataFormat:!0,useMsgFromEnd:!0,loadingTitle:"\u52A0\u8F7D\u4E2D",successTitle:"\u8BF7\u6C42\u6210\u529F",errorTitle:"\u8BF7\u6C42\u5931\u8D25"},e);return t.interceptors.request.use(a=>{n.repeatRequestCancel&&le.removePendingRequest(a),n.loading&&(re=K.loading(n.loadingTitle,0)),n.repeatRequestCancel&&le.addPendingRequest(a);const l=window.sessionStorage.getItem("token");return l&&(a.headers.token=l),a},a=>Promise.reject(a)),t.interceptors.response.use(a=>{if(n.repeatRequestCancel&&le.removePendingRequest(a.config),n.loading&&re(),a.data.code===401)sessionStorage.setItem("token","");else if(a.data.code===1)n.loading&&K.error({content:n.useMsgFromEnd&&a.data.message?a.data.message:n.successTitle,duration:2});else{if(typeof a.data=="string")return n.loading&&re(),n.dataFormat?a.data:a;if(a.data.code===0)return n.loading&&K.success({content:n.useMsgFromEnd&&a.data.message?a.data.message:n.successTitle,duration:2}),n.dataFormat?a.data:a}return Promise.reject(a)},a=>(n.repeatRequestCancel&&le.removePendingRequest(a.config||{}),pe.isCancel(a)?console.warn(`\u5DF2\u53D6\u6D88\u7684\u91CD\u590D\u8BF7\u6C42:${a.message}`):(n.loading&&re(),n.loading&&K.error({content:n.useMsgFromEnd&&a.data.msg?a.data.msg:n.errorTitle,duration:2})),Promise.reject(a))),t(o)},V=(o,e)=>new Promise((t,n)=>{xt(o,e||{}).then(a=>{t(a)}).catch(a=>{n(a)})}),kt=o=>V({url:"/cms/getAllChartPic",method:"GET",params:{project_id:o}},{loading:!1}),Bt=o=>V({url:"/cms/updateChartPicConfig",method:"POST",data:o});var me={updateChartPicConfig:Bt,getAllChartPic:kt};const ve={getImg:o=>V({url:"/login/getcaptcha",method:"get",params:o}),login:o=>V({url:"/login/validateUsr",method:"post",data:o}),logout:()=>V({url:"/login/logout",method:"post"})},$e={updateProjectData:o=>V({url:"/cms/updateProjectData",method:"post",data:o}),updateProjectStatus:o=>V({url:"/cms/updateProjectStatus",method:"post",data:A({first_finished:1,second_finished:-1,third_finished:-1},o)})},St=["id"],Dt={name:"Scroller"},Mt=$(M(A({},Dt),{props:{id:{default:Date.now().toString()},height:null,backgroundColor:{default:"inherit"}},setup(o){const e=o,t=T(()=>Number.isNaN(Number(e.height))?e.height:`${e.height}px`),n=()=>{const a=document.getElementById(e.id);be.use(qe),new be(a,{scrollY:!0,disableMouse:!0,disableTouch:!0,preventDefault:!1,mouseWheel:{speed:20,invert:!1,easeTime:300}})};return Y(()=>{n()}),(a,l)=>(C(),D("div",{id:o.id,style:q({height:E(t),overflow:"hidden",backgroundColor:o.backgroundColor})},[We(a.$slots,"default")],12,St))}}));const $t=o=>(ee("data-v-03c6247f"),o=o(),te(),o),Tt=$t(()=>v("div",{class:"logo"},null,-1)),It=k(" \u9879\u76EE "),Ot=k(" \u5F00\u59CB "),Nt=k(" \u9884\u5904\u7406 "),Pt=k(" \u53EF\u89C6\u5316 "),Ut=k(" \u53D1\u5E03 "),jt=k(" \u767B\u51FA "),Rt={key:1},Lt=k(" \u767B\u5F55 "),Kt={style:{padding:"40px 20px"}},zt=k(" Chart \xA92022 Created by BugRight "),Vt=$({setup(o){const e=ue(),t=Ae(),n=De(),a=w([t.path]),l=window.innerHeight-171,s=({key:h})=>{h.includes(a.value[0])||(a.value=[h],e.push(h))},r=()=>{e.push("/login")},p=async()=>{await ve.logout(),ae.setItem("user",""),n.updateStatus(),e.push("/login")};return U(()=>t.path,h=>{s({key:h})}),Y(()=>{}),(h,_)=>{const f=d("a-menu-item"),c=d("a-menu"),g=d("a-avatar"),m=d("a-dropdown"),F=d("a-button"),b=d("a-layout-header"),x=d("router-view"),y=d("a-layout-content"),I=d("a-layout-footer"),W=d("a-layout");return C(),S(W,{class:"layout"},{default:i(()=>[u(b,{class:"header"},{default:i(()=>[Tt,E(t).path!=="/login"?(C(),D(R,{key:0},[u(c,{theme:"dark","selected-keys":a.value,"inline-collapsed":!1,mode:"horizontal",onSelect:s},{default:i(()=>[u(f,{key:"/projects"},{default:i(()=>[It]),_:1}),u(f,{key:"/start"},{default:i(()=>[Ot]),_:1}),u(f,{key:"/preprocess"},{default:i(()=>[Nt]),_:1}),u(f,{key:"/visual"},{default:i(()=>[Pt]),_:1}),u(f,{key:"/publish"},{default:i(()=>[Ut]),_:1})]),_:1},8,["selected-keys"]),E(n).username?(C(),S(m,{key:0,trigger:"click"},{overlay:i(()=>[u(c,null,{default:i(()=>[u(f,{key:"1",onClick:p},{default:i(()=>[u(E(Ge)),jt]),_:1})]),_:1})]),default:i(()=>[u(g,{size:"large",style:{cursor:"pointer"}},{default:i(()=>[u(E(Fe))]),_:1})]),_:1})):(C(),D("div",Rt,[u(F,{type:"link",onClick:r},{default:i(()=>[Lt]),_:1})]))],64)):Ee("",!0)]),_:1}),u(y,{class:"content"},{default:i(()=>[u(Mt,{height:l,"background-color":"#fff"},{default:i(()=>[v("div",Kt,[u(x,null,{default:i(({Component:G})=>[(C(),S(Ye(G)))]),_:1})])]),_:1})]),_:1}),u(I,{class:"footer"},{default:i(()=>[zt]),_:1})]),_:1})}}});var Wt=N(Vt,[["__scopeId","data-v-03c6247f"]]);const qt={components:{UserOutlined:Fe},data(){return{submit:{user_name:"",password:""},code:"",randomNum:0}},mounted(){this.refreshImg()},methods:{refreshNum(){let o=0;for(;o===0||o===this.randomNum;)o=Math.random()*10;this.randomNum=o},codeInput(o){document.cookie=`captcha_client=${o.target.value}`},async refreshImg(){this.refreshNum();const o=document.getElementById("svgWrapper");o.innerHTML="";const e=await ve.getImg({v:this.randomNum});o.innerHTML=e},async handleSubmit(){const o=De(),e={user_name:this.$refs.username.stateValue,password:this.$refs.password.input.stateValue},t={user_name:"alexzhli",password:"123456"},n=await ve.login(e||t);switch(o.updateStatus(),n.code){case 0:K.success("\u767B\u5F55\u6210\u529F,\u5373\u5C06\u8DF3\u8F6C\u5230\u4E3B\u9875"),setTimeout(()=>this.$router.push({path:"/projects"}),3e3);break;case 1:K.error(n.message);break}},handleReset(){this.submit={}}}},Gt={class:"login"},Yt=v("h1",{style:{color:"#333","margin-bottom":"40px"}},"\u767B\u5F55",-1),Ht={class:"flex"},Jt=v("div",{id:"svgWrapper"},null,-1),Qt=k("\u6362\u4E00\u4E2A"),Xt={class:"flex"},Zt=v("span",null,null,-1),ea=k("\u767B\u9646"),ta=k("\u91CD\u7F6E");function aa(o,e,t,n,a,l){const s=d("UserOutlined"),r=d("a-input"),p=d("a-form-item"),h=d("a-input-password"),_=d("a-button"),f=d("a-form");return C(),D("div",Gt,[Yt,u(f,null,{default:i(()=>[u(p,{label:"\u8D26\u53F7\uFF1A","label-col":{span:4},"wrapper-col":{span:20}},{default:i(()=>[u(r,{ref:"username",placeholder:"\u7528\u6237\u540D"},{prefix:i(()=>[u(s)]),_:1},512)]),_:1}),u(p,{label:"\u5BC6\u7801\uFF1A","label-col":{span:4},"wrapper-col":{span:20}},{default:i(()=>[u(h,{ref:"password",placeholder:"\u5BC6\u7801"},null,512)]),_:1}),u(p,{label:"\u9A8C\u8BC1\u7801\uFF1A","label-col":{span:4},"wrapper-col":{span:20}},{default:i(()=>[v("div",Ht,[u(r,{placeholder:"\u9A8C\u8BC1\u7801",style:{width:"40%"},onChange:l.codeInput},null,8,["onChange"]),Jt,u(_,{type:"link",onClick:l.refreshImg},{default:i(()=>[Qt]),_:1},8,["onClick"])])]),_:1}),u(p,{"wrapper-col":{span:14,offset:4}},{default:i(()=>[v("div",Xt,[Zt,u(_,{type:"primary",style:{"margin-left":"8px"},onClick:l.handleSubmit},{default:i(()=>[ea]),_:1},8,["onClick"]),u(_,{onClick:l.handleReset},{default:i(()=>[ta]),_:1},8,["onClick"])])]),_:1})]),_:1})])}var oa=N(qt,[["render",aa]]);const na={data(){return{submit:{username:"",password:"",confirmPassword:""},createC:"",verCode:"",ruleInline:{username:[{required:!0,trigger:"blur",validator:(o,e,t)=>{new RegExp("[\\u4E00-\\u9FFF]+",0).test(e)?t(new Error("\u4E0D\u80FD\u542B\u6709\u4E2D\u6587\u5B57\u7B26")):e.length>16?t(new Error("\u8D26\u53F7\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7\u5341\u516D\u4F4D")):/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/.test(e)?t():e.length<6?t(new Error("\u8D26\u53F7\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E\u516D\u4F4D")):t(new Error("\u8D26\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"))}}],password:[{required:!0,trigger:"blur",validator:(o,e,t)=>{e===""?t(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801")):e.length<6?t(new Error("\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E")):(this.submit.confirmPassword!==""&&this.$refs.submit.validateField("confirmPassword"),t())}}],confirmPassword:[{required:!0,trigger:"blur",validator:(o,e,t)=>{e===""?t(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801")):e.length<6?t(new Error("\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E")):e!==this.submit.password?t(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u5339\u914D")):t()}}]}}},mounted(){},methods:{handleSubmit(){this.$refs.submit.validate(o=>{if(o){if(this.verCode!==this.createC){this.$Message.warning("\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF");return}delete this.submit.confirmPassword}})}}},sa={class:"login"},ua={class:"login-a-form"},la=v("h1",{style:{color:"#333","margin-bottom":"40px"}},"Register",-1),ra={class:"flex"},ia=v("canvas",{id:"myCanvas"},null,-1),ca=k("\u6362\u4E00\u4E2A"),da=k("\u6CE8\u518C"),pa=k("\u8FD4\u56DE\u9996\u9875");function _a(o,e,t,n,a,l){const s=d("Icon"),r=d("a-input"),p=d("a-form-item"),h=d("a-button"),_=d("router-link"),f=d("a-form");return C(),D("div",sa,[v("div",ua,[la,u(f,{ref:"submit","label-width":80,rules:a.ruleInline,model:a.submit},{default:i(()=>[u(p,{label:"\u8D26\u53F7\uFF1A","label-width":100,prop:"username"},{default:i(()=>[u(r,{modelValue:a.submit.username,"onUpdate:modelValue":e[0]||(e[0]=c=>a.submit.username=c),type:"text",placeholder:"\u8BF7\u8F93\u5165 \u4E0D\u80FD\u8D85\u8FC7\u5341\u516D\u4F4D"},{default:i(()=>[u(s,{type:"ios-person-outline"})]),_:1},8,["modelValue"])]),_:1}),u(p,{label:"\u5BC6\u7801\uFF1A","label-width":100,prop:"password"},{default:i(()=>[u(r,{modelValue:a.submit.password,"onUpdate:modelValue":e[1]||(e[1]=c=>a.submit.password=c),type:"password",password:""},{default:i(()=>[u(s,{type:"ios-lock-outline"})]),_:1},8,["modelValue"])]),_:1}),u(p,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A","label-width":100,prop:"confirmPassword"},{default:i(()=>[u(r,{modelValue:a.submit.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=c=>a.submit.confirmPassword=c),type:"password",password:""},{default:i(()=>[u(s,{type:"ios-lock-outline"})]),_:1},8,["modelValue"])]),_:1}),u(p,{label:"\u9A8C\u8BC1\u7801\uFF1A","label-width":100},{default:i(()=>[v("div",ra,[u(r,{modelValue:a.verCode,"onUpdate:modelValue":e[3]||(e[3]=c=>a.verCode=c),type:"text",style:{width:"40%","margin-right":"30px"}},{default:i(()=>[u(s,{type:"ios-megaphone-outline"})]),_:1},8,["modelValue"]),ia,u(h,{type:"text",style:{"margin-left":"10px"},onClick:o.createCode},{default:i(()=>[ca]),_:1},8,["onClick"])])]),_:1}),u(p,null,{default:i(()=>[u(h,{type:"primary",onClick:l.handleSubmit},{default:i(()=>[da]),_:1},8,["onClick"]),u(_,{to:"/",style:{"margin-left":"30px"}},{default:i(()=>[pa]),_:1})]),_:1})]),_:1},8,["rules","model"])])])}var ha=N(na,[["render",_a]]),fa={table:{car:`Model	Base Price (US$ before incentives)	Range in miles
Tesla Model S 100D	94000	335
Tesla Model X 100D	96000	295
Chevrolet Bolt	37495	238
Tesla Model 3	35000	220
Nissan Leaf	30875	150
VW e- Golf	38000	125
BMW i3	44450	114`,museum:`Name	city	Visitors 2018
Mus\xE9e du Louvre	:fr: Paris	10200000
National Museum of China	:cn: Beijing	8610092
Metropolitan Museum of Art	:us: New York City	6953927
Vatican Museums	:it: Vatican City	6756186
Tate Modern	:gb: London	5868562
British Museum	:gb: London	5820000
National Gallery	:gb: London	5735831
National Gallery of Art	:us: Washington D.C.	4404212
State Hermitage Museum	:ru: Saint Petersburg	4220000
Victoria and Albert Museum	:gb: London	3967566
Reina Sof\xEDa	:es: Madrid	3898309
National Palace Museum	:tw: Taipei	3860644
Museo del Prado	:es: Madrid	3672853
Mus\xE9e National d'Art Moderne (Centre Pompidou)	:fr: Paris	3551544
National Museum of Korea	:kr: Seoul	3304453
Mus\xE9e d'Orsay	:fr: Paris	3286224
Somerset House	:gb: London	3143626
Moscow Kremlin Museums	:ru: Moscow	2867295
Tokyo Metropolitan Art Museum	:jp: Tokyo	2787770
Museum of Modern Art	:us: New York City	2774103
The National Art Center Tokyo	:jp: Tokyo	2717565
National Gallery of Victoria	:au: Melbourne	2565474
Tokyo National Museum	:jp: Tokyo	2431073
Smithsonian American Art Museum	:us: Washington D.C.	2304404
National Portrait Gallery	:us: Washington D.C.	2304404
Rijksmuseum	:nl: Amsterdam	2300000
Galleria degli Uffizi	:it: Florence	2230914
National Museum of Scotland	:gb: Edinburgh	2227773
Van Gogh Museum	:nl: Amsterdam	2190000
Tretyakov Gallery	:ru: Moscow	2148538
Shanghai Museum	:cn: Shanghai	2111730
National Folk Museum of Korea	:kr: Seoul	1813626
National Museum of Singapore	:sg: Singapore	1803340
National Gallery Singapore	:sg: Singapore	1803340
Acropolis Museum	:gr: Athens	1774304
Scottish National Gallery	:gb: Edinburgh	1739128
Galleria dell'Accademia	:it: Florence	1719645
Art Institute of Chicago	:us: Chicago	1621861
Royal Academy of Arts	:gb: London	1594140
National Portrait Gallery	:gb: London	1586451
Belvedere	:at: Vienna	1510468
Getty Center [iii]	:us: Los Angeles	1509196
Queensland Gallery of Modern Art	:au: Brisbane	1463448
Australian Centre for the Moving Image	:au: Melbourne	1412630
Centro Cultural Banco do Brasil	:br: Rio de Janeiro	1388664
Royal Ontario Museum	:ca: Toronto	1381712
National Museum of Western Art	:jp: Tokyo	1436941
Museum of European and Mediterranean Civilisations(MUCEM)	:fr: Marseille	1335000
Art Gallery of New South Wales	:au: Sydney	1303789
Pushkin State Museum of Fine Arts	:ru: Moscow	1301832
Tate Britain	:gb: London	1272523
Guggenheim Museum Bilbao	:es: Bilbao	1265756
Mus\xE9e du quai Branly	:fr: Paris	1261817
Museum of Fine Arts	:us: Boston	1249080
Petit Palais	:fr: Paris	1203810
Saatchi Gallery	:gb: London	1200000
National Museum of Modern and Contemporary Art	:kr: Seoul	1185168
National Museum in Krakow	:pl: Krakow	1147140
Centro Cultural Banco do Brasil	:br: Bras\xEDlia	1146995
Louis Vuitton Foundation	:fr: Paris	1142731
Hong Kong Heritage Museum	:hk: Hong Kong	1142235
National Museum of Modern Art	:jp: Tokyo	1129270
Museum of Fine Arts Houston	:us: Houston	1117269
Grand Palais	:fr: Paris	1106868
Dal\xED Theatre and Museum	:es: Figueres	1105169
National Museum of the American Indian	:us: Washington D.C.	1104751
Gyeongju National Museum	:kr: Gyeongju	1102837
Los Angeles County Museum of Art	:us: Los Angeles	1096741
Museum of Contemporary Art Australia	:au: Sydney	1089551
Kelvingrove Art Gallery and Museum	:gb: Glasgow	1054562
Guggenheim Museum	:us: New York City	1031085
Tel Aviv Museum of Art	:il: Tel Aviv	1108323
San Francisco Museum of Modern Art	:us: San Francisco	1014000
Whitney Museum	:us: New York City	1006918
Albertina	:at: Vienna	1004800
Montreal Museum of Fine Arts	:ca: Montreal	1004287
Mus\xE9e de l'Orangerie	:fr: Paris	1004287
Louvre Abu Dhabi	:ae: Abu Dhabi	1000700
National Art Museum of China	:cn: Beijing	1000000`}};const ge=se("project",{state:()=>({title:"",jsonContent:"",strContent:""}),actions:{updateJsonContent(o){this.jsonContent=o},updateStrContent(o){this.strContent=o},updateTitle(o){this.title=o}}});const ma=$({setup(){const o=ge(),e=n=>{o.updateStrContent(n)};return{readExcel:n=>{let a="";const{files:l}=n.target,s=new FileReader,r=new FileReader;s.onload=h=>{const _=h.target.result,f=we.exports.read(_,{type:"array"}),c=f.SheetNames[0],g=we.exports.utils.sheet_to_json(f.Sheets[c]);Object.keys(g[0]).forEach((m,F)=>{F===Object.keys(g[0]).length-1?a+=`${m}
`:a+=`${m}	`}),g.forEach(m=>{Object.values(m).forEach((F,b)=>{b===Object.values(m).length-1?a+=`${F}
`:a+=`${F}	`})}),e(a)},/.xls(|x)/.test(l[0].name)?s.readAsArrayBuffer(l[0]):(r.onload=h=>{const _=new Blob([`\uFEFF${h.target.result}`],{type:"text/csv; charset=utf-8"});s.readAsArrayBuffer(_)},r.readAsText(l[0]))}}}}),va={href:"javascript:;",class:"file"},ga=k("\u9009\u62E9\u6587\u4EF6 ");function ya(o,e,t,n,a,l){return C(),D("div",null,[v("a",va,[ga,v("input",{type:"file",accept:".xls,.xlsx,.csv",onChange:e[0]||(e[0]=(...s)=>o.readExcel&&o.readExcel(...s))},null,32)])])}var Ca=N(ma,[["render",ya]]);const ba=$({emits:["selected"],setup(o,e){const t=a=>{e.emit("selected",a)},n=w([{value:"default",label:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u6837\u672C\u6570\u636E\u96C6"},{label:"\u8868\u683C",options:[{value:"car",label:"Electric cars 2018"},{value:"museum",label:"The most visited art museums 2018"}]}]);return{value:w(["default"]),handleChange:t,options:n}}});function Aa(o,e,t,n,a,l){const s=d("a-select"),r=d("a-space");return C(),S(r,null,{default:i(()=>[u(s,{value:o.value,"onUpdate:value":e[0]||(e[0]=p=>o.value=p),options:o.options,style:{width:"400px"},onChange:o.handleChange},null,8,["value","options","onChange"])]),_:1})}var Fa=N(ba,[["render",Aa]]);const Ea=$({setup(){const o=w(""),e=ge();return U(e,n=>{o.value=n.strContent}),U(o,n=>{e.updateStrContent(n)}),{value:o,handleTab:()=>{const n=document.getElementsByTagName("textarea")[0],a=n.selectionStart,l=n.selectionEnd;n.value=`${n.value.substring(0,a)}	${n.value.substring(l)}`,n.selectionStart=a+1,n.selectionEnd=l+1}}}});function wa(o,e,t,n,a,l){const s=d("a-textarea");return C(),S(s,{value:o.value,"onUpdate:value":e[0]||(e[0]=r=>o.value=r),placeholder:"\u8868\u5355\u5185\u5BB9","auto-size":{minRows:20,maxRows:20},onKeydown:He(Je(o.handleTab,["prevent"]),["tab"])},null,8,["value","onKeydown"])}var xa=N(Ea,[["render",wa],["__scopeId","data-v-1e4dfade"]]);const ka={name:"Start",components:{HandleFile:Ca,SelectSample:Fa,TextArea:xa},setup(){const o=xe({}),e=ue(),t=Ae(),{project_id:n}=t.query;console.log(n);const a=ge(),l=w(""),s=()=>{let _=a.strContent.split(`
`);_[_.length-1]===""&&(_=_.slice(0,_.length-1));const f=[],c=_[0].split("	");_.slice(1).forEach(m=>{const F={};m.split("	").forEach((b,x)=>{x>=c.length||(F[c[x]]=b)}),f.push(F)}),l.value=JSON.stringify(f),a.updateJsonContent(l.value)},r=_=>{a.updateStrContent(fa.table[_])},p=async()=>{const _=await $e.updateProjectData({project_id:n,data_string:l.value});await $e.updateProjectStatus({project_id:n}),console.log(_)},h=async()=>{s(),await p(),e.push({path:"/preprocess/",query:{project_id:n}})};return M(A({},Qe(o)),{handleJump:h,handleSelectedData:r})}},J=o=>(ee("data-v-d5dd41d6"),o=o(),te(),o),Ba={class:"container"},Sa={class:"select-area"},Da=J(()=>v("h2",null,"\u60A8\u60F3\u5982\u4F55\u4E0A\u4F20\u6570\u636E\uFF1F",-1)),Ma={class:"select-area__item select-area__upload"},$a=J(()=>v("h3",null,"\u4E0A\u4F20\u672C\u5730\u6587\u4EF6",-1)),Ta=J(()=>v("p",null,"\u60A8\u53EF\u4EE5\u4ECE\u8BA1\u7B97\u673A\u4E0A\u4F20 CSV \u6216 Excel \u6587\u4EF6\u3002",-1)),Ia=J(()=>v("div",{class:"select-area__item select-area__copy"},[v("h3",null,"\u590D\u5236\u5E76\u7C98\u8D34\u60A8\u7684\u6570\u636E"),v("p",null,"\u5728 Excel \u4E2D\u9009\u62E9\u6570\u636E\uFF08\u5305\u62EC\u6807\u9898\u884C/\u5217\uFF09\uFF0C\u7136\u540E\u5C06\u5176\u7C98\u8D34\u5230\u53F3\u4FA7\u7684\u6587\u672C\u5B57\u6BB5\u4E2D\u3002")],-1)),Oa={class:"select-area__item select-area__sample"},Na=J(()=>v("h3",null,"\u9009\u62E9\u6837\u672C\u96C6",-1)),Pa=J(()=>v("p",null,"\u5982\u679C\u60A8\u53EA\u60F3\u5C1D\u8BD5\u4F7F\u7528\u672C\u4EA7\u54C1\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u793A\u4F8B\u6570\u636E\u96C6\u7684\u5217\u8868\uFF1A",-1)),Ua={class:"data-area"},ja={class:"data-area__textarea"},Ra={class:"data-area__next-step"},La=k("\u4E0B\u4E00\u6B65");function Ka(o,e,t,n,a,l){const s=d("HandleFile"),r=d("SelectSample"),p=d("TextArea"),h=d("a-button");return C(),D("div",Ba,[v("div",Sa,[Da,v("div",Ma,[$a,Ta,u(s)]),Ia,v("div",Oa,[Na,Pa,u(r,{onSelected:n.handleSelectedData},null,8,["onSelected"])])]),v("div",Ua,[v("div",ja,[u(p)]),v("div",Ra,[u(h,{type:"primary",onClick:e[0]||(e[0]=_=>n.handleJump())},{default:i(()=>[La]),_:1})])])])}var za=N(ka,[["render",Ka],["__scopeId","data-v-d5dd41d6"]]);const Va={};function Wa(o,e){const t=d("router-view");return C(),S(t)}var qa=N(Va,[["render",Wa]]);const Ga={Area:Xe,Line:Ze,Column:et,Bar:tt},ie={Area:{name:"Area",text:"\u533A\u57DF\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",smooth:!0,data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}},Line:{name:"Line",text:"\u6298\u7EBF\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",smooth:!0,data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}},Column:{name:"Column",text:"\u67F1\u72B6\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}},Bar:{name:"Bar",text:"\u6761\u5F62\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}}},Ya=(o,e,t)=>new Ga[o](e,t),Te={width:160,height:160,fontSize:40,color:"rgba(0,0,0,0.11)",content:"\u6C34\u5370",rotate:-20},Ha="data:image/png;base64,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";class Ie{constructor({onEdit:e=!1,defed:t=!1,min:n=null,max:a=null,nn:l=!0,top:s=null,last:r=null,topV:p=null,lastV:h=null}){B(this,"onEdit");B(this,"defed");B(this,"min");B(this,"max");B(this,"nn");B(this,"top");B(this,"last");B(this,"topV");B(this,"lastV");this.onEdit=e,this.defed=t,this.min=n,this.max=a,this.nn=l,this.top=s,this.last=r,this.topV=p,this.lastV=h}}const X=class{constructor({cid:e,cname:t,cKey:n,type:a="string",data:l,equation:s=null,computed:r=!1}){B(this,"cid");B(this,"computed");B(this,"cname");B(this,"cKey");B(this,"type");B(this,"equation");B(this,"selected");B(this,"dataDef");B(this,"dataSift");B(this,"compareable");B(this,"data");B(this,"errors");B(this,"editable");this.cid=e,this.computed=r,this.cname=t,this.cKey=n,this.type=a.trim().toLowerCase(),this.equation=s,this.selected=!1,this.dataDef=new Ie({}),this.dataSift=new Ie({}),this.compareable=!1,this.data=l,this.editable=!0,this.computed?this.refreshComputedValue():(this.checkType(),this.initColDefine(),this.initColSift(),this.errors={haveError:null,typeErr:this.checkType()})}tryType(){return X.colType.find(t=>this.data.findIndex(a=>!t.checkType(a[this.cKey]))===-1)}formatType(){const e=X.colType.find(t=>t.typeName===this.type);this.data.forEach(t=>{t[this.cKey]=e.parase(t[this.cKey])})}getColTypeData(){const e=X.colType.find(n=>n.typeName===this.type.toLowerCase())||X.colType.slice(-1)[0],t=this.data.map(n=>({v:n[this.cKey],rowId:n.rowId}));return{typeObj:e,colData:t}}checkType(){const{typeObj:e,colData:t}=this.getColTypeData();return this.compareable=e.compareable,!!(t.findIndex(n=>!e.checkType(n.v))+1)}initColDefine(){const{typeObj:e,colData:t}=this.getColTypeData();this.compareable=e.compareable;const n=[...t];n.sort((a,l)=>.5-e.isLeq(a.v,l.v)),this.dataDef.nn=!(n.findIndex(a=>a.v===null||a.v===void 0||a.v==="")+1),this.dataDef.min=this.compareable?n.slice(0,1).shift().v:null,this.dataDef.max=this.compareable?n.slice(-1).shift().v:null,this.dataDef.defed=!1}checkColDefine(){const e={haveError:!1,maxErr:new Set,minErr:new Set,nnErr:new Set,typeErr:this.checkType()},{typeObj:t,colData:n}=this.getColTypeData();return n.forEach(a=>{if(a.v===void 0||a.v===null||a.v===""){e.nnErr.add(a.rowId);return}t.isLeq(a.v,this.dataDef.max)||e.maxErr.add(a.rowId),t.isLeq(this.dataDef.min,a.v)||e.minErr.add(a.rowId)}),e.haveError=e.maxErr.size||e.minErr.size||e.nnErr.size||e.typeErr,this.errors=e,e.haveError}initColSift(){const{typeObj:e,colData:t}=this.getColTypeData();this.compareable=e.compareable;const n=[...t];n.sort((a,l)=>.5-e.isLeq(a.v,l.v)),this.dataSift.nn=!(n.findIndex(a=>a.v===null||a.v===void 0||a.v==="")+1),this.dataSift.min=this.compareable?n.slice(0,1).shift().v:null,this.dataSift.max=this.compareable?n.slice(-1).shift().v:null,this.dataSift.top=this.compareable?100:null,this.dataSift.last=this.compareable?100:null,this.dataSift.defed=!1}filteColSift(){const{typeObj:e,colData:t}=this.getColTypeData(),n=[];return t.forEach(a=>{var l,s;if(this.dataSift.nn&&(a.v===null||a.v===void 0||a.v===""))n.push(a.rowId);else if(this.compareable){const r=[...t];if(r.sort((_,f)=>.5-e.isLeq(_.v,f.v)),!r.length)return;const p=Math.ceil(r.length*this.dataSift.last/100-1),h=r.length-1-Math.ceil(r.length*this.dataSift.last/100-1);this.dataSift.lastV=r.slice(p).length?(l=r.slice(p))==null?void 0:l.shift().v:r.slice(0).shift().v-1,this.dataSift.topV=r.slice(h).length?(s=r.slice(h))==null?void 0:s.shift().v:r.slice(-1).shift().v+1,e.isLeq(a.v,this.dataSift.max)&&e.isLeq(this.dataSift.min,a.v)&&(e.isLeq(a.v,this.dataSift.lastV)||e.isLeq(this.dataSift.topV,a.v))||n.push(a.rowId)}}),n}refreshComputedValue(){!this.computed||this.data.forEach(e=>{let t=this.equation;const n=t.match(/\$[^ $]+\$/g);n&&n.forEach(a=>{Object.prototype.hasOwnProperty.call(e,a.slice(1,-1))&&(t=t.replaceAll(a,Number.parseFloat(e[a.slice(1,-1).trim()]||0)))}),e[this.cKey]=at(t)})}};let ne=X;B(ne,"colType",[{typeName:"number",checkType:e=>!Number.isNaN(+e),isLeq:(e,t)=>+e<=+t,parase:e=>+e,compareable:!0},{typeName:"boolean",checkType:e=>["boolean","number"].includes(typeof e)?!0:typeof e=="string"?["true","false"].includes(e.trim().toLowerCase()):!1,isLeq:(e,t)=>(e.trim().toLowerCase()!=="false"&&!!e)<=(t.trim().toLowerCase()!=="false"&&!!t),parase:e=>!!e,compareable:!0},{typeName:"string",checkType:()=>!0,isLeq:()=>!0,parase:e=>String(e),compareable:!1},{typeName:"date",checkType:e=>!Number.isNaN(new Date(e).getTime()),isLeq:(e,t)=>e<=t,parase:e=>new Date(e),compareable:!0}]);const L=class{constructor({getted:e=!0,title:t="",data:n=[],cols:a=[]}){B(this,"geted");B(this,"title");B(this,"data");B(this,"cols");this.geted=e,this.title=t,this.data=n,this.data.forEach(l=>l.rowId=L.rowCounter++),this.cols=a.map(l=>(L.colCounter=Math.max(++L.colCounter,l.cid),new ne(Object.assign(l,{data:n}))))}bind({getted:e=!0,title:t="",data:n=[],cols:a=[]}){this.geted=e,this.title=t,this.data=n,this.data.forEach(l=>l.rowId=L.rowCounter++),this.cols=a.map(l=>(L.colCounter=Math.max(++L.colCounter,l.cid),new ne(Object.assign(l,{data:n}))))}mappedTable(){const e=[];this.cols.forEach(a=>{e.push(...a.filteColSift())});const t=new Set(e);return this.data.filter(a=>!t.has(a.rowId))}refreshComputedTable(){this.cols.forEach(e=>{e.computed&&e.refreshComputedValue()})}addComputedValue({cid:e=null,equation:t,cname:n,type:a="number"}){++L.colCounter,e=e||L.colCounter;const l=`comp${e}`;this.data.forEach(r=>{r[l]=null});const s=new ne({cid:e,cname:n,type:a,data:this.data,cKey:l,equation:t,computed:!0});this.cols.push(s)}exportTable(e,t){const n={title:this.title,data:[],cols:[]};return n.cols=this.cols.filter(l=>e?l.selected||l.computed:!0),n.cols=n.cols.map(l=>({cid:l.cid,cKey:l.cKey,cname:l.cname,type:l.type})),(t?this.mappedTable():this.data).forEach(l=>{const s={};let r=0;n.cols.forEach(p=>{Object.prototype.hasOwnProperty.call(l,p.cKey)&&(s[p.cKey]=l[p.cKey],r++)}),delete l._X_ID,delete l.rowId,r&&n.data.push(s)}),n}};let Q=L;B(Q,"colType",["string","number","boolean","date"]),B(Q,"rowCounter",0),B(Q,"colCounter",0);function Ja(o){const e=[];let t=0;o.length>0&&e.push(...Object.keys(o[0]).map(a=>(t+=1,{cid:t,cKey:a,cname:a,type:"string"})));const n=new Q({title:"",data:o,cols:e});return n.cols.forEach(a=>{const{typeName:l}=a.tryType();a.type=l,a.formatType()}),n.exportTable(!1,!1)}const j=se("visual",{state:()=>({projectData:void 0,chartPicId:void 0,chartInstance:void 0,chartType:void 0,chartTitle:"",tableData:void 0,backupChartOptions:void 0,waterMarkUrl:void 0,waterMarkOptions:!1}),getters:{chartOptions:o=>{var e;return(e=o.chartInstance)==null?void 0:e.options}},actions:{initChart({chartpic_id:o,chart_type:e,chart_title:t,vis_config:n,watermark_config:a}){this.chartPicId=o,this.chartType=e,this.chartTitle=t;const l=JSON.parse(n);this.tableData=Ja(l.data),this.backupChartOptions=l,this.waterMarkOptions=JSON.parse(a)},backupProjectData(o){this.projectData=o},render(){var o;(o=this.chartInstance)==null||o.render()},update(o){var e;(e=this.chartInstance)==null||e.update(o)},changeData(o){var e;(e=this.chartInstance)==null||e.changeData(o)},changeSize(o,e){var t;(t=this.chartInstance)==null||t.changeSize(o,e)},destroy(){var o;(o=this.chartInstance)==null||o.destroy(),this.chartInstance=void 0,this.chartType=void 0,this.chartTitle="",this.waterMarkOptions=!1,this.waterMarkUrl=void 0},on(o,e,t){var n;(n=this.chartInstance)==null||n.on(o,e,t)},off(o,e){var t;(t=this.chartInstance)==null||t.off(o,e)},addAnnotations(o){var e;(e=this.chartInstance)==null||e.addAnnotations(o)},removeAnnotations(o){var e;(e=this.chartInstance)==null||e.removeAnnotations(o)},setState(o,e,t){var n;(n=this.chartInstance)==null||n.setState(o,e,t)},getStates(){var o;return(o=this.chartInstance)==null?void 0:o.getStates()},bindChartToStore(o){this.chartInstance=o},changeWaterMark(o,e){this.waterMarkOptions=o,this.waterMarkUrl=e}}}),Qa={title:"demo.csv",data:[{name:"Karry1",age:13,height:1.57},{name:"Karry2",age:14,height:1.76},{name:"Karry3",age:15,height:1.78},{name:"Karry4",age:16,height:1.2}],cols:[{cid:1,cKey:"name",cname:"\u59D3\u540D",type:"string"},{cid:2,cKey:"age",cname:"\u5E74\u9F84",type:"number"},{cid:3,cKey:"height",cname:"\u8EAB\u9AD8",type:"number"}]},Xa=se({id:"process",state:()=>({table:new Q({getted:!1}),tableExport:Qa}),actions:{getTable(o){return V({url:"/getProjectData",method:"get",params:{t:Date.now(),project_id:o}}).then(e=>{if(e.code)return this.table.getted=!1,!1;{const t=JSON.parse(e.result.data);this.table.bind({title:t.title,data:t.data||[],cols:t.cols})}return!0},()=>(this.table.getted=!1,!1))},putTable(o){return V({url:"/updateProjectData",method:"post",data:{project_id:o,data_string:JSON.stringify(this.tableExport)}})}}});const Za={class:"title"},eo=["id"],to={key:1,class:"status__false"},ao={name:"ChartDisplay"},oo=$(M(A({},ao),{props:{id:{default:Date.now().toString()},name:{default:"Area"},title:{default:""},url:{type:[String,Boolean],default:""},options:{default:()=>ie.Area.defaultConfigs},useStore:{type:Boolean,default:!1}},setup(o){const e=o,t=j(),n=w([e.options.width||400,e.options.height||400]);U(()=>{var s,r;return[(s=t.chartOptions)==null?void 0:s.width,(r=t.chartOptions)==null?void 0:r.height]},s=>{n.value=s});const a=w(!0),l=()=>{if(!e.name||!e.id||!e.options){a.value=!1;return}e.useStore&&t.chartInstance&&t.destroy();const s=Ya(e.name,e.id,e.options);e.useStore&&t.bindChartToStore(s),s.render()};return Y(()=>{l()}),(s,r)=>a.value?(C(),D("div",{key:0,class:"root",style:q({backgroundImage:"url("+o.url+")"})},[v("div",Za,z(o.title),1),v("div",{id:o.id,class:"chart"},null,8,eo)],4)):(C(),D("div",to,"\u56FE\u8868\u672A\u5B9A\u4E49"))}}));var Oe=N(oo,[["__scopeId","data-v-2446ef0f"]]);const no={class:"component__grid"},so=["onClick"],uo={class:"component__text"},lo={name:"ChartGrid"},ro=$(M(A({},lo),{props:{name:null},emits:["update:name"],setup(o,{emit:e}){const t=o,n=w(ie),a=w(t.name||"Area"),l=w(a.value),s=r=>{l.value=r,e("update:name",r)};return(r,p)=>(C(),D("div",no,[(C(!0),D(R,null,H(n.value,(h,_)=>(C(),D("div",{key:_,class:ot(l.value===_?"component__item active":"component__item"),onClick:f=>s(_)},[u(Oe,{id:_+new Date().toString(),url:!1,name:_,options:h.defaultConfigs,"water-mark-options":!1,"use-store":!1},null,8,["id","name","options"]),v("p",uo,z(h.text),1)],10,so))),128))]))}}));var io=N(ro,[["__scopeId","data-v-12309911"]]);const co=o=>(ee("data-v-3d374754"),o=o(),te(),o),po={style:{position:"relative","min-height":"660px"}},_o=k("\u8BF7\u9009\u62E9\u60A8\u9700\u8981\u7684\u7C7B\u578B"),ho={class:"btn"},fo=co(()=>v("p",null,"\u60A8\u5728\u4E4B\u524D\u5DF2\u914D\u7F6E\u8FC7\u8BE5\u56FE\u8868\uFF0C\u662F\u5426\u57FA\u4E8E\u4E4B\u524D\u7684\u914D\u7F6E\u4FEE\u6539\uFF1F",-1)),mo=k("> "),vo=$({setup(o){const e=ue(),t=j(),n=Xa(),a=w("Area"),l=T(()=>ie[a.value].text),s=T(()=>t.projectData),r=w(!1),p=()=>{t.initChart(s.value),e.push("/visual/config")},h=async(f,c)=>{const g=Object.assign(ie[a.value].defaultConfigs,{xField:c.x,yField:c.y,data:c.data});console.log(f,c,g);const m=!1;return await me.updateChartPicConfig({chart_title:"",chart_type:a.value,chartpic_id:f,vis_config:JSON.stringify(g),watermark_config:JSON.stringify(m)})},_=async()=>{try{let f;if(e.currentRoute.value.query.status==="back"){const{xField:g,yField:m,data:F}=JSON.parse(t.projectData.vis_config);f={x:g,y:m,data:F}}else{if(!n.tableExport){K.error("\u6570\u636E\u672A\u5B9A\u4E49");return}const{x:g,y:m,data:F}=n.tableExport;f={x:g,y:m,data:F}}const c=await h(s.value.chartpic_id,f);t.initChart(c.result),e.push("/visual/config")}catch{}};return nt(async()=>{if(e.currentRoute.value.query.status!=="back"){const{result:{data:[f]}}=await me.getAllChartPic("32958067-a627-4b64-abaa-43c52734b649");t.backupProjectData(f),f.chart_type!==null&&(r.value=!0)}}),(f,c)=>{const g=d("a-divider"),m=d("a-button"),F=d("a-modal");return C(),D(R,null,[v("div",po,[u(g,{class:"text",orientation:"left"},{default:i(()=>[_o]),_:1}),u(io,{name:a.value,"onUpdate:name":c[0]||(c[0]=b=>a.value=b)},null,8,["name"]),v("div",ho,[u(m,{type:"primary",disabled:!E(l),onClick:_},{default:i(()=>[k("\u5DF2\u9009\u62E9\uFF1A"+z(E(l)||"\u672A\u9009\u62E9"),1)]),_:1},8,["disabled"])])]),(C(),S(st,{to:"#modal"},[u(F,{title:"\u6CE8\u610F",visible:r.value,"ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onOk:p,onCancel:c[1]||(c[1]=b=>r.value=!1)},{default:i(()=>[fo]),_:1},8,["visible"]),mo]))],64)}}});var go=N(vo,[["__scopeId","data-v-3d374754"]]);const yo={name:"KeyConfig"},Co=$(M(A({},yo),{setup(o){const e=j(),t=T(()=>{var s;return(s=e.chartInstance)==null?void 0:s.options}),n=T(()=>t.value&&t.value.data.length>0?Object.keys(t.value.data[0]).length>2:!1),a=w(A({xField:"",yField:"",seriesField:""},t.value));U(()=>a.value,s=>{e.update(A({},s))},{deep:!0});const l=(s,r)=>{var h;if(!((h=t.value)==null?void 0:h.data[0]))return[];let p=Object.keys(t.value.data[0]);return typeof s!="undefined"&&s.forEach(_=>{_&&(p=p.filter(f=>f!==_))}),typeof r!="undefined"&&(p=p.filter(_=>{var f;return typeof((f=t.value)==null?void 0:f.data[0][_])==typeof r})),p.map(_=>({value:_}))};return(s,r)=>{const p=d("a-select"),h=d("a-form-item"),_=d("a-form");return C(),S(_,{model:a.value},{default:i(()=>[u(h,{label:"x\u8F74\u5B57\u6BB5"},{default:i(()=>[u(p,{value:a.value.xField,"onUpdate:value":r[0]||(r[0]=f=>a.value.xField=f),placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5","allow-clear":!0,options:l([a.value.yField,a.value.seriesField])},null,8,["value","options"])]),_:1}),u(h,{label:"y\u8F74\u5B57\u6BB5"},{default:i(()=>[u(p,{value:a.value.yField,"onUpdate:value":r[1]||(r[1]=f=>a.value.yField=f),placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5","allow-clear":!0,options:l([a.value.xField,a.value.seriesField])},null,8,["value","options"])]),_:1}),_e(u(h,{label:"\u5206\u7EC4\u5B57\u6BB5"},{default:i(()=>[u(p,{value:a.value.seriesField,"onUpdate:value":r[2]||(r[2]=f=>a.value.seriesField=f),placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5","allow-clear":!0,options:l([a.value.xField,a.value.yField],"string")},null,8,["value","options"])]),_:1},512),[[he,E(n)]])]),_:1},8,["model"])}}}));const bo=k("x\u5750\u6807\u8F74"),Ao=k("y\u5750\u6807\u8F74"),Fo={name:"AxisConfig"},Eo=$(M(A({},Fo),{setup(o){const e=j(),t=T(()=>{var h;return(h=e.chartInstance)==null?void 0:h.options.xAxis}),n=T(()=>{var h;return(h=e.chartInstance)==null?void 0:h.options.yAxis}),a=w({text:"",position:"start"}),l=w({text:"",position:"start"}),s=w(A({position:"bottom"},t.value)),r=w(A({position:"left"},n.value)),p=w({position:[{value:"top",text:"\u4E0A\u65B9"},{value:"left",text:"\u5DE6\u8FB9"},{value:"right",text:"\u53F3\u8FB9"},{value:"bottom",text:"\u5E95\u90E8"}],titlePosition:[{value:"start",text:"\u9760\u524D"},{value:"center",text:"\u5C45\u4E2D"},{value:"end",text:"\u9760\u540E"}]});return U(()=>[s.value,a.value],h=>{e.update({xAxis:M(A({},h[0]),{title:h[1]})})},{deep:!0}),U(()=>[r.value,l.value],h=>{e.update({yAxis:M(A({},h[0]),{title:h[1]})})},{deep:!0}),(h,_)=>{const f=d("a-divider"),c=d("a-select"),g=d("a-form-item"),m=d("a-input"),F=d("a-radio"),b=d("a-radio-group"),x=d("a-form");return C(),D(R,null,[u(x,{model:s.value},{default:i(()=>[u(f,{orientation:"left"},{default:i(()=>[bo]),_:1}),u(g,{label:"\u4F4D\u7F6E"},{default:i(()=>[u(c,{value:s.value.position,"onUpdate:value":_[0]||(_[0]=y=>s.value.position=y),options:p.value.position.map(y=>({value:y.value,label:y.text}))},null,8,["value","options"])]),_:1}),u(g,{label:"\u6807\u9898"},{default:i(()=>[u(m,{value:a.value.text,"onUpdate:value":_[1]||(_[1]=y=>a.value.text=y),placeholder:"\u8BF7\u8F93\u5165x\u8F74\u6807\u9898"},null,8,["value"])]),_:1}),u(g,{label:"\u6807\u9898\u4F4D\u7F6E"},{default:i(()=>[u(b,{value:a.value.position,"onUpdate:value":_[2]||(_[2]=y=>a.value.position=y)},{default:i(()=>[(C(!0),D(R,null,H(p.value.titlePosition,y=>(C(),S(F,{key:y.value,value:y.value},{default:i(()=>[k(z(y.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),u(f,{orientation:"left"},{default:i(()=>[Ao]),_:1}),u(x,{model:r.value},{default:i(()=>[u(g,{label:"\u4F4D\u7F6E"},{default:i(()=>[u(c,{value:r.value.position,"onUpdate:value":_[3]||(_[3]=y=>r.value.position=y),options:p.value.position.map(y=>({value:y.value,label:y.text}))},null,8,["value","options"])]),_:1}),u(g,{label:"\u6807\u9898"},{default:i(()=>[u(m,{value:l.value.text,"onUpdate:value":_[4]||(_[4]=y=>l.value.text=y),placeholder:"\u8BF7\u8F93\u5165y\u8F74\u6807\u9898"},null,8,["value"])]),_:1}),u(g,{label:"\u6807\u9898\u4F4D\u7F6E"},{default:i(()=>[u(b,{value:l.value.position,"onUpdate:value":_[5]||(_[5]=y=>l.value.position=y)},{default:i(()=>[(C(!0),D(R,null,H(p.value.titlePosition,y=>(C(),S(F,{key:y.value,value:y.value},{default:i(()=>[k(z(y.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}));var wo=N(Eo,[["__scopeId","data-v-28ca533e"]]);const xo=k("\u6BCF\u9875 "),ko=k(" \u884C"),Bo={name:"LegendConfig"},So=$(M(A({},Bo),{setup(o){const e=j(),t=T(()=>{var l;return(l=e.chartInstance)==null?void 0:l.options}),n=w(A({position:"top",offsetX:0,offsetY:0,flipPage:!1,layout:"horizontal",maxRow:"1"},t.value?t.value.legend:{}));U(()=>n.value,l=>{e.update(M(A({},t.value),{legend:A({},l)}))},{deep:!0});const a=w({position:[{value:"top",text:"\u4E0A\u65B9"},{value:"top-left",text:"\u4E0A\u504F\u5DE6"},{value:"top-right",text:"\u4E0A\u504F\u53F3"},{value:"left",text:"\u5DE6\u8FB9"},{value:"left-top",text:"\u5DE6\u504F\u4E0A"},{value:"left-bottom",text:"\u5DE6\u504F\u4E0B"},{value:"right",text:"\u53F3\u8FB9"},{value:"right-top",text:"\u53F3\u504F\u4E0A"},{value:"right-bottom",text:"\u53F3\u504F\u4E0B"},{value:"bottom",text:"\u5E95\u90E8"},{value:"bottom-left",text:"\u5E95\u504F\u5DE6"},{value:"bottom-right",text:"\u5E95\u504F\u53F3"}],layout:[{value:"horizontal",text:"\u6C34\u5E73"},{value:"vertical",text:"\u5782\u76F4"}]});return(l,s)=>{const r=d("a-select"),p=d("a-form-item"),h=d("a-radio"),_=d("a-radio-group"),f=d("a-switch"),c=d("a-input-number"),g=d("a-form");return C(),S(g,{model:n.value},{default:i(()=>[u(p,{label:"\u56FE\u4F8B\u4F4D\u7F6E"},{default:i(()=>[u(r,{value:n.value.position,"onUpdate:value":s[0]||(s[0]=m=>n.value.position=m),options:a.value.position.map(m=>({value:m.value,label:m.text}))},null,8,["value","options"])]),_:1}),u(p,{label:"\u56FE\u4F8B\u65B9\u5411"},{default:i(()=>[u(_,{value:n.value.layout,"onUpdate:value":s[1]||(s[1]=m=>n.value.layout=m)},{default:i(()=>[(C(!0),D(R,null,H(a.value.layout,m=>(C(),S(h,{key:m.value,value:m.value},{default:i(()=>[k(z(m.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),u(p,{label:"\u662F\u5426\u5206\u9875"},{default:i(()=>[u(f,{checked:n.value.flipPage,"onUpdate:checked":s[2]||(s[2]=m=>n.value.flipPage=m),style:{"margin-right":"10px"}},null,8,["checked"]),_e(v("div",null,[xo,u(c,{value:n.value.maxRow,"onUpdate:value":s[3]||(s[3]=m=>n.value.maxRow=m),min:1,max:8},null,8,["value"]),ko],512),[[he,n.value.flipPage&&n.value.layout==="horizontal"]])]),_:1})]),_:1},8,["model"])}}})),Do={name:"BaseConfig"},Mo=$(M(A({},Do),{setup(o){const e=j(),t=T(()=>{var r;return(r=e.chartInstance)==null?void 0:r.options}),n=w(A({width:400,height:300,autoFit:!1},t.value));U(()=>[n.value.width,n.value.height],r=>{e.update({width:r[0],height:r[1]}),e.changeSize(r[0],r[1])});const a=w(),l=T(()=>{var r,p;return((r=e.chartInstance)==null?void 0:r.options.seriesField)!==""&&((p=e.chartInstance)==null?void 0:p.options.seriesField)!==void 0}),s=r=>{r?(e.update({legend:{position:"top",offsetX:0,offsetY:0,flipPage:!1,layout:"horizontal",maxRow:"1"}}),a.value=""):e.update({legend:!1})};return(r,p)=>{const h=d("a-textarea"),_=d("a-form-item"),f=d("a-input-number"),c=d("a-collapse-panel"),g=d("a-switch"),m=d("a-collapse"),F=d("a-form");return C(),S(F,null,{default:i(()=>[u(_,{label:"\u6807\u9898"},{default:i(()=>[u(h,{value:E(e).chartTitle,"onUpdate:value":p[0]||(p[0]=b=>E(e).chartTitle=b),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["value"])]),_:1}),u(_,{label:"\u56FE\u8868\u5BBD\u5EA6"},{default:i(()=>[u(f,{value:n.value.width,"onUpdate:value":p[1]||(p[1]=b=>n.value.width=b),valueModifiers:{lazy:!0}},null,8,["value"])]),_:1}),u(_,{label:"\u56FE\u8868\u9AD8\u5EA6"},{default:i(()=>[u(f,{value:n.value.height,"onUpdate:value":p[2]||(p[2]=b=>n.value.height=b),valueModifiers:{lazy:!0}},null,8,["value"])]),_:1}),u(m,{activeKey:a.value,"onUpdate:activeKey":p[3]||(p[3]=b=>a.value=b),accordion:""},{default:i(()=>[u(c,{key:"key",header:"\u6570\u636E\u5B57\u6BB5"},{default:i(()=>[u(Co)]),_:1}),u(c,{key:"axis",header:"\u5750\u6807\u8F74"},{default:i(()=>[u(wo)]),_:1}),u(c,{key:"legend",header:"\u56FE\u4F8B",disabled:!E(l)},{extra:i(()=>{var b;return[u(g,{checked:!!((b=E(t))==null?void 0:b.legend)&&E(l),disabled:!E(l),onChange:s},null,8,["checked","disabled"])]}),default:i(()=>[u(So)]),_:1},8,["disabled"])]),_:1},8,["activeKey"])]),_:1})}}})),$o={name:"LineConfig"},To=$(M(A({},$o),{setup(o){var a;const e=j(),t=T(()=>{var l;return(l=e.chartInstance)==null?void 0:l.options}),n=w({smooth:(a=t.value)==null?void 0:a.smooth});return U(()=>n.value,l=>{e.update(A(A({},t.value),l))},{deep:!0}),(l,s)=>{const r=d("a-switch"),p=d("a-form-item"),h=d("a-form");return C(),S(h,{model:n.value},{default:i(()=>[u(p,{label:"\u66F2\u7EBF\u5E73\u6ED1"},{default:i(()=>[u(r,{checked:n.value.smooth,"onUpdate:checked":s[0]||(s[0]=_=>n.value.smooth=_)},null,8,["checked"])]),_:1})]),_:1},8,["model"])}}})),Io={name:"OtherConfig"},Oo=$(M(A({},Io),{setup(o){const e=j(),t=T(()=>e.chartType);return(n,a)=>(C(),S(ut,null,[E(t)==="Line"?(C(),S(To,{key:0})):Ee("",!0)],1024))}})),No={name:"TooltipConfig"},Po=$(M(A({},No),{setup(o){var a;const e=j(),t=T(()=>{var l;return Object.keys(((l=e.chartOptions)==null?void 0:l.data[0])||{})}),n=w(A({fields:[],showTitle:!0,shared:!0,showCrosshairs:!0},((a=e.chartOptions)==null?void 0:a.tooltip)?e.chartOptions.tooltip:{}));return U(()=>n.value,l=>{e.update({tooltip:l})},{deep:!0}),(l,s)=>{const r=d("a-checkbox-group"),p=d("a-form-item"),h=d("a-switch"),_=d("a-form");return C(),S(_,{model:n.value},{default:i(()=>[u(p,{label:"\u81EA\u5B9A\u4E49\u5B57\u6BB5"},{default:i(()=>[u(r,{value:n.value.fields,"onUpdate:value":s[0]||(s[0]=f=>n.value.fields=f),name:"group",options:E(t)},null,8,["value","options"])]),_:1}),u(p,{label:"\u663E\u793A\u6807\u9898"},{default:i(()=>[u(h,{checked:n.value.showTitle,"onUpdate:checked":s[1]||(s[1]=f=>n.value.showTitle=f)},null,8,["checked"])]),_:1}),u(p,{label:"\u5C55\u793A\u76F8\u90BB\u6570\u636E"},{default:i(()=>[u(h,{checked:n.value.shared,"onUpdate:checked":s[2]||(s[2]=f=>n.value.shared=f)},null,8,["checked"])]),_:1}),u(p,{label:"\u663E\u793A\u8F85\u52A9\u7EBF"},{default:i(()=>[u(h,{checked:n.value.showCrosshairs,"onUpdate:checked":s[3]||(s[3]=f=>n.value.showCrosshairs=f)},null,8,["checked"])]),_:1})]),_:1},8,["model"])}}}));const Uo=o=>(ee("data-v-d6e89876"),o=o(),te(),o),jo={style:{display:"flex"}},Ro={style:{display:"flex","align-items":"center"}},Lo={class:"btn__list"},Ko=k("\u5220\u9664\u6807\u8BB0"),zo=Uo(()=>v("div",{style:{color:"rgba(0, 0, 0, 0.3)","margin-top":"10px"}},"Tip: \u70B9\u51FB\u56FE\u8868\u4E2D\u6807\u6CE8\u53EF\u4EE5\u8FDB\u884C\u4FEE\u6539\u54E6\uFF01",-1)),Vo={name:"TextAnnotationConfig"},Wo=$(M(A({},Vo),{props:{id:null},setup(o){const e=o,t=j(),n=T(()=>{var b;return(b=t.chartInstance)==null?void 0:b.options.data}),a=T(()=>{var b;return((b=t.chartInstance)==null?void 0:b.options.xField)||""}),l=T(()=>{var b;return((b=t.chartInstance)==null?void 0:b.options.yField)||""}),s=w({type:"text",content:"",offsetX:0,offsetY:0,style:{fill:"#000000",fontSize:14},id:Date.now().toString(),position:["",""]}),r=w(""),p=w(!1),h=w(!1),_=({rgba:{r:b,g:x,b:y,a:I}})=>{s.value.style.fill=`rgba(${b},${x},${y},${I})`},f=b=>{s.value.position=b.split(","),s.value.position.shift()};U(()=>e.id,b=>{var x;if((x=t.chartInstance)==null?void 0:x.chart.annotation){const{option:y}=t.chartInstance.chart.annotation();if(y){const I=y.find(W=>W.id===b);r.value=I.position.join(","),Object.assign(s.value,I),p.value=!0}}});const c=()=>{p.value=!1,r.value="",s.value={type:"text",content:"",offsetX:0,offsetY:0,style:{fill:"#000000",fontSize:14},id:Date.now().toString(),position:["",""]}},g=()=>{var b;if((b=t.chartInstance)==null?void 0:b.chart.annotation){const{option:x}=t.chartInstance.chart.annotation();t.update({annotations:x})}},m=()=>{s.value.position.some(b=>b==="")||s.value.content===""||(p.value&&s.value.id&&(t.removeAnnotations([{id:s.value.id}]),s.value.id=Date.now().toString()),t.addAnnotations([s.value]),g(),c())},F=()=>{p.value&&s.value.id&&(t.removeAnnotations([{id:s.value.id}]),g(),c())};return(b,x)=>{const y=d("a-form-item"),I=d("a-select-option"),W=d("a-select"),G=d("a-input"),O=d("a-input-number"),Z=d("a-col"),Pe=d("a-row"),ye=d("a-button"),Ue=d("a-form");return C(),S(Ue,{model:s.value},{default:i(()=>[u(y,{label:"\u6548\u679C\u5C55\u793A"},{default:i(()=>[v("div",{class:"annotation__display",style:q({height:s.value.style.fontSize+"px",lineHeight:s.value.style.fontSize+"px",fontSize:s.value.style.fontSize+"px",marginRight:"10px",color:s.value.style.fill})},z(s.value.content||"\u5F53\u524D\u65E0\u5185\u5BB9"),5)]),_:1}),u(y,{label:"\u5750\u6807\u4F4D\u7F6E"},{default:i(()=>[u(W,{value:r.value,"onUpdate:value":x[0]||(x[0]=P=>r.value=P),"show-search":"",placeholder:"\u8BF7\u9009\u62E9\u6807\u8BB0\u70B9",onChange:f},{default:i(()=>[(C(!0),D(R,null,H(E(n),(P,je)=>(C(),S(I,{key:je+","+P[E(a)]+","+P[E(l)]},{default:i(()=>[k(z(P[E(a)]+","+P[E(l)]),1)]),_:2},1024))),128))]),_:1},8,["value"])]),_:1}),u(y,{label:"\u6587\u672C\u5185\u5BB9"},{default:i(()=>[u(G,{value:s.value.content,"onUpdate:value":x[1]||(x[1]=P=>s.value.content=P),placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9"},null,8,["value"])]),_:1}),u(Pe,{justify:"space-between"},{default:i(()=>[u(Z,{span:11},{default:i(()=>[u(y,{label:"\u6C34\u5E73\u504F\u79FB"},{default:i(()=>[u(O,{value:s.value.offsetX,"onUpdate:value":x[2]||(x[2]=P=>s.value.offsetX=P)},null,8,["value"])]),_:1})]),_:1}),u(Z,{span:11},{default:i(()=>[u(y,{label:"\u5782\u76F4\u504F\u79FB"},{default:i(()=>[u(O,{value:s.value.offsetY,"onUpdate:value":x[3]||(x[3]=P=>s.value.offsetY=P)},null,8,["value"])]),_:1})]),_:1})]),_:1}),u(y,{label:"\u6587\u672C\u989C\u8272",style:{position:"relative"}},{default:i(()=>[v("div",jo,[v("div",{class:"color__display",style:q({backgroundColor:s.value.style.fill}),onClick:x[4]||(x[4]=P=>h.value=!h.value)},null,4)]),u(E(ke),{class:"color__picker",style:q(h.value?{}:{display:"none"}),theme:"light",color:s.value.style.fill,"sucker-hide":!0,onChangeColor:_},null,8,["style","color"])]),_:1}),u(y,{label:"\u6587\u672C\u5927\u5C0F"},{default:i(()=>[v("div",Ro,[u(O,{value:s.value.style.fontSize,"onUpdate:value":x[5]||(x[5]=P=>s.value.style.fontSize=P)},null,8,["value"])])]),_:1}),v("div",Lo,[v("div",null,[u(ye,{type:"primary",style:{"margin-right":"10px"},onClick:m},{default:i(()=>[k(z(p.value?"\u4FEE\u6539\u6807\u8BB0":"\u65B0\u589E\u6807\u8BB0"),1)]),_:1}),_e(u(ye,{type:"primary",danger:"",onClick:F},{default:i(()=>[Ko]),_:1},512),[[he,p.value]])]),zo])]),_:1},8,["model"])}}}));var qo=N(Wo,[["__scopeId","data-v-d6e89876"]]);const Go={name:"AnnotationConfig"},Yo=$(M(A({},Go),{setup(o){const e=j(),t=w("");return Y(()=>{e.on("annotation:click",n=>{t.value=n.gEvent.delegateObject.annotation.cfg.id})}),lt(()=>{e.off("annotation:click",()=>{})}),(n,a)=>(C(),S(qo,{id:t.value},null,8,["id"]))}}));const Ho=["width","height"],Jo={style:{display:"flex"}},Qo={name:"WaterMarkConfig"},Xo=$(M(A({},Qo),{setup(o){const e=j(),t=w(A(A({},Te),e.waterMarkOptions?e.waterMarkOptions:{}));let n=A({},t.value);const a=w(!1),l=({rgba:{r:c,g,b:m,a:F}})=>{t.value.color=`rgba(${c},${g},${m},${F})`},s=w(null),r=T(()=>{var c;return(c=s.value)==null?void 0:c.getContext("2d")}),p=()=>{if(s.value&&r.value){const c=s.value.toDataURL("image/png");e.changeWaterMark(t.value,c)}},h=c=>{r.value&&r.value.clearRect(0,0,c.width,c.height)},_=c=>{r.value&&(r.value.font=`${c.fontSize}px normal`,r.value.fillStyle=c.color,r.value.translate(c.width/2,c.width/2),r.value.rotate(c.rotate*Math.PI/180),r.value.translate(-c.width/2,-c.width/2),r.value.textAlign="center",r.value.fillText(c.content,c.width/2,(c.height+c.fontSize)/2,c.width),p())},f=(c,g)=>{if(s.value&&r.value){if(c.width!==g.width){s.value.width=c.width,_(c);return}if(c.height!==g.height){s.value.height=c.height,_(c);return}c.color!==g.color?r.value.fillStyle=c.color:c.fontSize!==g.fontSize?r.value.font=`${c.fontSize}px normal`:c.rotate!==g.rotate&&(r.value.translate(c.width/2,c.width/2),r.value.rotate((c.rotate-g.rotate)*Math.PI/180),r.value.translate(-c.width/2,-c.width/2)),r.value.fillText(c.content,c.width/2,(c.height+c.fontSize)/2,c.width)}};return Y(()=>{_(t.value)}),U(()=>t.value,c=>{h(n),f(c,n),p(),n=A({},c)},{deep:!0}),(c,g)=>{const m=d("a-form-item"),F=d("a-input"),b=d("a-input-number"),x=d("a-form");return C(),S(x,{model:t.value},{default:i(()=>[u(m,{label:"\u9884\u89C8"},{default:i(()=>[v("canvas",{ref_key:"canvas",ref:s,class:"water__mark___canvas",width:t.value.width,height:t.value.height},null,8,Ho)]),_:1}),u(m,{label:"\u5B57\u4F53\u5185\u5BB9"},{default:i(()=>[u(F,{value:t.value.content,"onUpdate:value":g[0]||(g[0]=y=>t.value.content=y)},null,8,["value"])]),_:1}),u(m,{label:"\u5B57\u4F53\u5927\u5C0F"},{default:i(()=>[u(b,{value:t.value.fontSize,"onUpdate:value":g[1]||(g[1]=y=>t.value.fontSize=y),min:10,max:60},null,8,["value"])]),_:1}),u(m,{label:"\u6587\u672C\u989C\u8272",style:{position:"relative"}},{default:i(()=>[v("div",Jo,[v("div",{class:"color__display",style:q({backgroundColor:t.value.color}),onClick:g[2]||(g[2]=y=>a.value=!a.value)},null,4)]),u(E(ke),{class:"color__picker",style:q(a.value?{}:{display:"none"}),theme:"light",color:t.value.color,"sucker-hide":!0,onChangeColor:l},null,8,["style","color"])]),_:1}),u(m,{label:"\u65CB\u8F6C\u89D2\u5EA6"},{default:i(()=>[u(b,{value:t.value.rotate,"onUpdate:value":g[3]||(g[3]=y=>t.value.rotate=y),min:-180,max:180},null,8,["value"])]),_:1})]),_:1},8,["model"])}}}));var Zo=N(Xo,[["__scopeId","data-v-77b9a9be"]]);const en={name:"TableEdit"},tn=$(M(A({},en),{props:{table:null},emits:["tableDataChange"],setup(o,{emit:e}){const t=o,n=xe(JSON.parse(JSON.stringify(t.table)));function a(){const l=JSON.parse(JSON.stringify(n));l.data.forEach(s=>{Object.keys(s).forEach(r=>{Object.is(+s[r],NaN)||(s[r]=+s[r])}),delete s._X_ID,delete s.rowId}),e("tableDataChange",l)}return(l,s)=>{const r=d("vxe-input"),p=d("vxe-column"),h=d("vxe-table");return C(),D("div",null,[u(h,{class:"mytable-style","edit-config":{trigger:"click",mode:"cell"},data:E(n).data},{default:i(()=>[(C(!0),D(R,null,H(E(n).cols,_=>(C(),S(p,{key:_.cid,field:_.cKey,title:_.cname,"edit-render":_.editable!==!1?{autofocus:".vxe-input--inner"}:null},rt({_:2},[_.editable!==!1?{name:"edit",fn:i(({row:f})=>[u(r,{modelValue:f[_.cKey],"onUpdate:modelValue":c=>f[_.cKey]=c,onBlur:s[0]||(s[0]=c=>a())},null,8,["modelValue","onUpdate:modelValue"])])}:void 0]),1032,["field","title","edit-render"]))),128))]),_:1},8,["data"])])}}}));const an=o=>(ee("data-v-2687ecba"),o=o(),te(),o),on={class:"container__top"},nn={style:{width:"86%"}},sn=k("\u8BF7\u914D\u7F6E\u60A8\u7684\u56FE\u8868"),un=an(()=>v("p",null,"\u6539\u53D8\u56FE\u8868\u7C7B\u578B\u5C06\u4F1A\u5BFC\u81F4\u60A8\u7684\u914D\u7F6E\u4E22\u5931\uFF0C\u662F\u5426\u786E\u8BA4\u8FD4\u56DE\uFF1F",-1)),ln=k("\u8FD4\u56DE"),rn=k("\u4E0B\u4E00\u6B65"),cn={class:"container"},dn={style:{width:"70%"}},pn={class:"chart"},_n={style:{width:"25%",position:"relative"}},hn={name:"ChartConfig"},fn=$(M(A({},hn),{setup(o){const e=ue(),t=j(),n=T(()=>t.tableData),a=m=>{t.changeData(m.data)},l=w(["1"]),s=w("5"),r=w([{key:"1",header:"\u914D\u7F6E\u57FA\u672C\u4FE1\u606F"},{key:"2",header:"\u914D\u7F6E\u56FE\u8868\u4FE1\u606F"},{key:"3",header:"\u914D\u7F6E\u56FE\u8868\u6807\u8BB0"},{key:"4",header:"\u914D\u7F6E\u60AC\u6D6E\u63D0\u793A"},{key:"5",header:"\u914D\u7F6E\u56FE\u8868\u6C34\u5370"}]),p=()=>{e.push({path:"/visual/select",query:{status:"back"}})};let h;const _=m=>{var F;m?t.update({tooltip:h}):(h=A({},(F=t.chartOptions)==null?void 0:F.tooltip),t.update({tooltip:!1}),s.value="")};let f;const c=m=>{m?t.changeWaterMark(Te,f||Ha):(f=t.waterMarkUrl,t.changeWaterMark(!1,void 0),s.value="")},g=async()=>{if(!t.chartType||!t.chartPicId||!t.chartOptions||!t.waterMarkOptions){K.error("\u53C2\u6570\u4E0D\u5B8C\u6574");return}await me.updateChartPicConfig({chart_title:t.chartTitle,chart_type:t.chartType,chartpic_id:t.chartPicId,vis_config:JSON.stringify(t.chartOptions),watermark_config:JSON.stringify(t.waterMarkOptions)})};return Y(()=>{s.value=""}),(m,F)=>{const b=d("a-divider"),x=d("a-button"),y=d("a-popconfirm"),I=d("a-collapse-panel"),W=d("a-collapse"),G=d("a-switch");return C(),D(R,null,[v("div",on,[v("div",nn,[u(b,{class:"text",orientation:"left"},{default:i(()=>[sn]),_:1})]),u(y,{placement:"topLeft","ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onConfirm:p},{title:i(()=>[un]),default:i(()=>[u(x,{type:"primary"},{default:i(()=>[ln]),_:1})]),_:1}),u(x,{type:"primary",onClick:g},{default:i(()=>[rn]),_:1})]),v("div",cn,[v("div",dn,[u(W,{activeKey:l.value,"onUpdate:activeKey":F[0]||(F[0]=O=>l.value=O)},{expandIcon:i(O=>[u(E(Be),{rotate:O.isActive?90:0},null,8,["rotate"])]),default:i(()=>[u(I,{key:"1",header:"\u56FE\u8868\u5C55\u793A"},{default:i(()=>[v("div",pn,[u(Oe,{id:"storeChart",url:E(t).waterMarkUrl,name:E(t).chartType,options:E(t).backupChartOptions,title:E(t).chartTitle,"use-store":!0},null,8,["url","name","options","title"])])]),_:1}),u(I,{key:"2",header:"\u56FE\u8868\u6570\u636E"},{default:i(()=>[u(tn,{table:E(n),class:"table",onTableDataChange:a},null,8,["table"])]),_:1})]),_:1},8,["activeKey"])]),v("div",_n,[u(W,{activeKey:s.value,"onUpdate:activeKey":F[1]||(F[1]=O=>s.value=O),accordion:"",onChange:F[2]||(F[2]=O=>s.value=O)},{expandIcon:i(O=>[u(E(Be),{rotate:O.isActive?90:0},null,8,["rotate"])]),default:i(()=>{var O;return[(C(),S(I,{key:r.value[0].key,header:r.value[0].header},{default:i(()=>[u(Mo)]),_:1},8,["header"])),(C(),S(I,{key:r.value[1].key,header:r.value[1].header},{default:i(()=>[u(Oo)]),_:1},8,["header"])),(C(),S(I,{key:r.value[2].key,header:r.value[2].header},{default:i(()=>[u(Yo)]),_:1},8,["header"])),(C(),S(I,{key:r.value[3].key,header:r.value[3].header,disabled:!((O=E(t).chartOptions)==null?void 0:O.tooltip)},{extra:i(()=>{var Z;return[u(G,{checked:!!((Z=E(t).chartOptions)==null?void 0:Z.tooltip),onChange:_},null,8,["checked"])]}),default:i(()=>[u(Po)]),_:1},8,["header","disabled"])),(C(),S(I,{key:r.value[4].key,header:r.value[4].header,disabled:!E(t).waterMarkOptions},{extra:i(()=>[u(G,{checked:!!E(t).waterMarkOptions,onChange:c},null,8,["checked"])]),default:i(()=>[u(Zo)]),_:1},8,["header","disabled"]))]}),_:1},8,["activeKey"])])])],64)}}}));var mn=N(fn,[["__scopeId","data-v-2687ecba"]]);const vn=[{path:"/",name:"\u9996\u9875",component:Wt,children:[{path:"/login",name:"\u767B\u5F55",component:oa},{path:"/register",name:"\u6CE8\u518C",component:ha},{path:"/start",name:"\u5F00\u59CB",component:za},{path:"/visual",name:"\u53EF\u89C6\u5316",component:qa,redirect:"/visual/select",children:[{path:"/visual/select",name:"\u9009\u62E9\u56FE\u8868",component:go},{path:"/visual/config",name:"\u914D\u7F6E\u56FE\u8868",component:mn}]},{path:"/projects",name:"\u9879\u76EE",component:()=>fe(()=>import("./index-06b1c305.js"),["js/index-06b1c305.js","css/index-49b9d34c.css","js/vendor-ea278687.js","css/vendor-135fa2c3.css"])},{path:"/publish",name:"\u53D1\u5E03",component:()=>fe(()=>import("./index-f5b77bcf.js"),["js/index-f5b77bcf.js","css/index-382055dc.css","js/vendor-ea278687.js","css/vendor-135fa2c3.css"])},{path:"/preprocess",name:"\u6570\u636E\u9884\u5904\u7406",component:()=>fe(()=>import("./index-af73057c.js"),["js/index-af73057c.js","css/index-af20c568.css","js/vendor-ea278687.js","css/vendor-135fa2c3.css"])}]}],ce=it({history:ct(),routes:vn});ce.beforeEach((o,e,t)=>{o.path==="/login"?ae.getItem("user")?ce.push("/projects"):t():ae.getItem("user")?t():(K.info("\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55"),ce.push("/login"))});const Ne=dt();Ne.use(pt);_t(Ct).use(ce).use(Ne).use(ht).use(ft).mount("#app");export{Q as P,ne as T,N as _,Xa as a,V as c,ae as d,j as u};
