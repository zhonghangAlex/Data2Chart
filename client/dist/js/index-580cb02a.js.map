{"version":3,"file":"index-580cb02a.js","sources":["../../src/pages/projects/index.vue"],"sourcesContent":["<template>\n\t<div class=\"container\">\n\t\t<div class=\"new-project\">\n\t\t\t<a-button type=\"primary\" @click=\"handleCreate\">新建项目</a-button>\n\t\t</div>\n\t\t<div class=\"project\">\n\t\t\t<div class=\"edit-recently recently\">\n\t\t\t\t<h2>最近编辑</h2>\n\t\t\t\t<div class=\"recently__list edit-recently__list\">\n\t\t\t\t\t<div v-for=\"item in recentEdit\" :key=\"item.id\" class=\"recently__item edit-recently__item\" @click=\"handleJump(item)\">\n\t\t\t\t\t\t<h3 class=\"recently__item__title\">{{ item.project_name }}</h3>\n\t\t\t\t\t\t<p class=\"recently__item__edit-time\">最近编辑于 {{ item.day }} 天前</p>\n\t\t\t\t\t\t<a-popover title=\"详细信息\">\n\t\t\t\t\t\t\t<template #content>\n\t\t\t\t\t\t\t\t<p>创建日期：{{ item.create_time.slice(0, 19).replace('T', ' ') }}</p>\n\t\t\t\t\t\t\t\t<p>最近修改：{{ item.modify_time.slice(0, 19).replace('T', ' ') }}</p>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<a-button size=\"small\" type=\"link\" class=\"recently__item__detail\">详情</a-button>\n\t\t\t\t\t\t</a-popover>\n\t\t\t\t\t\t<div class=\"recently__item__picture\" :style=\"{ 'background-image': `url(${item.picture})` }\"></div>\n\t\t\t\t\t\t<a-tag v-if=\"item.first_finished === 1\" color=\"orange\">开始</a-tag>\n\t\t\t\t\t\t<a-tag v-if=\"item.second_finished === 1\" color=\"green\">预处理</a-tag>\n\t\t\t\t\t\t<a-tag v-if=\"item.third_finished === 1\" color=\"cyan\">绘图</a-tag>\n\t\t\t\t\t\t<a-tag v-if=\"item.share_hash !== ''\" color=\"blue\">发布</a-tag>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"post-recently recently\">\n\t\t\t\t<h2>最近发布</h2>\n\t\t\t\t<div class=\"recently__list post-recently__list\">\n\t\t\t\t\t<div v-for=\"item in recentPost\" :key=\"item.id\" class=\"recently__item edit-recently__item\" @click=\"handleJump(item)\">\n\t\t\t\t\t\t<h3 class=\"recently__item__title\">{{ item.project_name }}</h3>\n\t\t\t\t\t\t<p class=\"recently__item__edit-time\">最近编辑于 {{ item.day }} 天前</p>\n\t\t\t\t\t\t<a-popover title=\"详细信息\">\n\t\t\t\t\t\t\t<template #content>\n\t\t\t\t\t\t\t\t<p>创建日期：{{ item.create_time.slice(0, 19).replace('T', ' ') }}</p>\n\t\t\t\t\t\t\t\t<p>最近修改：{{ item.modify_time.slice(0, 19).replace('T', ' ') }}</p>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<a-button size=\"small\" type=\"link\" class=\"recently__item__detail\">详情</a-button>\n\t\t\t\t\t\t</a-popover>\n\t\t\t\t\t\t<div class=\"recently__item__picture\" :style=\"{ 'background-image': `url(${item.picture})` }\"></div>\n\t\t\t\t\t\t<a-tag v-if=\"item.first_finished === 1\" color=\"orange\">开始</a-tag>\n\t\t\t\t\t\t<a-tag v-if=\"item.second_finished === 1\" color=\"green\">预处理</a-tag>\n\t\t\t\t\t\t<a-tag v-if=\"item.third_finished === 1\" color=\"cyan\">绘图</a-tag>\n\t\t\t\t\t\t<a-tag v-if=\"item.share_hash !== ''\" color=\"blue\">发布</a-tag>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { reactive, toRefs } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useProjectStore } from '@/store/project';\n\nconst recentPoject = [\n\t{\n\t\tdata_type: 1,\n\t\tdata_string: '{}',\n\t\tfirst_finished: 1, // 1为第一步新建项目完成，-1为没有\n\t\tsecond_finished: -1, // 1为第二步数据预处理完成，-1为没有\n\t\tthird_finished: -1, // 1为第三步可视化配置完成，-1为没有\n\t\tshare_hash: '', // 分享的hash地址\n\t\tid: 6,\n\t\tuser_name: 'alexzhli',\n\t\tproject_name: 'BUG都写对项目',\n\t\tproject_id: '32958067-a627-4b64-abaa-43c52734b649',\n\t\tcreate_time: '2022-02-01T18:14:38.714Z',\n\t\tmodify_time: '2022-02-01T18:14:38.714Z',\n\t\t// picture: 'https://img.datawrapper.de/7Svd1/96fae3462e57e71e8e8f9f87ae349638/plain.png',\n\t},\n\t{\n\t\tdata_type: 1,\n\t\tdata_string: '{}',\n\t\tfirst_finished: 1, // 1为第一步新建项目完成，-1为没有\n\t\tsecond_finished: 1, // 1为第二步数据预处理完成，-1为没有\n\t\tthird_finished: -1, // 1为第三步可视化配置完成，-1为没有\n\t\tshare_hash: '', // 分享的hash地址\n\t\tid: 6,\n\t\tuser_name: 'alexzhli',\n\t\tproject_name: 'BUG都写对项目',\n\t\tproject_id: '32958067-a627-4b64-abaa-43c52734b649',\n\t\tcreate_time: '2022-02-01T18:14:38.714Z',\n\t\tmodify_time: '2022-02-01T18:14:38.714Z',\n\t},\n\t{\n\t\tdata_type: 1,\n\t\tdata_string: '{}',\n\t\tfirst_finished: 1, // 1为第一步新建项目完成，-1为没有\n\t\tsecond_finished: 1, // 1为第二步数据预处理完成，-1为没有\n\t\tthird_finished: 1, // 1为第三步可视化配置完成，-1为没有\n\t\tshare_hash: '', // 分享的hash地址\n\t\tid: 6,\n\t\tuser_name: 'alexzhli',\n\t\tproject_name: 'BUG都写对项目',\n\t\tproject_id: '32958067-a627-4b64-abaa-43c52734b649',\n\t\tcreate_time: '2022-02-01T18:14:38.714Z',\n\t\tmodify_time: '2022-02-01T18:14:38.714Z',\n\t},\n\t{\n\t\tdata_type: 1,\n\t\tdata_string: '{}',\n\t\tfirst_finished: 1, // 1为第一步新建项目完成，-1为没有\n\t\tsecond_finished: 1, // 1为第二步数据预处理完成，-1为没有\n\t\tthird_finished: 1, // 1为第三步可视化配置完成，-1为没有\n\t\tshare_hash: '111', // 分享的hash地址\n\t\tid: 6,\n\t\tuser_name: 'alexzhli',\n\t\tproject_name: 'BUG都写对项目',\n\t\tproject_id: '32958067-a627-4b64-abaa-43c52734b649',\n\t\tcreate_time: '2022-02-01T18:14:38.714Z',\n\t\tmodify_time: '2022-02-01T18:14:38.714Z',\n\t},\n];\n\nconst id = 10001;\n\nexport default {\n\tname: 'Projects',\n\tsetup() {\n\t\tconst state = reactive({});\n\t\tconst router = useRouter();\n\t\tconst projectStore = useProjectStore();\n\t\tconst recentEdit = [];\n\t\tconst recentPost = [];\n\t\trecentPoject.forEach(value => {\n\t\t\tconst showValue = value;\n\t\t\tconst modifyTimeStamp = new Date(value.modify_time).valueOf();\n\t\t\tconst nowTimeStamp = new Date().valueOf();\n\t\t\tconst day = (nowTimeStamp - modifyTimeStamp) / (1000 * 60 * 60 * 24);\n\t\t\tvalue.day = day.toFixed(0);\n\t\t\tif (showValue.share_hash !== '') {\n\t\t\t\trecentPost.push(value);\n\t\t\t} else {\n\t\t\t\trecentEdit.push(value);\n\t\t\t}\n\t\t});\n\t\tconst handleJump = item => {\n\t\t\tlet path = '';\n\t\t\tif (item.share_hash !== '') {\n\t\t\t\tpath = '/publish';\n\t\t\t} else if (item.third_finished === 1) {\n\t\t\t\tpath = '/publish';\n\t\t\t} else if (item.second_finished === 1) {\n\t\t\t\tpath = '/visual';\n\t\t\t} else if (item.first_finished === 1) {\n\t\t\t\tpath = '/preprocess';\n\t\t\t} else {\n\t\t\t\tpath = '/start';\n\t\t\t}\n\t\t\trouter.push({ path });\n\t\t};\n\t\tconst handleCreate = async () => {\n\t\t\t// await createRequest(); 获取 id\n\t\t\tprojectStore.updateId(id);\n\t\t\trouter.push({ path: `/start` });\n\t\t};\n\n\t\treturn {\n\t\t\t...toRefs(state),\n\t\t\trecentEdit,\n\t\t\trecentPost,\n\t\t\thandleJump,\n\t\t\thandleCreate,\n\t\t};\n\t},\n};\n</script>\n<style lang=\"scss\" scoped>\nh2 {\n\tmargin-bottom: 20px;\n}\n\n.container {\n\tmargin: 0 40px 60px 40px;\n}\n\n.recently {\n\tmargin: 20px 0 40px 0;\n\t&__list {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fill, 300px);\n\t\tgrid-template-rows: repeat(auto-fill, 300px);\n\t\tgrid-gap: 20px;\n\t}\n\t&__item {\n\t\tposition: relative;\n\t\theight: 300px;\n\t\tpadding: 14px 25px;\n\t\tborder-radius: 8px;\n\t\tborder: 2px solid #eee;\n\t\t&__picture {\n\t\t\theight: 190px;\n\t\t\twidth: 250px;\n\t\t\tmargin-bottom: 4px;\n\t\t\tbackground-size: contain;\n\t\t\tbackground-repeat: no-repeat;\n\t\t}\n\t\t&__title {\n\t\t\tfont-weight: 700;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__edit-time {\n\t\t\tcolor: #555;\n\t\t\tfont-size: 13px;\n\t\t\tmargin-bottom: 4px;\n\t\t}\n\t\t&__detail {\n\t\t\tposition: absolute;\n\t\t\ttop: 44px;\n\t\t\tright: 25px;\n\t\t}\n\t}\n}\n\n.project {\n\tdisplay: flex;\n}\n\n.edit-recently {\n\tflex: 2;\n}\n\n.post-recently {\n\tflex: 1;\n\tpadding-left: 20px;\n\tborder-left: 2px dashed #eee;\n}\n</style>\n"],"names":[],"mappings":"olBAyDA"}