var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,r=(e,t)=>{for(var l in t||(t={}))o.call(t,l)&&s(e,l,t[l]);if(a)for(var l of a(t))i.call(t,l)&&s(e,l,t[l]);return e},n=(e,a)=>t(e,l(a));/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{h as u,j as d,t as c,ab as h,o as v,v as p,a as f,U as g,y as m,a5 as y,ac as b,ad as k,F as S,a3 as x,r as w,l as C,k as _,w as F,x as $,b as H,n as O,u as A,R as j,Q as z,ae as I,P as U,af as P,ag as R,c as E,C as L,ah as T,A as M,B,ai as N,X as D,aj as K,ak as W,G as X,al as Y,am as G,an as J,a8 as q,W as V,ao as Q,ap as Z,q as ee,m as te,aq as le}from"./vendor-0406d426.js";import{u as ae,d as oe,_ as ie,a as se}from"./ChartDisplay-f60d8d8c.js";import{_ as re}from"./index-1ec01f31.js";/* empty css              *//* empty css              */import{v as ne}from"./index-c7f9c6b1.js";/* empty css              */import"./index-e37a4e07.js";
/*!
  * vue-color-kit v1.0.4
  * (c) 2021 
  * @license MIT
  */
function ue(e){let t={r:0,g:0,b:0,a:1};/#/.test(e)?t=function(e){e=e.slice(1);const t=e=>parseInt(e,16)||0;return{r:t(e.slice(0,2)),g:t(e.slice(2,4)),b:t(e.slice(4,6))}}(e):/rgb/.test(e)?t=he(e):"string"==typeof e?t=he(`rgba(${e})`):"[object Object]"===Object.prototype.toString.call(e)&&(t=e);const{r:l,g:a,b:o,a:i}=t,{h:s,s:r,v:n}=function({r:e,g:t,b:l}){e/=255,t/=255,l/=255;const a=Math.max(e,t,l),o=Math.min(e,t,l),i=a-o;let s=0;a===o?s=0:a===e?s=t>=l?60*(t-l)/i:60*(t-l)/i+360:a===t?s=60*(l-e)/i+120:a===l&&(s=60*(e-t)/i+240);s=Math.floor(s);let r=parseFloat((0===a?0:1-o/a).toFixed(2)),n=parseFloat(a.toFixed(2));return{h:s,s:r,v:n}}(t);return{r:l,g:a,b:o,a:void 0===i?1:i,h:s,s:r,v:n}}function de(e){const t=document.createElement("canvas"),l=t.getContext("2d"),a=2*e;return t.width=a,t.height=a,l.fillStyle="#ffffff",l.fillRect(0,0,a,a),l.fillStyle="#ccd5db",l.fillRect(0,0,e,e),l.fillRect(e,e,e,e),t}function ce(e,t,l,a,o,i){const s="l"===e,r=t.createLinearGradient(0,0,s?l:0,s?0:a);r.addColorStop(.01,o),r.addColorStop(.99,i),t.fillStyle=r,t.fillRect(0,0,l,a)}function he(e){return"string"==typeof e?(e=(/rgba?\((.*?)\)/.exec(e)||["","0,0,0,1"])[1].split(","),{r:Number(e[0])||0,g:Number(e[1])||0,b:Number(e[2])||0,a:Number(e[3]?e[3]:1)}):e}var ve=u({props:{color:{type:String,default:"#000000"},hsv:{type:Object,default:null},size:{type:Number,default:152}},emits:["selectSaturation"],data:()=>({slideSaturationStyle:{}}),mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const e=this.$refs.canvasSaturation,t=this.size,l=e.getContext("2d");e.width=t,e.height=t,l.fillStyle=this.color,l.fillRect(0,0,t,t),ce("l",l,t,t,"#FFFFFF","rgba(255,255,255,0)"),ce("p",l,t,t,"rgba(0,0,0,0)","#000000")},renderSlide(){this.slideSaturationStyle={left:this.hsv.s*this.size-5+"px",top:(1-this.hsv.v)*this.size-5+"px"}},selectSaturation(e){const{top:t,left:l}=this.$el.getBoundingClientRect(),a=e.target.getContext("2d"),o=e=>{let o=e.clientX-l,i=e.clientY-t;o<0&&(o=0),i<0&&(i=0),o>this.size&&(o=this.size),i>this.size&&(i=this.size),this.slideSaturationStyle={left:o-5+"px",top:i-5+"px"};const s=a.getImageData(Math.min(o,this.size-1),Math.min(i,this.size-1),1,1),[r,n,u]=s.data;this.$emit("selectSaturation",{r:r,g:n,b:u})};o(e);const i=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",i)}}});const pe={ref:"canvasSaturation"};ve.render=function(e,t,l,a,o,i){return v(),p("div",{class:"saturation",onMousedown:t[1]||(t[1]=g(((...t)=>e.selectSaturation&&e.selectSaturation(...t)),["prevent","stop"]))},[f("canvas",pe,null,512),f("div",{style:e.slideSaturationStyle,class:"slide"},null,4)],32)},ve.__file="src/color/Saturation.vue";var fe=u({props:{hsv:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},emits:["selectHue"],data:()=>({slideHueStyle:{}}),mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const e=this.$refs.canvasHue,t=this.width,l=this.height,a=e.getContext("2d");e.width=t,e.height=l;const o=a.createLinearGradient(0,0,0,l);o.addColorStop(0,"#FF0000"),o.addColorStop(.17,"#FF00FF"),o.addColorStop(.34,"#0000FF"),o.addColorStop(.51,"#00FFFF"),o.addColorStop(.68,"#00FF00"),o.addColorStop(.17*5,"#FFFF00"),o.addColorStop(1,"#FF0000"),a.fillStyle=o,a.fillRect(0,0,t,l)},renderSlide(){this.slideHueStyle={top:(1-this.hsv.h/360)*this.height-2+"px"}},selectHue(e){const{top:t}=this.$el.getBoundingClientRect(),l=e.target.getContext("2d"),a=e=>{let a=e.clientY-t;a<0&&(a=0),a>this.height&&(a=this.height),this.slideHueStyle={top:a-2+"px"};const o=l.getImageData(0,Math.min(a,this.height-1),1,1),[i,s,r]=o.data;this.$emit("selectHue",{r:i,g:s,b:r})};a(e);const o=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",o)}}});const ge={ref:"canvasHue"};fe.render=function(e,t,l,a,o,i){return v(),p("div",{class:"hue",onMousedown:t[1]||(t[1]=g(((...t)=>e.selectHue&&e.selectHue(...t)),["prevent","stop"]))},[f("canvas",ge,null,512),f("div",{style:e.slideHueStyle,class:"slide"},null,4)],32)},fe.__file="src/color/Hue.vue";var me=u({props:{color:{type:String,default:"#000000"},rgba:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},emits:["selectAlpha"],data:()=>({slideAlphaStyle:{},alphaSize:5}),watch:{color(){this.renderColor()},"rgba.a"(){this.renderSlide()}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const e=this.$refs.canvasAlpha,t=this.width,l=this.height,a=de(this.alphaSize),o=e.getContext("2d");e.width=t,e.height=l,o.fillStyle=o.createPattern(a,"repeat"),o.fillRect(0,0,t,l),ce("p",o,t,l,"rgba(255,255,255,0)",this.color)},renderSlide(){this.slideAlphaStyle={top:this.rgba.a*this.height-2+"px"}},selectAlpha(e){const{top:t}=this.$el.getBoundingClientRect(),l=e=>{let l=e.clientY-t;l<0&&(l=0),l>this.height&&(l=this.height);let a=parseFloat((l/this.height).toFixed(2));this.$emit("selectAlpha",a)};l(e);const a=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",a)}}});const ye={ref:"canvasAlpha"};me.render=function(e,t,l,a,o,i){return v(),p("div",{class:"color-alpha",onMousedown:t[1]||(t[1]=g(((...t)=>e.selectAlpha&&e.selectAlpha(...t)),["prevent","stop"]))},[f("canvas",ye,null,512),f("div",{style:e.slideAlphaStyle,class:"slide"},null,4)],32)},me.__file="src/color/Alpha.vue";var be=u({props:{color:{type:String,default:"#000000"},width:{type:Number,default:100},height:{type:Number,default:30}},data:()=>({alphaSize:5}),watch:{color(){this.renderColor()}},mounted(){this.renderColor()},methods:{renderColor(){const e=this.$el,t=this.width,l=this.height,a=de(this.alphaSize),o=e.getContext("2d");e.width=t,e.height=l,o.fillStyle=o.createPattern(a,"repeat"),o.fillRect(0,0,t,l),o.fillStyle=this.color,o.fillRect(0,0,t,l)}}});be.render=function(e,t,l,a,o,i){return v(),p("canvas")},be.__file="src/color/Preview.vue";var ke=u({props:{suckerCanvas:{type:Object,default:null},suckerArea:{type:Array,default:()=>[]}},data:()=>({isOpenSucker:!1,suckerPreview:null,isSucking:!1}),watch:{suckerCanvas(e){this.isSucking=!1,this.suckColor(e)}},methods:{openSucker(){this.isOpenSucker?this.keydownHandler({keyCode:27}):(this.isOpenSucker=!0,this.isSucking=!0,this.$emit("openSucker",!0),document.addEventListener("keydown",this.keydownHandler))},keydownHandler(e){27===e.keyCode&&(this.isOpenSucker=!1,this.isSucking=!1,this.$emit("openSucker",!1),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("mousemove",this.mousemoveHandler),document.removeEventListener("mouseup",this.mousemoveHandler),this.suckerPreview&&(document.body.removeChild(this.suckerPreview),this.suckerPreview=null))},mousemoveHandler(e){const{clientX:t,clientY:l}=e,{top:a,left:o,width:i,height:s}=this.suckerCanvas.getBoundingClientRect(),r=t-o,n=l-a,u=this.suckerCanvas.getContext("2d").getImageData(Math.min(r,i-1),Math.min(n,s-1),1,1);let[d,c,h,v]=u.data;v=parseFloat((v/255).toFixed(2));const p=this.suckerPreview.style;Object.assign(p,{position:"absolute",left:t+20+"px",top:l-36+"px",width:"24px",height:"24px",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 8px 0 rgba(0, 0, 0, 0.16)",background:`rgba(${d}, ${c}, ${h}, ${v})`,zIndex:95}),this.suckerArea.length&&t>=this.suckerArea[0]&&l>=this.suckerArea[1]&&t<=this.suckerArea[2]&&l<=this.suckerArea[3]?p.display="":p.display="none"},suckColor(e){e&&"CANVAS"!==e.tagName||(this.suckerPreview=document.createElement("div"),this.suckerPreview&&document.body.appendChild(this.suckerPreview),document.addEventListener("mousemove",this.mousemoveHandler),document.addEventListener("mouseup",this.mousemoveHandler),e.addEventListener("click",(t=>{const{clientX:l,clientY:a}=t,{top:o,left:i,width:s,height:r}=e.getBoundingClientRect(),n=l-i,u=a-o,d=e.getContext("2d").getImageData(Math.min(n,s-1),Math.min(u,r-1),1,1);let[c,h,v,p]=d.data;p=parseFloat((p/255).toFixed(2)),this.$emit("selectSucker",{r:c,g:h,b:v,a:p})})))}}});const Se=f("path",{d:"M13.1,8.2l5.6,5.6c0.4,0.4,0.5,1.1,0.1,1.5s-1.1,0.5-1.5,0.1c0,0-0.1,0-0.1-0.1l-1.4-1.4l-7.7,7.7C7.9,21.9,7.6,22,7.3,22H3.1C2.5,22,2,21.5,2,20.9l0,0v-4.2c0-0.3,0.1-0.6,0.3-0.8l5.8-5.8C8.5,9.7,9.2,9.6,9.7,10s0.5,1.1,0.1,1.5c0,0,0,0.1-0.1,0.1l-5.5,5.5v2.7h2.7l7.4-7.4L8.7,6.8c-0.5-0.4-0.5-1-0.1-1.5s1.1-0.5,1.5-0.1c0,0,0.1,0,0.1,0.1l1.4,1.4l3.5-3.5c1.6-1.6,4.1-1.6,5.8-0.1c1.6,1.6,1.6,4.1,0.1,5.8L20.9,9l-3.6,3.6c-0.4,0.4-1.1,0.5-1.5,0.1"},null,-1),xe={key:1,class:"sucker",viewBox:"-16 -16 68 68",xmlns:"http://www.w3.org/2000/svg",stroke:"#9099a4"},we=f("g",{fill:"none","fill-rule":"evenodd"},[f("g",{transform:"translate(1 1)","stroke-width":"4"},[f("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),f("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[f("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])],-1);ke.render=function(e,t,l,a,o,i){return v(),p("div",null,[e.isSucking?m("v-if",!0):(v(),p("svg",{key:0,class:[{active:e.isOpenSucker},"sucker"],xmlns:"http://www.w3.org/2000/svg",viewBox:"-12 -12 48 48",onClick:t[1]||(t[1]=(...t)=>e.openSucker&&e.openSucker(...t))},[Se],2)),e.isSucking?(v(),p("svg",xe,[we])):m("v-if",!0)])},ke.__file="src/color/Sucker.vue";var Ce=u({props:{name:{type:String,default:""},color:{type:String,default:""}},emits:["inputColor"],setup:(e,{emit:t})=>({modelColor:d({get:()=>e.color||"",set(e){t("inputColor",e)}})})});const _e={class:"color-type"},Fe={class:"name"};Ce.render=function(e,t,l,a,o,i){return v(),p("div",_e,[f("span",Fe,y(e.name),1),b(f("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.modelColor=t),class:"value"},null,512),[[k,e.modelColor]])])},Ce.__file="src/color/Box.vue";var $e=u({name:"ColorPicker",props:{color:{type:String,default:"#000000"},colorsDefault:{type:Array,default:()=>[]},colorsHistoryKey:{type:String,default:""}},emits:["selectColor"],setup(e,{emit:t}){const l=c(),a=c([]),o=c();function i(t){if(!t)return;const l=a.value||[],o=l.indexOf(t);o>=0&&l.splice(o,1),l.length>=8&&(l.length=7),l.unshift(t),a.value=l||[],localStorage&&e.colorsHistoryKey&&localStorage.setItem(e.colorsHistoryKey,JSON.stringify(l))}return e.colorsHistoryKey&&localStorage&&(a.value=JSON.parse(localStorage.getItem(e.colorsHistoryKey))||[]),o.value=de(4).toDataURL(),h((()=>{i(l.value)})),{setColorsHistory:i,colorsHistory:a,color:l,imgAlphaBase64:o,selectColor:function(e){t("selectColor",e)}}}});const He={class:"colors"},Oe={key:0,class:"colors history"};$e.render=function(e,t,l,a,o,i){return v(),p("div",null,[f("ul",He,[(v(!0),p(S,null,x(e.colorsDefault,(t=>(v(),p("li",{key:t,class:"item",onClick:l=>e.selectColor(t)},[f("div",{style:{background:`url(${e.imgAlphaBase64})`},class:"alpha"},null,4),f("div",{style:{background:t},class:"color"},null,4)],8,["onClick"])))),128))]),e.colorsHistory.length?(v(),p("ul",Oe,[(v(!0),p(S,null,x(e.colorsHistory,(t=>(v(),p("li",{key:t,class:"item",onClick:l=>e.selectColor(t)},[f("div",{style:{background:`url(${e.imgAlphaBase64})`},class:"alpha"},null,4),f("div",{style:{background:t},class:"color"},null,4)],8,["onClick"])))),128))])):m("v-if",!0)])},$e.__file="src/color/Colors.vue";var Ae=u({components:{Saturation:ve,Hue:fe,Alpha:me,Preview:be,Sucker:ke,Box:Ce,Colors:$e},emits:["changeColor","openSucker"],props:{color:{type:String,default:"#000000"},theme:{type:String,default:"dark"},suckerHide:{type:Boolean,default:!0},suckerCanvas:{type:null,default:null},suckerArea:{type:Array,default:()=>[]},colorsDefault:{type:Array,default:()=>["#000000","#FFFFFF","#FF1900","#F47365","#FFB243","#FFE623","#6EFF2A","#1BC7B1","#00BEFF","#2E81FF","#5D61FF","#FF89CF","#FC3CAD","#BF3DCE","#8E00A7","rgba(0,0,0,0)"]},colorsHistoryKey:{type:String,default:"vue-colorpicker-history"}},data:()=>({hueWidth:15,hueHeight:152,previewHeight:30,modelRgba:"",modelHex:"",r:0,g:0,b:0,a:1,h:0,s:0,v:0}),computed:{isLightTheme(){return"light"===this.theme},totalWidth(){return this.hueHeight+2*(this.hueWidth+8)},previewWidth(){return this.totalWidth-(this.suckerHide?0:this.previewHeight)},rgba(){return{r:this.r,g:this.g,b:this.b,a:this.a}},hsv(){return{h:this.h,s:this.s,v:this.v}},rgbString(){return`rgb(${this.r}, ${this.g}, ${this.b})`},rgbaStringShort(){return`${this.r}, ${this.g}, ${this.b}, ${this.a}`},rgbaString(){return`rgba(${this.rgbaStringShort})`},hexString(){return function({r:e,g:t,b:l},a){const o=e=>("0"+Number(e).toString(16)).slice(-2),i=`#${o(e)}${o(t)}${o(l)}`;return a?i.toUpperCase():i}(this.rgba,!0)}},created(){Object.assign(this,ue(this.color)),this.setText(),this.$watch("rgba",(()=>{this.$emit("changeColor",{rgba:this.rgba,hsv:this.hsv,hex:this.modelHex})}))},methods:{selectSaturation(e){const{r:t,g:l,b:a,h:o,s:i,v:s}=ue(e);Object.assign(this,{r:t,g:l,b:a,h:o,s:i,v:s}),this.setText()},selectHue(e){const{r:t,g:l,b:a,h:o,s:i,v:s}=ue(e);Object.assign(this,{r:t,g:l,b:a,h:o,s:i,v:s}),this.setText(),this.$nextTick((()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide()}))},selectAlpha(e){this.a=e,this.setText()},inputHex(e){const{r:t,g:l,b:a,a:o,h:i,s:s,v:r}=ue(e);Object.assign(this,{r:t,g:l,b:a,a:o,h:i,s:s,v:r}),this.modelHex=e,this.modelRgba=this.rgbaStringShort,this.$nextTick((()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()}))},inputRgba(e){const{r:t,g:l,b:a,a:o,h:i,s:s,v:r}=ue(e);Object.assign(this,{r:t,g:l,b:a,a:o,h:i,s:s,v:r}),this.modelHex=this.hexString,this.modelRgba=e,this.$nextTick((()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()}))},setText(){this.modelHex=this.hexString,this.modelRgba=this.rgbaStringShort},openSucker(e){this.$emit("openSucker",e)},selectSucker(e){const{r:t,g:l,b:a,a:o,h:i,s:s,v:r}=ue(e);Object.assign(this,{r:t,g:l,b:a,a:o,h:i,s:s,v:r}),this.setText(),this.$nextTick((()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()}))},selectColor(e){const{r:t,g:l,b:a,a:o,h:i,s:s,v:r}=ue(e);Object.assign(this,{r:t,g:l,b:a,a:o,h:i,s:s,v:r}),this.setText(),this.$nextTick((()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()}))}}});const je={class:"color-set"};Ae.render=function(e,t,l,a,o,i){const s=w("Saturation"),r=w("Hue"),n=w("Alpha"),u=w("Preview"),d=w("Sucker"),c=w("Box"),h=w("Colors");return v(),p("div",{class:["hu-color-picker",{light:e.isLightTheme}],style:{width:e.totalWidth+"px"}},[f("div",je,[f(s,{ref:"saturation",color:e.rgbString,hsv:e.hsv,size:e.hueHeight,onSelectSaturation:e.selectSaturation},null,8,["color","hsv","size","onSelectSaturation"]),f(r,{ref:"hue",hsv:e.hsv,width:e.hueWidth,height:e.hueHeight,onSelectHue:e.selectHue},null,8,["hsv","width","height","onSelectHue"]),f(n,{ref:"alpha",color:e.rgbString,rgba:e.rgba,width:e.hueWidth,height:e.hueHeight,onSelectAlpha:e.selectAlpha},null,8,["color","rgba","width","height","onSelectAlpha"])]),f("div",{style:{height:e.previewHeight+"px"},class:"color-show"},[f(u,{color:e.rgbaString,width:e.previewWidth,height:e.previewHeight},null,8,["color","width","height"]),e.suckerHide?m("v-if",!0):(v(),p(d,{key:0,"sucker-canvas":e.suckerCanvas,"sucker-area":e.suckerArea,onOpenSucker:e.openSucker,onSelectSucker:e.selectSucker},null,8,["sucker-canvas","sucker-area","onOpenSucker","onSelectSucker"]))],4),f(c,{name:"HEX",color:e.modelHex,onInputColor:e.inputHex},null,8,["color","onInputColor"]),f(c,{name:"RGBA",color:e.modelRgba,onInputColor:e.inputRgba},null,8,["color","onInputColor"]),f(h,{color:e.rgbaString,"colors-default":e.colorsDefault,"colors-history-key":e.colorsHistoryKey,onSelectColor:e.selectColor},null,8,["color","colors-default","colors-history-key","onSelectColor"]),m(" custom options "),C(e.$slots,"default")],6)},Ae.__file="src/color/ColorPicker.vue",Ae.install=e=>{e.component(Ae.name,Ae)};const ze=["width","height"],Ie={style:{display:"flex"}};var Ue=re(u({setup(e){const t=ae(),l=c(r(r({},oe),t.waterMarkOptions?t.waterMarkOptions:{}));let a=r({},l.value);const o=c(!1),i=({rgba:{r:e,g:t,b:a,a:o}})=>{l.value.color=`rgba(${e},${t},${a},${o})`},s=c(null),n=d((()=>{var e;return null==(e=s.value)?void 0:e.getContext("2d")})),u=()=>{if(s.value&&n.value){const e=s.value.toDataURL("image/png");t.changeWaterMark(l.value,e)}},h=e=>{n.value&&(n.value.font=`${e.fontSize}px normal`,n.value.fillStyle=e.color,n.value.translate(e.width/2,e.width/2),n.value.rotate(e.rotate*Math.PI/180),n.value.translate(-e.width/2,-e.width/2),n.value.textAlign="center",n.value.fillText(e.content,e.width/2,(e.height+e.fontSize)/2,e.width),u())};return _((()=>{h(l.value)})),F((()=>l.value),(e=>{(e=>{n.value&&n.value.clearRect(0,0,e.width,e.height)})(a),((e,t)=>{if(s.value&&n.value){if(e.width!==t.width)return s.value.width=e.width,void h(e);if(e.height!==t.height)return s.value.height=e.height,void h(e);e.color!==t.color?n.value.fillStyle=e.color:e.fontSize!==t.fontSize?n.value.font=`${e.fontSize}px normal`:e.rotate!==t.rotate&&(n.value.translate(e.width/2,e.width/2),n.value.rotate((e.rotate-t.rotate)*Math.PI/180),n.value.translate(-e.width/2,-e.width/2)),n.value.fillText(e.content,e.width/2,(e.height+e.fontSize)/2,e.width)}})(e,a),u(),a=r({},e)}),{deep:!0}),(e,t)=>{const a=j,r=z,n=I,u=U;return v(),p(u,{model:l.value},{default:$((()=>[f(a,{label:"预览"},{default:$((()=>[H("canvas",{ref_key:"canvas",ref:s,class:"water__mark___canvas",width:l.value.width,height:l.value.height},null,8,ze)])),_:1}),f(a,{label:"字体内容"},{default:$((()=>[f(r,{value:l.value.content,"onUpdate:value":t[0]||(t[0]=e=>l.value.content=e)},null,8,["value"])])),_:1}),f(a,{label:"字体大小"},{default:$((()=>[f(n,{value:l.value.fontSize,"onUpdate:value":t[1]||(t[1]=e=>l.value.fontSize=e),min:10,max:60},null,8,["value"])])),_:1}),f(a,{label:"文本颜色",style:{position:"relative"}},{default:$((()=>[H("div",Ie,[H("div",{class:"color__display",style:O({backgroundColor:l.value.color}),onClick:t[2]||(t[2]=e=>o.value=!o.value)},null,4)]),f(A(Ae),{class:"color__picker",style:O(o.value?{}:{display:"none"}),theme:"light",color:l.value.color,"sucker-hide":!0,onChangeColor:i},null,8,["style","color"])])),_:1}),f(a,{label:"旋转角度"},{default:$((()=>[f(n,{value:l.value.rotate,"onUpdate:value":t[3]||(t[3]=e=>l.value.rotate=e),min:-180,max:180},null,8,["value"])])),_:1})])),_:1},8,["model"])}}}),[["__scopeId","data-v-469db5fc"]]);const Pe=u({setup(e){var t;const l=ae(),a=d((()=>{var e;return Object.keys((null==(e=l.chartOptions)?void 0:e.data[0])||{})})),o=c(r({fields:[],showTitle:!0,shared:!0,showCrosshairs:!0},(null==(t=l.chartOptions)?void 0:t.tooltip)?l.chartOptions.tooltip:{}));return F((()=>o.value),(e=>{l.update({tooltip:e})}),{deep:!0}),(e,t)=>{const l=P,i=j,s=R,r=U;return v(),p(r,{model:o.value},{default:$((()=>[f(i,{label:"自定义字段"},{default:$((()=>[f(l,{value:o.value.fields,"onUpdate:value":t[0]||(t[0]=e=>o.value.fields=e),name:"group",options:A(a)},null,8,["value","options"])])),_:1}),f(i,{label:"显示标题"},{default:$((()=>[f(s,{checked:o.value.showTitle,"onUpdate:checked":t[1]||(t[1]=e=>o.value.showTitle=e)},null,8,["checked"])])),_:1}),f(i,{label:"展示相邻数据"},{default:$((()=>[f(s,{checked:o.value.shared,"onUpdate:checked":t[2]||(t[2]=e=>o.value.shared=e)},null,8,["checked"])])),_:1}),f(i,{label:"显示辅助线"},{default:$((()=>[f(s,{checked:o.value.showCrosshairs,"onUpdate:checked":t[3]||(t[3]=e=>o.value.showCrosshairs=e)},null,8,["checked"])])),_:1})])),_:1},8,["model"])}}});const Re=e=>(M("data-v-5282713e"),e=e(),B(),e),Ee={style:{display:"flex"}},Le={style:{display:"flex","align-items":"center"}},Te={class:"btn__list"},Me=L("删除标记"),Be=Re((()=>H("div",{style:{color:"rgba(0, 0, 0, 0.3)","margin-top":"10px"}},"Tip: 点击图表中标注可以进行修改哦！",-1)));var Ne=re(u({props:{id:null},setup(e){const t=e,l=ae(),a=d((()=>l.chartInstance.options.data)),o=d((()=>l.chartInstance.options.xField||"")),i=d((()=>l.chartInstance.options.yField||"")),s=c({type:"text",content:"",offsetX:0,offsetY:0,style:{fill:"#000000",fontSize:14},id:Date.now().toString(),position:["",""]}),r=c(""),n=c(!1),u=c(!1),h=({rgba:{r:e,g:t,b:l,a:a}})=>{s.value.style.fill=`rgba(${e},${t},${l},${a})`},g=e=>{s.value.position=e.split(","),s.value.position.shift()};F((()=>t.id),(e=>{const{option:t}=l.chartInstance.chart.annotation();if(t){const l=t.find((t=>t.id===e));r.value=l.position.join(","),Object.assign(s.value,l),n.value=!0}}));const m=()=>{n.value=!1,r.value="",s.value={type:"text",content:"",offsetX:0,offsetY:0,style:{fill:"#000000",fontSize:14},id:Date.now().toString(),position:["",""]}},k=()=>{const{option:e}=l.chartInstance.chart.annotation();l.update({annotations:e})},w=()=>{s.value.position.some((e=>""===e))||""===s.value.content||(n.value&&s.value.id&&(l.removeAnnotations([{id:s.value.id}]),s.value.id=Date.now().toString()),l.addAnnotations([s.value]),k(),m())},C=()=>{n.value&&s.value.id&&(l.removeAnnotations([{id:s.value.id}]),k(),m())};return(e,t)=>{const l=j,d=N,c=D,m=z,k=I,_=K,F=W,P=X,R=U;return v(),p(R,{model:s.value},{default:$((()=>[f(l,{label:"效果展示"},{default:$((()=>[H("div",{class:"annotation__display",style:O({height:s.value.style.fontSize+"px",lineHeight:s.value.style.fontSize+"px",fontSize:s.value.style.fontSize+"px",marginRight:"10px",color:s.value.style.fill})},y(s.value.content||"当前无内容"),5)])),_:1}),f(l,{label:"坐标位置"},{default:$((()=>[f(c,{value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e),"show-search":"",placeholder:"请选择标记点",onChange:g},{default:$((()=>[(v(!0),E(S,null,x(A(a),((e,t)=>(v(),p(d,{key:t+","+e[A(o)]+","+e[A(i)]},{default:$((()=>[L(y(e[A(o)]+","+e[A(i)]),1)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1}),f(l,{label:"文本内容"},{default:$((()=>[f(m,{value:s.value.content,"onUpdate:value":t[1]||(t[1]=e=>s.value.content=e),placeholder:"请输入文本内容"},null,8,["value"])])),_:1}),f(F,{justify:"space-between"},{default:$((()=>[f(_,{span:11},{default:$((()=>[f(l,{label:"水平偏移"},{default:$((()=>[f(k,{value:s.value.offsetX,"onUpdate:value":t[2]||(t[2]=e=>s.value.offsetX=e)},null,8,["value"])])),_:1})])),_:1}),f(_,{span:11},{default:$((()=>[f(l,{label:"垂直偏移"},{default:$((()=>[f(k,{value:s.value.offsetY,"onUpdate:value":t[3]||(t[3]=e=>s.value.offsetY=e)},null,8,["value"])])),_:1})])),_:1})])),_:1}),f(l,{label:"文本颜色",style:{position:"relative"}},{default:$((()=>[H("div",Ee,[H("div",{class:"color__display",style:O({backgroundColor:s.value.style.fill}),onClick:t[4]||(t[4]=e=>u.value=!u.value)},null,4)]),f(A(Ae),{class:"color__picker",style:O(u.value?{}:{display:"none"}),theme:"light",color:s.value.style.fill,"sucker-hide":!0,onChangeColor:h},null,8,["style","color"])])),_:1}),f(l,{label:"文本大小"},{default:$((()=>[H("div",Le,[f(k,{value:s.value.style.fontSize,"onUpdate:value":t[5]||(t[5]=e=>s.value.style.fontSize=e)},null,8,["value"])])])),_:1}),H("div",Te,[H("div",null,[f(P,{type:"primary",style:{"margin-right":"10px"},onClick:w},{default:$((()=>[L(y(n.value?"修改标记":"新增标记"),1)])),_:1}),b(f(P,{type:"primary",danger:"",onClick:C},{default:$((()=>[Me])),_:1},512),[[T,n.value]])]),Be])])),_:1},8,["model"])}}}),[["__scopeId","data-v-5282713e"]]);const De=u({setup(e){const t=ae(),l=c("");return _((()=>{t.on("annotation:click",(e=>{l.value=e.gEvent.delegateObject.annotation.cfg.id}))})),h((()=>{t.off("annotation:click",(()=>{}))})),(e,t)=>{const a=Ne;return v(),E("div",null,[f(a,{id:l.value},null,8,["id"])])}}}),Ke=u({setup(e){var t;const l=ae(),a=d((()=>{var e;return null==(e=l.chartInstance)?void 0:e.options})),o=c({smooth:null==(t=a.value)?void 0:t.smooth});return F((()=>o.value),(e=>{l.update(r(r({},a.value),e))}),{deep:!0}),(e,t)=>{const l=R,a=j,i=U;return v(),p(i,{model:o.value},{default:$((()=>[f(a,{label:"曲线平滑"},{default:$((()=>[f(l,{checked:o.value.smooth,"onUpdate:checked":t[0]||(t[0]=e=>o.value.smooth=e)},null,8,["checked"])])),_:1})])),_:1},8,["model"])}}}),We=u({setup(e){const t=ae(),l=d((()=>t.chartType));return(e,t)=>{const a=Ke;return v(),p(Y,null,["Line"===A(l)?(v(),p(a,{key:0})):m("",!0)],1024)}}}),Xe=L("每页 "),Ye=L(" 行"),Ge=u({setup(e){const t=ae(),l=d((()=>{var e;return null==(e=t.chartInstance)?void 0:e.options})),a=c(r({position:"top",offsetX:0,offsetY:0,flipPage:!1,layout:"horizontal",maxRow:"1"},l.value?l.value.legend:{}));F((()=>a.value),(e=>{t.update(n(r({},l.value),{legend:r({},e)}))}),{deep:!0});const o=c({position:[{value:"top",text:"上方"},{value:"top-left",text:"上偏左"},{value:"top-right",text:"上偏右"},{value:"left",text:"左边"},{value:"left-top",text:"左偏上"},{value:"left-bottom",text:"左偏下"},{value:"right",text:"右边"},{value:"right-top",text:"右偏上"},{value:"right-bottom",text:"右偏下"},{value:"bottom",text:"底部"},{value:"bottom-left",text:"底偏左"},{value:"bottom-right",text:"底偏右"}],layout:[{value:"horizontal",text:"水平"},{value:"vertical",text:"垂直"}]});return(e,t)=>{const l=D,i=j,s=G,r=J,n=R,u=I,d=U;return v(),p(d,{model:a.value},{default:$((()=>[f(i,{label:"图例位置"},{default:$((()=>[f(l,{value:a.value.position,"onUpdate:value":t[0]||(t[0]=e=>a.value.position=e),options:o.value.position.map((e=>({value:e.value,label:e.text})))},null,8,["value","options"])])),_:1}),f(i,{label:"图例方向"},{default:$((()=>[f(r,{value:a.value.layout,"onUpdate:value":t[1]||(t[1]=e=>a.value.layout=e)},{default:$((()=>[(v(!0),E(S,null,x(o.value.layout,(e=>(v(),p(s,{key:e.value,value:e.value},{default:$((()=>[L(y(e.text),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),f(i,{label:"是否分页"},{default:$((()=>[f(n,{checked:a.value.flipPage,"onUpdate:checked":t[2]||(t[2]=e=>a.value.flipPage=e),style:{"margin-right":"10px"}},null,8,["checked"]),b(H("div",null,[Xe,f(u,{value:a.value.maxRow,"onUpdate:value":t[3]||(t[3]=e=>a.value.maxRow=e),min:1,max:8},null,8,["value"]),Ye],512),[[T,a.value.flipPage&&"horizontal"===a.value.layout]])])),_:1})])),_:1},8,["model"])}}});const Je=L("x坐标轴"),qe=L("y坐标轴");var Ve=re(u({setup(e){const t=ae(),l=d((()=>{var e;return null==(e=t.chartInstance)?void 0:e.options.xAxis})),a=d((()=>{var e;return null==(e=t.chartInstance)?void 0:e.options.yAxis})),o=c({text:"",position:"start"}),i=c({text:"",position:"start"}),s=c(r({position:"bottom"},l.value)),u=c(r({position:"left"},a.value)),h=c({position:[{value:"top",text:"上方"},{value:"left",text:"左边"},{value:"right",text:"右边"},{value:"bottom",text:"底部"}],titlePosition:[{value:"start",text:"靠前"},{value:"center",text:"居中"},{value:"end",text:"靠后"}]});return F((()=>[s.value,o.value]),(e=>{t.update({xAxis:n(r({},e[0]),{title:e[1]})})}),{deep:!0}),F((()=>[u.value,i.value]),(e=>{t.update({yAxis:n(r({},e[0]),{title:e[1]})})}),{deep:!0}),(e,t)=>{const l=q,a=D,r=j,n=z,d=G,c=J,g=U;return v(),E(S,null,[f(g,{model:s.value},{default:$((()=>[f(l,{orientation:"left"},{default:$((()=>[Je])),_:1}),f(r,{label:"位置"},{default:$((()=>[f(a,{value:s.value.position,"onUpdate:value":t[0]||(t[0]=e=>s.value.position=e),options:h.value.position.map((e=>({value:e.value,label:e.text})))},null,8,["value","options"])])),_:1}),f(r,{label:"标题"},{default:$((()=>[f(n,{value:o.value.text,"onUpdate:value":t[1]||(t[1]=e=>o.value.text=e),placeholder:"请输入x轴标题"},null,8,["value"])])),_:1}),f(r,{label:"标题位置"},{default:$((()=>[f(c,{value:o.value.position,"onUpdate:value":t[2]||(t[2]=e=>o.value.position=e)},{default:$((()=>[(v(!0),E(S,null,x(h.value.titlePosition,(e=>(v(),p(d,{key:e.value,value:e.value},{default:$((()=>[L(y(e.text),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1},8,["model"]),f(l,{orientation:"left"},{default:$((()=>[qe])),_:1}),f(g,{model:u.value},{default:$((()=>[f(r,{label:"位置"},{default:$((()=>[f(a,{value:u.value.position,"onUpdate:value":t[3]||(t[3]=e=>u.value.position=e),options:h.value.position.map((e=>({value:e.value,label:e.text})))},null,8,["value","options"])])),_:1}),f(r,{label:"标题"},{default:$((()=>[f(n,{value:i.value.text,"onUpdate:value":t[4]||(t[4]=e=>i.value.text=e),placeholder:"请输入y轴标题"},null,8,["value"])])),_:1}),f(r,{label:"标题位置"},{default:$((()=>[f(c,{value:i.value.position,"onUpdate:value":t[5]||(t[5]=e=>i.value.position=e)},{default:$((()=>[(v(!0),E(S,null,x(h.value.titlePosition,(e=>(v(),p(d,{key:e.value,value:e.value},{default:$((()=>[L(y(e.text),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])],64)}}}),[["__scopeId","data-v-30df7919"]]);const Qe=u({setup(e){const t=ae(),l=d((()=>t.chartInstance.options)),a=d((()=>Object.keys(t.chartInstance.options.data[0]).length>2)),o=c(r({xField:"",yField:"",seriesField:""},l.value));F((()=>o.value),(e=>{t.update(r({},e))}),{deep:!0});const i=(e,t)=>{let a=Object.keys(l.value.data[0]);return void 0!==e&&e.forEach((e=>{e&&(a=a.filter((t=>t!==e)))})),void 0!==t&&(a=a.filter((e=>typeof l.value.data[0][e]==typeof t))),a.map((e=>({value:e})))};return(e,t)=>{const l=D,s=j,r=U;return v(),p(r,{model:o.value},{default:$((()=>[f(s,{label:"x轴字段"},{default:$((()=>[f(l,{value:o.value.xField,"onUpdate:value":t[0]||(t[0]=e=>o.value.xField=e),placeholder:"请选择字段","allow-clear":!0,options:i([o.value.yField,o.value.seriesField])},null,8,["value","options"])])),_:1}),f(s,{label:"y轴字段"},{default:$((()=>[f(l,{value:o.value.yField,"onUpdate:value":t[1]||(t[1]=e=>o.value.yField=e),placeholder:"请选择字段","allow-clear":!0,options:i([o.value.xField,o.value.seriesField])},null,8,["value","options"])])),_:1}),b(f(s,{label:"分组字段"},{default:$((()=>[f(l,{value:o.value.seriesField,"onUpdate:value":t[2]||(t[2]=e=>o.value.seriesField=e),placeholder:"请选择字段","allow-clear":!0,options:i([o.value.xField,o.value.yField],"string")},null,8,["value","options"])])),_:1},512),[[T,A(a)]])])),_:1},8,["model"])}}}),Ze=u({setup(e){const t=ae(),l=d((()=>{var e;return null==(e=t.chartInstance)?void 0:e.options})),a=c(),o=d((()=>{var e,l;return""!==(null==(e=t.chartInstance)?void 0:e.options.seriesField)&&void 0!==(null==(l=t.chartInstance)?void 0:l.options.seriesField)})),i=e=>{e?(t.update({legend:{position:"top",offsetX:0,offsetY:0,flipPage:!1,layout:"horizontal",maxRow:"1"}}),a.value=""):t.update({legend:!1})};return(e,s)=>{const r=V,n=j,u=Qe,d=Q,c=Ve,h=R,g=Ge,m=Z,y=U;return v(),p(y,null,{default:$((()=>[f(n,{label:"标题"},{default:$((()=>[f(r,{value:A(t).chartTitle,"onUpdate:value":s[0]||(s[0]=e=>A(t).chartTitle=e),placeholder:"请输入标题"},null,8,["value"])])),_:1}),f(m,{activeKey:a.value,"onUpdate:activeKey":s[1]||(s[1]=e=>a.value=e),accordion:""},{default:$((()=>[f(d,{key:"key",header:"数据字段"},{default:$((()=>[f(u)])),_:1}),f(d,{key:"axis",header:"坐标轴"},{default:$((()=>[f(c)])),_:1}),f(d,{key:"legend",header:"图例",disabled:!A(o)},{extra:$((()=>{var e;return[f(h,{checked:!!(null==(e=A(l))?void 0:e.legend)&&A(o),disabled:!A(o),onChange:i},null,8,["checked","disabled"])]})),default:$((()=>[f(g)])),_:1},8,["disabled"])])),_:1},8,["activeKey"])])),_:1})}}});const et=e=>(M("data-v-caec1bec"),e=e(),B(),e),tt={class:"container__top"},lt={style:{width:"86%"}},at=L("请配置您的图表"),ot=et((()=>H("p",null,"改变图表类型将会导致您的配置丢失，是否确认返回？",-1))),it=L("返回"),st=L("下一步"),rt={class:"container"},nt={style:{width:"70%"}},ut={style:{width:"25%",position:"relative"}};var dt=re(u({setup(e){const t=ee(),l=ae(),a=c(""),o=c([{key:"1",header:"配置基本信息"},{key:"2",header:"配置图表信息"},{key:"3",header:"配置图表标记"},{key:"4",header:"配置悬浮提示"},{key:"5",header:"配置图表水印"}]),i=()=>{t.push({path:"/visual/select",query:{status:"back"}})};let s;const n=e=>{var t;e?l.update({tooltip:s}):(s=r({},null==(t=l.chartOptions)?void 0:t.tooltip),l.update({tooltip:!1}),a.value="")};let u;const d=e=>{e?l.changeWaterMark(oe,u||se):(u=l.waterMarkUrl,l.changeWaterMark(!1,void 0),a.value="")},h=async()=>{l.chartType&&l.chartPicId&&l.chartPicId&&l.chartOptions&&l.waterMarkOptions?await ne.updateChartPicConfig({chart_title:l.chartTitle,chart_type:l.chartType,chartpic_id:l.chartPicId,vis_config:JSON.stringify(l.chartOptions),watermark_config:JSON.stringify(l.waterMarkOptions)}):te.error("配置不完整")};return(e,t)=>{const s=q,r=X,u=le,c=ie,g=Ze,m=Q,y=We,b=De,k=R,x=Pe,w=Ue,C=Z;return v(),E(S,null,[H("div",tt,[H("div",lt,[f(s,{class:"text",orientation:"left"},{default:$((()=>[at])),_:1})]),f(u,{placement:"topLeft","ok-text":"确认","cancel-text":"取消",onConfirm:i},{title:$((()=>[ot])),default:$((()=>[f(r,{type:"primary"},{default:$((()=>[it])),_:1})])),_:1}),f(r,{type:"primary",onClick:h},{default:$((()=>[st])),_:1})]),H("div",rt,[H("div",nt,[f(c,{id:"storeChart",url:A(l).waterMarkUrl,name:A(l).chartType,options:A(l).backupChartOptions,title:A(l).chartTitle,"use-store":!0},null,8,["url","name","options","title"])]),H("div",ut,[f(C,{activeKey:a.value,"onUpdate:activeKey":t[0]||(t[0]=e=>a.value=e),accordion:"",onChange:t[1]||(t[1]=e=>a.value=e)},{default:$((()=>{var e;return[(v(),p(m,{key:o.value[0].key,header:o.value[0].header},{default:$((()=>[f(g)])),_:1},8,["header"])),(v(),p(m,{key:o.value[1].key,header:o.value[1].header},{default:$((()=>[f(y)])),_:1},8,["header"])),(v(),p(m,{key:o.value[2].key,header:o.value[2].header},{default:$((()=>[f(b)])),_:1},8,["header"])),(v(),p(m,{key:o.value[3].key,header:o.value[3].header,disabled:!(null==(e=A(l).chartOptions)?void 0:e.tooltip)},{extra:$((()=>{var e;return[f(k,{checked:!!(null==(e=A(l).chartOptions)?void 0:e.tooltip),onChange:n},null,8,["checked"])]})),default:$((()=>[f(x)])),_:1},8,["header","disabled"])),(v(),p(m,{key:o.value[4].key,header:o.value[4].header,disabled:!A(l).waterMarkOptions},{extra:$((()=>[f(k,{checked:!!A(l).waterMarkOptions,onChange:d},null,8,["checked"])])),default:$((()=>[f(w,{ref:"mark"},null,512)])),_:1},8,["header","disabled"]))]})),_:1},8,["activeKey"])])])],64)}}}),[["__scopeId","data-v-caec1bec"]]);export{dt as default};
//# sourceMappingURL=ChartConfig-c078b835.js.map
