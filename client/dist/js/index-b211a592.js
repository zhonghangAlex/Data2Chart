var ze=Object.defineProperty,Ke=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var he=(o,e,t)=>e in o?ze(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,F=(o,e)=>{for(var t in e||(e={}))We.call(e,t)&&he(o,t,e[t]);if(Ae)for(var t of Ae(e))qe.call(e,t)&&he(o,t,e[t]);return o},$=(o,e)=>Ke(o,Ve(e));var B=(o,e,t)=>(he(o,typeof e!="symbol"?e+"":e,t),t);import{r as p,o as C,c as D,a as l,F as L,b as g,d as ie,e as fe,m as N,f as M,g as T,h as Fe,i as G,j as Ge,n as Y,u as E,B as Ee,M as Ye,k as Q,l as we,p as w,w as U,q as S,s as i,L as He,U as xe,t as ke,v as Je,x as X,y as Z,z as x,A as Qe,C as Be,D as Xe,E as Ze,G as Se,H as et,I as tt,J as at,K as ot,N as nt,O as st,P as K,Q as ee,R as lt,T as ut,S as me,V as ve,W as rt,X as De,Y as it,Z as ct,_ as Me,$ as dt,a0 as pt,a1 as _t,a2 as ht,a3 as ft,a4 as mt,a5 as vt}from"./vendor-27fbe909.js";const gt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerpolicy&&(u.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?u.credentials="include":a.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}};gt();var I=(o,e)=>{const t=o.__vccOpts||o;for(const[n,a]of e)t[n]=a;return t};const yt={},bt=g("div",{id:"modal",style:{display:"none"}},null,-1);function Ct(o,e){const t=p("router-view");return C(),D(L,null,[bt,l(t)],64)}var At=I(yt,[["render",Ct]]);const Ft="modulepreload",$e={},Et="/",ge=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${Et}${n}`,n in $e)return;$e[n]=!0;const a=n.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${u}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":Ft,a||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),a)return new Promise((r,d)=>{s.addEventListener("load",r),s.addEventListener("error",d)})})).then(()=>e())},te={getItem(o){return decodeURIComponent(document.cookie.replace(new RegExp(`(?:(?:^|.*;)\\s*${encodeURIComponent(o).replace(/[-.+*]/g,"\\$&")}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1"))||null},setItem(o,e,t=null,n="",a="",u=""){if(!o||/^(?:expires|max\-age|path|domain|secure)$/i.test(o))return!1;let s="";if(t)switch(t.constructor){case Number:s=t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":`; max-age=${t}`;break;case String:s=`; expires=${t}`;break;case Date:s=`; expires=${t.toUTCString()}`;break}return document.cookie=`${encodeURIComponent(o)}=${encodeURIComponent(e)}${s}${a?`; domain=${a}`:""}${n?`; path=${n}`:""}${u?"; secure":""}`,!0},removeItem(o,e,t){return!o||!this.hasItem(o)?!1:(document.cookie=`${encodeURIComponent(o)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${t?`; domain=${t}`:""}${e?`; path=${e}`:""}`,!0)},hasItem(o){return new RegExp(`(?:^|;\\s*)${encodeURIComponent(o).replace(/[-.+*]/g,"\\$&")}\\s*\\=`).test(document.cookie)},keys(){const o=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(let e=0;e<o.length;e++)o[e]=decodeURIComponent(o[e]);return o}},Te=ie({id:"user",state:()=>({username:te.getItem("user")}),actions:{updateStatus(){this.username=te.getItem("user")}}});function Ie(o){const{method:e,url:t,params:n,data:a}=o;return[e,t,JSON.stringify(n),JSON.stringify(a)].join("&")}const se=new Map;function wt(o){const e=Ie(o);o.cancelToken=o.cancelToken||new fe.CancelToken(t=>{se.has(e)||se.set(e,t)})}function xt(o){const e=Ie(o);se.has(e)&&(se.get(e)(e),se.delete(e))}var ce={addPendingRequest:wt,removePendingRequest:xt};const kt={baseUrl:"https://datavis.all1024.com",proxyUrl:"https://datavis.all1024.com"};let de;const Bt=(o,e)=>{const t=fe.create({baseURL:kt.baseUrl,timeout:1e4});t.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";const n=F({repeatRequestCancel:!0,loading:!0,dataFormat:!0,useMsgFromEnd:!0,loadingTitle:"\u52A0\u8F7D\u4E2D",successTitle:"\u8BF7\u6C42\u6210\u529F",errorTitle:"\u8BF7\u6C42\u5931\u8D25"},e);return t.interceptors.request.use(a=>{n.repeatRequestCancel&&ce.removePendingRequest(a),n.loading&&(de=N.loading(n.loadingTitle,0)),n.repeatRequestCancel&&ce.addPendingRequest(a);const u=window.sessionStorage.getItem("token");return u&&(a.headers.token=u),a},a=>Promise.reject(a)),t.interceptors.response.use(a=>{if(n.repeatRequestCancel&&ce.removePendingRequest(a.config),n.loading&&de(),a.data.code===401)sessionStorage.setItem("token","");else if(a.data.code===1)n.loading&&N.error({content:n.useMsgFromEnd&&a.data.message?a.data.message:n.successTitle,duration:2});else{if(typeof a.data=="string")return n.loading&&de(),n.dataFormat?a.data:a;if(a.data.code===0)return n.loading&&N.success({content:n.useMsgFromEnd&&a.data.message?a.data.message:n.successTitle,duration:2}),n.dataFormat?a.data:a}return Promise.reject(a)},a=>(n.repeatRequestCancel&&ce.removePendingRequest(a.config||{}),fe.isCancel(a)?console.warn(`\u5DF2\u53D6\u6D88\u7684\u91CD\u590D\u8BF7\u6C42:${a.message}`):(n.loading&&de(),n.loading&&N.error({content:n.useMsgFromEnd&&a.data.msg?a.data.msg:n.errorTitle,duration:2})),Promise.reject(a))),t(o)},V=(o,e)=>new Promise((t,n)=>{Bt(o,e||{}).then(a=>{t(a)}).catch(a=>{n(a)})}),St=o=>V({url:"/cms/getAllChartPic",method:"GET",params:{project_id:o}},{loading:!1}),Dt=o=>V({url:"/cms/updateChartPicConfig",method:"POST",data:o});var pe={updateChartPicConfig:Dt,getAllChartPic:St};const ye={getImg:o=>V({url:"/login/getcaptcha",method:"get",params:o},{loading:!1}),login:o=>V({url:"/login/validateUsr",method:"post",data:o}),logout:()=>V({url:"/login/logout",method:"post"})},be={updateProjectData:o=>V({url:"/cms/updateProjectData",method:"post",data:o}),updateProjectStatus:o=>V({url:"/cms/updateProjectStatus",method:"post",data:F({first_finished:1,second_finished:-1,third_finished:-1},o)})},Mt=["id"],$t={id:"scrollContent"},Tt={name:"Scroller"},It=M($(F({},Tt),{props:{id:{default:Date.now().toString()},height:null,backgroundColor:{default:"inherit"}},setup(o,{expose:e}){const t=o;let n=null;const a=T(()=>Number.isNaN(Number(t.height))?t.height:`${t.height}px`),u=()=>{const _=document.getElementById(t.id);Ee.use(Ye),n=new Ee(_,{scrollY:!0,disableMouse:!0,disableTouch:!0,preventDefault:!1,mouseWheel:{speed:20,invert:!1,easeTime:300}})},s=(_=300)=>{n.scrollTo(0,0,_)};let r=null,d=null;const h=()=>{const _=document.getElementById("scrollContent"),v=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r=new v(c=>{d&&clearTimeout(d),d=setTimeout(()=>{n.refresh()},300)}),r.observe(_,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0})};return Fe(()=>{r&&(r.disconnect(),r.takeRecords(),r=null)}),G(()=>{u(),h()}),e({scrollToTop:s}),(_,v)=>(C(),D("div",{id:o.id,style:Y({height:E(a),overflow:"hidden",backgroundColor:o.backgroundColor})},[g("div",$t,[Ge(_.$slots,"default")])],12,Mt))}}));const Ot=o=>(X("data-v-8bd98b28"),o=o(),Z(),o),jt=Ot(()=>g("div",{class:"logo"},null,-1)),Pt=x(" \u9879\u76EE "),Nt=x(" \u5F00\u59CB "),Ut=x(" \u9884\u5904\u7406 "),Rt=x(" \u53EF\u89C6\u5316 "),Lt=x(" \u53D1\u5E03 "),zt=x(" \u767B\u51FA "),Kt={key:1},Vt=x(" \u767B\u5F55 "),Wt={class:"scrollContent",style:{padding:"40px 20px"}},qt=x(" Chart \xA92022 Created by BugRight "),Gt=M({setup(o){const e=Q(),t=we(),n=Te(),a=w(),u=w([t.path]),s=window.innerHeight-141,r=({key:_})=>{_.includes(u.value[0])||(u.value=[_],e.push(_),Qe(()=>{a.value.scrollToTop(0)}))},d=()=>{e.push("/login")},h=async()=>{await ye.logout(),te.setItem("user","",null,"/"),n.updateStatus(),e.push("/login")};return U(()=>t.path,_=>{r({key:_})}),G(()=>{}),(_,v)=>{const c=p("a-menu-item"),m=p("a-menu"),y=p("a-avatar"),A=p("a-dropdown"),f=p("a-button"),k=p("a-layout-header"),b=p("router-view"),z=p("a-layout-content"),P=p("a-layout-footer"),J=p("a-layout");return C(),S(J,{class:"layout"},{default:i(()=>[l(k,{class:"header"},{default:i(()=>[jt,E(t).path!=="/login"?(C(),D(L,{key:0},[l(m,{theme:"dark","selected-keys":u.value,"inline-collapsed":!1,mode:"horizontal",onSelect:r},{default:i(()=>[l(c,{key:"/projects"},{default:i(()=>[Pt]),_:1}),l(c,{key:"/start"},{default:i(()=>[Nt]),_:1}),l(c,{key:"/preprocess"},{default:i(()=>[Ut]),_:1}),l(c,{key:"/visual"},{default:i(()=>[Rt]),_:1}),l(c,{key:"/publish"},{default:i(()=>[Lt]),_:1})]),_:1},8,["selected-keys"]),E(n).username?(C(),S(A,{key:0,trigger:"click"},{overlay:i(()=>[l(m,null,{default:i(()=>[l(c,{key:"1",onClick:h},{default:i(()=>[l(E(He)),zt]),_:1})]),_:1})]),default:i(()=>[l(y,{size:"large",style:{cursor:"pointer"}},{default:i(()=>[l(E(xe))]),_:1})]),_:1})):(C(),D("div",Kt,[l(f,{type:"link",onClick:d},{default:i(()=>[Vt]),_:1})]))],64)):ke("",!0)]),_:1}),l(z,{class:"content"},{default:i(()=>[l(It,{ref_key:"scroller",ref:a,height:s,"background-color":"#fff",style:{"border-radius":"16px"}},{default:i(()=>[g("div",Wt,[l(b,null,{default:i(({Component:W})=>[(C(),S(Je(W)))]),_:1})])]),_:1},512)]),_:1}),l(P,{class:"footer"},{default:i(()=>[qt]),_:1})]),_:1})}}});var Yt=I(Gt,[["__scopeId","data-v-8bd98b28"]]);const Ht={components:{UserOutlined:xe},data(){return{submit:{user_name:"",password:""},code:"",randomNum:0}},mounted(){this.refreshImg()},methods:{refreshNum(){let o=0;for(;o===0||o===this.randomNum;)o=Math.random()*10;this.randomNum=o},codeInput(o){te.setItem("captcha_client",o.target.value,null,"/")},async refreshImg(){console.log(1),this.refreshNum();const o=document.getElementById("svgWrapper");o.innerHTML="";const e=await ye.getImg({v:this.randomNum});o.innerHTML=e},async handleSubmit(){const o=Te(),e={user_name:this.$refs.username.stateValue,password:this.$refs.password.input.stateValue},t={user_name:"alexzhli",password:"123456"};let n=null;try{n=await ye.login(e||t)}catch{}switch(o.updateStatus(),n==null?void 0:n.code){case 0:N.success("\u767B\u5F55\u6210\u529F,\u5373\u5C06\u8DF3\u8F6C\u5230\u4E3B\u9875"),setTimeout(()=>this.$router.push({path:"/projects"}),3e3);break;default:this.refreshImg();break}},handleReset(){this.submit={}}}},Jt={class:"login"},Qt=g("h1",{style:{color:"#333","margin-bottom":"40px"}},"\u767B\u5F55",-1),Xt={class:"flex"},Zt=g("div",{id:"svgWrapper"},null,-1),ea=x("\u6362\u4E00\u4E2A"),ta={class:"flex"},aa=g("span",null,null,-1),oa=x("\u767B\u9646"),na=x("\u91CD\u7F6E");function sa(o,e,t,n,a,u){const s=p("UserOutlined"),r=p("a-input"),d=p("a-form-item"),h=p("a-input-password"),_=p("a-button"),v=p("a-form");return C(),D("div",Jt,[Qt,l(v,null,{default:i(()=>[l(d,{label:"\u8D26\u53F7\uFF1A","label-col":{span:4},"wrapper-col":{span:20}},{default:i(()=>[l(r,{ref:"username",placeholder:"\u7528\u6237\u540D"},{prefix:i(()=>[l(s)]),_:1},512)]),_:1}),l(d,{label:"\u5BC6\u7801\uFF1A","label-col":{span:4},"wrapper-col":{span:20}},{default:i(()=>[l(h,{ref:"password",placeholder:"\u5BC6\u7801"},null,512)]),_:1}),l(d,{label:"\u9A8C\u8BC1\u7801\uFF1A","label-col":{span:4},"wrapper-col":{span:20}},{default:i(()=>[g("div",Xt,[l(r,{placeholder:"\u9A8C\u8BC1\u7801",style:{width:"40%"},onChange:u.codeInput},null,8,["onChange"]),Zt,l(_,{type:"link",onClick:u.refreshImg},{default:i(()=>[ea]),_:1},8,["onClick"])])]),_:1}),l(d,{"wrapper-col":{span:14,offset:4}},{default:i(()=>[g("div",ta,[aa,l(_,{type:"primary",style:{"margin-left":"8px"},onClick:u.handleSubmit},{default:i(()=>[oa]),_:1},8,["onClick"]),l(_,{onClick:u.handleReset},{default:i(()=>[na]),_:1},8,["onClick"])])]),_:1})]),_:1})])}var la=I(Ht,[["render",sa]]);const ua={data(){return{submit:{username:"",password:"",confirmPassword:""},createC:"",verCode:"",ruleInline:{username:[{required:!0,trigger:"blur",validator:(o,e,t)=>{new RegExp("[\\u4E00-\\u9FFF]+",0).test(e)?t(new Error("\u4E0D\u80FD\u542B\u6709\u4E2D\u6587\u5B57\u7B26")):e.length>16?t(new Error("\u8D26\u53F7\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7\u5341\u516D\u4F4D")):/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/.test(e)?t():e.length<6?t(new Error("\u8D26\u53F7\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E\u516D\u4F4D")):t(new Error("\u8D26\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"))}}],password:[{required:!0,trigger:"blur",validator:(o,e,t)=>{e===""?t(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801")):e.length<6?t(new Error("\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E")):(this.submit.confirmPassword!==""&&this.$refs.submit.validateField("confirmPassword"),t())}}],confirmPassword:[{required:!0,trigger:"blur",validator:(o,e,t)=>{e===""?t(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801")):e.length<6?t(new Error("\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E")):e!==this.submit.password?t(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u5339\u914D")):t()}}]}}},mounted(){},methods:{handleSubmit(){this.$refs.submit.validate(o=>{if(o){if(this.verCode!==this.createC){this.$Message.warning("\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF");return}delete this.submit.confirmPassword}})}}},ra={class:"login"},ia={class:"login-a-form"},ca=g("h1",{style:{color:"#333","margin-bottom":"40px"}},"Register",-1),da={class:"flex"},pa=g("canvas",{id:"myCanvas"},null,-1),_a=x("\u6362\u4E00\u4E2A"),ha=x("\u6CE8\u518C"),fa=x("\u8FD4\u56DE\u9996\u9875");function ma(o,e,t,n,a,u){const s=p("Icon"),r=p("a-input"),d=p("a-form-item"),h=p("a-button"),_=p("router-link"),v=p("a-form");return C(),D("div",ra,[g("div",ia,[ca,l(v,{ref:"submit","label-width":80,rules:a.ruleInline,model:a.submit},{default:i(()=>[l(d,{label:"\u8D26\u53F7\uFF1A","label-width":100,prop:"username"},{default:i(()=>[l(r,{modelValue:a.submit.username,"onUpdate:modelValue":e[0]||(e[0]=c=>a.submit.username=c),type:"text",placeholder:"\u8BF7\u8F93\u5165 \u4E0D\u80FD\u8D85\u8FC7\u5341\u516D\u4F4D"},{default:i(()=>[l(s,{type:"ios-person-outline"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5BC6\u7801\uFF1A","label-width":100,prop:"password"},{default:i(()=>[l(r,{modelValue:a.submit.password,"onUpdate:modelValue":e[1]||(e[1]=c=>a.submit.password=c),type:"password",password:""},{default:i(()=>[l(s,{type:"ios-lock-outline"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A","label-width":100,prop:"confirmPassword"},{default:i(()=>[l(r,{modelValue:a.submit.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=c=>a.submit.confirmPassword=c),type:"password",password:""},{default:i(()=>[l(s,{type:"ios-lock-outline"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u9A8C\u8BC1\u7801\uFF1A","label-width":100},{default:i(()=>[g("div",da,[l(r,{modelValue:a.verCode,"onUpdate:modelValue":e[3]||(e[3]=c=>a.verCode=c),type:"text",style:{width:"40%","margin-right":"30px"}},{default:i(()=>[l(s,{type:"ios-megaphone-outline"})]),_:1},8,["modelValue"]),pa,l(h,{type:"text",style:{"margin-left":"10px"},onClick:o.createCode},{default:i(()=>[_a]),_:1},8,["onClick"])])]),_:1}),l(d,null,{default:i(()=>[l(h,{type:"primary",onClick:u.handleSubmit},{default:i(()=>[ha]),_:1},8,["onClick"]),l(_,{to:"/",style:{"margin-left":"30px"}},{default:i(()=>[fa]),_:1})]),_:1})]),_:1},8,["rules","model"])])])}var va=I(ua,[["render",ma]]),ga={table:{car:`Model	Base Price (US$ before incentives)	Range in miles
Tesla Model S 100D	94000	335
Tesla Model X 100D	96000	295
Chevrolet Bolt	37495	238
Tesla Model 3	35000	220
Nissan Leaf	30875	150
VW e- Golf	38000	125
BMW i3	44450	114`,museum:`Name	city	Visitors 2018
Mus\xE9e du Louvre	:fr: Paris	10200000
National Museum of China	:cn: Beijing	8610092
Metropolitan Museum of Art	:us: New York City	6953927
Vatican Museums	:it: Vatican City	6756186
Tate Modern	:gb: London	5868562
British Museum	:gb: London	5820000
National Gallery	:gb: London	5735831
National Gallery of Art	:us: Washington D.C.	4404212
State Hermitage Museum	:ru: Saint Petersburg	4220000
Victoria and Albert Museum	:gb: London	3967566
Reina Sof\xEDa	:es: Madrid	3898309
National Palace Museum	:tw: Taipei	3860644
Museo del Prado	:es: Madrid	3672853
Mus\xE9e National d'Art Moderne (Centre Pompidou)	:fr: Paris	3551544
National Museum of Korea	:kr: Seoul	3304453
Mus\xE9e d'Orsay	:fr: Paris	3286224
Somerset House	:gb: London	3143626
Moscow Kremlin Museums	:ru: Moscow	2867295
Tokyo Metropolitan Art Museum	:jp: Tokyo	2787770
Museum of Modern Art	:us: New York City	2774103
The National Art Center Tokyo	:jp: Tokyo	2717565
National Gallery of Victoria	:au: Melbourne	2565474
Tokyo National Museum	:jp: Tokyo	2431073
Smithsonian American Art Museum	:us: Washington D.C.	2304404
National Portrait Gallery	:us: Washington D.C.	2304404
Rijksmuseum	:nl: Amsterdam	2300000
Galleria degli Uffizi	:it: Florence	2230914
National Museum of Scotland	:gb: Edinburgh	2227773
Van Gogh Museum	:nl: Amsterdam	2190000
Tretyakov Gallery	:ru: Moscow	2148538
Shanghai Museum	:cn: Shanghai	2111730
National Folk Museum of Korea	:kr: Seoul	1813626
National Museum of Singapore	:sg: Singapore	1803340
National Gallery Singapore	:sg: Singapore	1803340
Acropolis Museum	:gr: Athens	1774304
Scottish National Gallery	:gb: Edinburgh	1739128
Galleria dell'Accademia	:it: Florence	1719645
Art Institute of Chicago	:us: Chicago	1621861
Royal Academy of Arts	:gb: London	1594140
National Portrait Gallery	:gb: London	1586451
Belvedere	:at: Vienna	1510468
Getty Center [iii]	:us: Los Angeles	1509196
Queensland Gallery of Modern Art	:au: Brisbane	1463448
Australian Centre for the Moving Image	:au: Melbourne	1412630
Centro Cultural Banco do Brasil	:br: Rio de Janeiro	1388664
Royal Ontario Museum	:ca: Toronto	1381712
National Museum of Western Art	:jp: Tokyo	1436941
Museum of European and Mediterranean Civilisations(MUCEM)	:fr: Marseille	1335000
Art Gallery of New South Wales	:au: Sydney	1303789
Pushkin State Museum of Fine Arts	:ru: Moscow	1301832
Tate Britain	:gb: London	1272523
Guggenheim Museum Bilbao	:es: Bilbao	1265756
Mus\xE9e du quai Branly	:fr: Paris	1261817
Museum of Fine Arts	:us: Boston	1249080
Petit Palais	:fr: Paris	1203810
Saatchi Gallery	:gb: London	1200000
National Museum of Modern and Contemporary Art	:kr: Seoul	1185168
National Museum in Krakow	:pl: Krakow	1147140
Centro Cultural Banco do Brasil	:br: Bras\xEDlia	1146995
Louis Vuitton Foundation	:fr: Paris	1142731
Hong Kong Heritage Museum	:hk: Hong Kong	1142235
National Museum of Modern Art	:jp: Tokyo	1129270
Museum of Fine Arts Houston	:us: Houston	1117269
Grand Palais	:fr: Paris	1106868
Dal\xED Theatre and Museum	:es: Figueres	1105169
National Museum of the American Indian	:us: Washington D.C.	1104751
Gyeongju National Museum	:kr: Gyeongju	1102837
Los Angeles County Museum of Art	:us: Los Angeles	1096741
Museum of Contemporary Art Australia	:au: Sydney	1089551
Kelvingrove Art Gallery and Museum	:gb: Glasgow	1054562
Guggenheim Museum	:us: New York City	1031085
Tel Aviv Museum of Art	:il: Tel Aviv	1108323
San Francisco Museum of Modern Art	:us: San Francisco	1014000
Whitney Museum	:us: New York City	1006918
Albertina	:at: Vienna	1004800
Montreal Museum of Fine Arts	:ca: Montreal	1004287
Mus\xE9e de l'Orangerie	:fr: Paris	1004287
Louvre Abu Dhabi	:ae: Abu Dhabi	1000700
National Art Museum of China	:cn: Beijing	1000000`}};const ae=ie("project",{state:()=>({project_id:"",chartData:{},title:"",jsonContent:"",strContent:""}),actions:{updateJsonContent(o){this.jsonContent=o},updateStrContent(o){this.strContent=o},updateTitle(o){this.title=o},updateChartData(o){this.chartData=o},updateProjectId(o){this.project_id=o}}});const ya=M({setup(){const o=ae(),e=n=>{o.updateStrContent(n)};return{readExcel:n=>{let a="";const{files:u}=n.target,s=new FileReader,r=new FileReader;s.onload=h=>{const _=h.target.result,v=Be.exports.read(_,{type:"array"}),c=v.SheetNames[0],m=Be.exports.utils.sheet_to_json(v.Sheets[c]);Object.keys(m[0]).forEach((y,A)=>{A===Object.keys(m[0]).length-1?a+=`${y}
`:a+=`${y}	`}),m.forEach(y=>{Object.values(y).forEach((A,f)=>{f===Object.values(y).length-1?a+=`${A}
`:a+=`${A}	`})}),e(a)},/.xls(|x)/.test(u[0].name)?s.readAsArrayBuffer(u[0]):(r.onload=h=>{const _=new Blob([`\uFEFF${h.target.result}`],{type:"text/csv; charset=utf-8"});s.readAsArrayBuffer(_)},r.readAsText(u[0]))}}}}),ba={href:"javascript:;",class:"file"},Ca=x("\u9009\u62E9\u6587\u4EF6 ");function Aa(o,e,t,n,a,u){return C(),D("div",null,[g("a",ba,[Ca,g("input",{type:"file",accept:".xls,.xlsx,.csv",onChange:e[0]||(e[0]=(...s)=>o.readExcel&&o.readExcel(...s))},null,32)])])}var Fa=I(ya,[["render",Aa]]);const Ea=M({emits:["selected"],setup(o,e){const t=a=>{e.emit("selected",a)},n=w([{value:"default",label:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u6837\u672C\u6570\u636E\u96C6"},{label:"\u8868\u683C",options:[{value:"car",label:"Electric cars 2018"},{value:"museum",label:"The most visited art museums 2018"}]}]);return{value:w(["default"]),handleChange:t,options:n}}});function wa(o,e,t,n,a,u){const s=p("a-select"),r=p("a-space");return C(),S(r,null,{default:i(()=>[l(s,{value:o.value,"onUpdate:value":e[0]||(e[0]=d=>o.value=d),options:o.options,style:{width:"400px"},onChange:o.handleChange},null,8,["value","options","onChange"])]),_:1})}var xa=I(Ea,[["render",wa]]);const ka=M({setup(){const o=w(""),e=ae();return U(e,n=>{o.value=n.strContent}),U(o,n=>{e.updateStrContent(n)}),{value:o,handleTab:()=>{const n=document.getElementsByTagName("textarea")[0],a=n.selectionStart,u=n.selectionEnd;n.value=`${n.value.substring(0,a)}	${n.value.substring(u)}`,n.selectionStart=a+1,n.selectionEnd=u+1}}}});function Ba(o,e,t,n,a,u){const s=p("a-textarea");return C(),S(s,{value:o.value,"onUpdate:value":e[0]||(e[0]=r=>o.value=r),placeholder:"\u8868\u5355\u5185\u5BB9","auto-size":{minRows:20,maxRows:20},onKeydown:Xe(Ze(o.handleTab,["prevent"]),["tab"])},null,8,["value","onKeydown"])}var Sa=I(ka,[["render",Ba],["__scopeId","data-v-1e4dfade"]]);const Da=()=>{const o=Q(),e=we(),t=ae(),{project_id:n}=e.query;let a=n;return a===void 0&&(t.project_id===""?(o.push({path:"/projects"}),N.warning("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u9879\u76EE",2)):a=t.project_id),a};const Ma=M({name:"Start",components:{HandleFile:Fa,SelectSample:xa,TextArea:Sa},setup(){const o=Se({}),e=Q(),t=ae(),n=Da(),a=w(""),u=()=>{let h=t.strContent.split(`
`);h[h.length-1]===""&&(h=h.slice(0,h.length-1));const _=[],v=h[0].split("	").map(m=>m.replaceAll(" ","_"));h.slice(1).forEach(m=>{const y={};m.split("	").forEach((A,f)=>{f>=v.length||(y[v[f]]=A.replaceAll(" ","_"))}),_.push(y)}),a.value=JSON.stringify(_),t.updateJsonContent(a.value)},s=h=>{t.updateStrContent(ga.table[h])},r=async()=>{const h=await be.updateProjectData({project_id:n,data_string:a.value});console.log(h),await be.updateProjectStatus({project_id:n})},d=async()=>{u(),await r(),e.push({path:"/preprocess",query:{project_id:n}})};return $(F({},et(o)),{handleJump:d,handleSelectedData:s})}}),H=o=>(X("data-v-6c6584c4"),o=o(),Z(),o),$a={class:"container"},Ta=H(()=>g("div",{class:"bg"},null,-1)),Ia={class:"select-area"},Oa=H(()=>g("h2",null,"\u60A8\u60F3\u5982\u4F55\u4E0A\u4F20\u6570\u636E\uFF1F",-1)),ja={class:"select-area__item select-area__upload"},Pa=H(()=>g("h3",null,"\u4E0A\u4F20\u672C\u5730\u6587\u4EF6",-1)),Na=H(()=>g("p",null,"\u60A8\u53EF\u4EE5\u4ECE\u8BA1\u7B97\u673A\u4E0A\u4F20 CSV \u6216 Excel \u6587\u4EF6\u3002",-1)),Ua=H(()=>g("div",{class:"select-area__item select-area__copy"},[g("h3",null,"\u590D\u5236\u5E76\u7C98\u8D34\u60A8\u7684\u6570\u636E"),g("p",null,"\u5728 Excel \u4E2D\u9009\u62E9\u6570\u636E\uFF08\u5305\u62EC\u6807\u9898\u884C/\u5217\uFF09\uFF0C\u7136\u540E\u5C06\u5176\u7C98\u8D34\u5230\u53F3\u4FA7\u7684\u6587\u672C\u5B57\u6BB5\u4E2D\u3002")],-1)),Ra={class:"select-area__item select-area__sample"},La=H(()=>g("h3",null,"\u9009\u62E9\u6837\u672C\u96C6",-1)),za=H(()=>g("p",null,"\u5982\u679C\u60A8\u53EA\u60F3\u5C1D\u8BD5\u4F7F\u7528\u672C\u4EA7\u54C1\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u793A\u4F8B\u6570\u636E\u96C6\u7684\u5217\u8868\uFF1A",-1)),Ka={class:"data-area"},Va={class:"data-area__textarea"},Wa={class:"data-area__next-step"},qa=x("\u4E0B\u4E00\u6B65");function Ga(o,e,t,n,a,u){const s=p("HandleFile"),r=p("SelectSample"),d=p("TextArea"),h=p("a-button");return C(),D("div",$a,[Ta,g("div",Ia,[Oa,g("div",ja,[Pa,Na,l(s)]),Ua,g("div",Ra,[La,za,l(r,{onSelected:o.handleSelectedData},null,8,["onSelected"])])]),g("div",Ka,[g("div",Va,[l(d)]),g("div",Wa,[l(h,{type:"primary",onClick:e[0]||(e[0]=_=>o.handleJump())},{default:i(()=>[qa]),_:1})])])])}var Ya=I(Ma,[["render",Ga],["__scopeId","data-v-6c6584c4"]]);const Ha={};function Ja(o,e){const t=p("router-view");return C(),S(t)}var Qa=I(Ha,[["render",Ja]]);const Xa={Area:tt,Line:at,Column:ot,Bar:nt},oe={Area:{name:"Area",text:"\u533A\u57DF\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",smooth:!0,data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}},Line:{name:"Line",text:"\u6298\u7EBF\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",smooth:!0,data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}},Column:{name:"Column",text:"\u67F1\u72B6\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}},Bar:{name:"Bar",text:"\u6761\u5F62\u56FE",defaultConfigs:{width:300,height:200,autoFit:!1,xField:"year",yField:"value",data:[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:11}]}}},Za=(o,e,t)=>new Xa[o](e,t),Oe={width:160,height:160,fontSize:40,color:"rgba(0,0,0,0.11)",content:"\u6C34\u5370",rotate:-20},eo="data:image/png;base64,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";class je{constructor({onEdit:e=!1,defed:t=!1,min:n=null,max:a=null,nn:u=!0,top:s=null,last:r=null,topV:d=null,lastV:h=null}){B(this,"onEdit");B(this,"defed");B(this,"min");B(this,"max");B(this,"nn");B(this,"top");B(this,"last");B(this,"topV");B(this,"lastV");this.onEdit=e,this.defed=t,this.min=n,this.max=a,this.nn=u,this.top=s,this.last=r,this.topV=d,this.lastV=h}}const ne=class{constructor({cid:e,cname:t,cKey:n,type:a="string",data:u,equation:s=null,computed:r=!1}){B(this,"cid");B(this,"computed");B(this,"cname");B(this,"cKey");B(this,"type");B(this,"equation");B(this,"selected");B(this,"dataDef");B(this,"dataSift");B(this,"compareable");B(this,"data");B(this,"errors");B(this,"editable");this.cid=e,this.computed=r,this.cname=t,this.cKey=n,this.type=a.trim().toLowerCase(),this.equation=s,this.selected=!1,this.dataDef=new je({}),this.dataSift=new je({}),this.compareable=!1,this.data=u,this.editable=!0,this.computed?this.refreshComputedValue():(this.checkType(),this.initColDefine(),this.initColSift(),this.errors={haveError:null,typeErr:this.checkType()})}tryType(){return ne.colType.find(t=>this.data.findIndex(a=>!t.checkType(a[this.cKey]))===-1)}formatType(){const e=ne.colType.find(t=>t.typeName===this.type);this.data.forEach(t=>{t[this.cKey]=e.parase(t[this.cKey])})}getColTypeData(){const e=ne.colType.find(n=>n.typeName===this.type.toLowerCase())||ne.colType.slice(-1)[0],t=this.data.map(n=>({v:n[this.cKey],rowId:n.rowId}));return{typeObj:e,colData:t}}checkType(){const{typeObj:e,colData:t}=this.getColTypeData();return this.compareable=e.compareable,!!(t.findIndex(n=>!e.checkType(n.v))+1)}initColDefine(){const{typeObj:e,colData:t}=this.getColTypeData();this.compareable=e.compareable;const n=[...t];n.sort((a,u)=>.5-e.isLeq(a.v,u.v)),this.dataDef.nn=!(n.findIndex(a=>a.v===null||a.v===void 0||a.v==="")+1),this.dataDef.min=this.compareable?n.slice(0,1).shift().v:null,this.dataDef.max=this.compareable?n.slice(-1).shift().v:null,this.dataDef.defed=!1}checkColDefine(){const e={haveError:!1,maxErr:new Set,minErr:new Set,nnErr:new Set,typeErr:this.checkType()},{typeObj:t,colData:n}=this.getColTypeData();return n.forEach(a=>{if(a.v===void 0||a.v===null||a.v===""){e.nnErr.add(a.rowId);return}t.isLeq(a.v,this.dataDef.max)||e.maxErr.add(a.rowId),t.isLeq(this.dataDef.min,a.v)||e.minErr.add(a.rowId)}),e.haveError=e.maxErr.size||e.minErr.size||e.nnErr.size||e.typeErr,this.errors=e,e.haveError}initColSift(){const{typeObj:e,colData:t}=this.getColTypeData();this.compareable=e.compareable;const n=[...t];n.sort((a,u)=>.5-e.isLeq(a.v,u.v)),this.dataSift.nn=!(n.findIndex(a=>a.v===null||a.v===void 0||a.v==="")+1),this.dataSift.min=this.compareable?n.slice(0,1).shift().v:null,this.dataSift.max=this.compareable?n.slice(-1).shift().v:null,this.dataSift.top=this.compareable?100:null,this.dataSift.last=this.compareable?100:null,this.dataSift.defed=!1}filteColSift(){const{typeObj:e,colData:t}=this.getColTypeData(),n=[];return t.forEach(a=>{var u,s;if(this.dataSift.nn&&(a.v===null||a.v===void 0||a.v===""))n.push(a.rowId);else if(this.compareable){const r=[...t];if(r.sort((_,v)=>.5-e.isLeq(_.v,v.v)),!r.length)return;const d=Math.ceil(r.length*this.dataSift.last/100-1),h=r.length-1-Math.ceil(r.length*this.dataSift.last/100-1);this.dataSift.lastV=r.slice(d).length?(u=r.slice(d))==null?void 0:u.shift().v:r.slice(0).shift().v-1,this.dataSift.topV=r.slice(h).length?(s=r.slice(h))==null?void 0:s.shift().v:r.slice(-1).shift().v+1,e.isLeq(a.v,this.dataSift.max)&&e.isLeq(this.dataSift.min,a.v)&&(e.isLeq(a.v,this.dataSift.lastV)||e.isLeq(this.dataSift.topV,a.v))||n.push(a.rowId)}}),n}refreshComputedValue(){!this.computed||this.data.forEach(e=>{let t=this.equation;const n=t.match(/\$[^ $]+\$/g);n&&n.forEach(a=>{Object.prototype.hasOwnProperty.call(e,a.slice(1,-1))&&(t=t.replaceAll(a,Number.parseFloat(e[a.slice(1,-1).trim()]||0)))}),e[this.cKey]=st(t)})}};let le=ne;B(le,"colType",[{typeName:"number",checkType:e=>!Number.isNaN(+e),isLeq:(e,t)=>+e<=+t,parase:e=>+e,compareable:!0},{typeName:"boolean",checkType:e=>["boolean","number"].includes(typeof e)?!0:typeof e=="string"?["true","false"].includes(e.trim().toLowerCase()):!1,isLeq:(e,t)=>(e.trim().toLowerCase()!=="false"&&!!e)<=(t.trim().toLowerCase()!=="false"&&!!t),parase:e=>!!e,compareable:!0},{typeName:"string",checkType:()=>!0,isLeq:()=>!0,parase:e=>String(e),compareable:!1},{typeName:"date",checkType:e=>!Number.isNaN(new Date(e).getTime()),isLeq:(e,t)=>e<=t,parase:e=>new Date(e),compareable:!0}]);const q=class{constructor({getted:e=!0,title:t="",data:n=[],cols:a=[]}){B(this,"geted");B(this,"title");B(this,"data");B(this,"cols");B(this,"rowCounter");this.geted=e,this.title=t,this.data=n,this.rowCounter=1,this.data.forEach(u=>u.rowId=this.rowCounter++),this.cols=a.map(u=>(q.colCounter=Math.max(++q.colCounter,u.cid),new le(Object.assign(u,{data:n}))))}bind({getted:e=!0,title:t="",data:n=[],cols:a=[]}){this.geted=e,this.title=t,this.data=n,this.data.forEach(u=>u.rowId=this.rowCounter++),this.cols=a.map(u=>(q.colCounter=Math.max(++q.colCounter,u.cid),new le(Object.assign(u,{data:n}))))}mappedTable(){const e=[];this.cols.forEach(a=>{e.push(...a.filteColSift())});const t=new Set(e);return this.data.filter(a=>!t.has(a.rowId))}refreshComputedTable(){this.cols.forEach(e=>{e.computed&&e.refreshComputedValue()})}addComputedValue({cid:e=null,equation:t,cname:n,type:a="number"}){++q.colCounter,e=e||q.colCounter;const u=n.replaceAll(/[ $]/g,"_");this.data.forEach(r=>{r[u]=null});const s=new le({cid:e,cname:n.replaceAll(/[ $]/g,"_"),type:a,data:this.data,cKey:u,equation:t,computed:!0});this.cols.push(s)}exportTable(e,t){const n={title:this.title,data:[],cols:[]};n.cols=this.cols.filter(u=>e?u.selected||u.computed:!0),n.cols=n.cols.map(u=>({cid:u.cid,cKey:u.cKey,cname:u.cname,type:u.type}));let a=t?this.mappedTable():this.data;return a=JSON.parse(JSON.stringify(a)),a.forEach(u=>{const s={};let r=0;n.cols.forEach(d=>{Object.prototype.hasOwnProperty.call(u,d.cKey)&&(s[d.cKey]=u[d.cKey],r++)}),delete u._X_ID,delete u.rowId,r&&n.data.push(s)}),n}};let ue=q;B(ue,"colType",["string","number","boolean","date"]),B(ue,"colCounter",0);function Pe(o){const e=[];let t=0;o.length>0&&e.push(...Object.keys(o[0]).map(a=>(t+=1,{cid:t,cKey:a,cname:a,type:"string"})));const n=new ue({title:"",data:o,cols:e});return n.cols.forEach(a=>{const{typeName:u}=a.tryType();a.type=u,a.formatType()}),n.exportTable(!1,!1)}function to(o){return o.map(t=>{const n={};return Object.keys(t).forEach(a=>{n[a.replaceAll(/[ $]/g,"_")]=t[a]}),n})}const R=ie("visual",{state:()=>({projectData:void 0,chartPicId:void 0,chartInstance:void 0,chartType:void 0,chartTitle:"",tableData:void 0,backupChartOptions:void 0,waterMarkUrl:void 0,waterMarkOptions:!1}),getters:{chartOptions:o=>{var e;return(e=o.chartInstance)==null?void 0:e.options}},actions:{initChart({chartpic_id:o,chart_type:e,chart_title:t,vis_config:n,watermark_config:a}){this.chartPicId=o,this.chartType=e,this.chartTitle=t;const u=JSON.parse(n);this.tableData=Pe(u.data||[]),this.backupChartOptions=u,this.waterMarkOptions=JSON.parse(a),console.log(this.waterMarkOptions)},backupProjectData(o){this.projectData=o},render(){var o;(o=this.chartInstance)==null||o.render()},update(o){var e;(e=this.chartInstance)==null||e.update(o)},changeData(o){var e;(e=this.chartInstance)==null||e.changeData(o)},changeSize(o,e){var t;(t=this.chartInstance)==null||t.changeSize(o,e)},destroy(){var o;(o=this.chartInstance)==null||o.destroy(),this.chartInstance=void 0,this.chartType=void 0,this.chartTitle="",this.waterMarkOptions=!1,this.waterMarkUrl=void 0},on(o,e,t){var n;(n=this.chartInstance)==null||n.on(o,e,t)},off(o,e){var t;(t=this.chartInstance)==null||t.off(o,e)},addAnnotations(o){var e;(e=this.chartInstance)==null||e.addAnnotations(o)},removeAnnotations(o){var e;(e=this.chartInstance)==null||e.removeAnnotations(o)},setState(o,e,t){var n;(n=this.chartInstance)==null||n.setState(o,e,t)},getStates(){var o;return(o=this.chartInstance)==null?void 0:o.getStates()},bindChartToStore(o){this.chartInstance=o},changeWaterMark(o,e){this.waterMarkOptions=o,this.waterMarkUrl=e}}}),ao={title:"demo.csv",data:[{name:"Karry1",age:13,height:1.57},{name:"Karry2",age:14,height:1.76},{name:"Karry3",age:15,height:1.78},{name:"Karry4",age:16,height:1.2}],cols:[{cid:1,cKey:"name",cname:"\u59D3\u540D",type:"string"},{cid:2,cKey:"age",cname:"\u5E74\u9F84",type:"number"},{cid:3,cKey:"height",cname:"\u8EAB\u9AD8",type:"number"}]},oo=ie({id:"process",state:()=>({table:new ue({getted:!1}),tableExport:ao}),actions:{getTable(o){return V({url:"/cms/getProjectData",method:"get",params:{t:Date.now(),project_id:o}}).then(e=>{if(e.code)return this.table.getted=!1,!1;{let t=JSON.parse(e.result.data);const n=t.cols;n||(t=Pe(to(t)),console.log(t)),this.table.bind({title:t.title||"\u672A\u547D\u540D\u8868\u683C",data:t.data||[],cols:t.cols}),n||(this.tableExport=this.table.exportTable(!1,!1),this.putTable(this.project_id))}return!0},()=>(this.table.getted=!1,!1))},putTable(o){return V({url:"/cms/updateProjectData",method:"post",data:{project_id:o,data_string:JSON.stringify(this.tableExport)}})}}});const no={class:"title"},so=["id"],lo={key:1,class:"status__false"},uo={name:"ChartDisplay"},ro=M($(F({},uo),{props:{id:{default:Date.now().toString()},name:{default:"Area"},title:{default:""},url:{type:[String,Boolean],default:""},options:{default:()=>oe.Area.defaultConfigs},useStore:{type:Boolean,default:!1}},setup(o){const e=o,t=R(),n=w([e.options.width||400,e.options.height||400]);U(()=>{var s,r;return[(s=t.chartOptions)==null?void 0:s.width,(r=t.chartOptions)==null?void 0:r.height]},s=>{n.value=s});const a=w(!0),u=()=>{if(!e.name||!e.id||!e.options){a.value=!1;return}e.useStore&&t.chartInstance&&t.destroy();const s=Za(e.name,e.id,e.options);e.useStore&&t.bindChartToStore(s),s.render()};return G(()=>{u()}),(s,r)=>a.value?(C(),D("div",{key:0,class:"root",style:Y({backgroundImage:"url("+o.url+")"})},[g("div",no,K(o.title),1),g("div",{id:o.id,class:"chart"},null,8,so)],4)):(C(),D("div",lo,"\u56FE\u8868\u672A\u5B9A\u4E49"))}}));var Ne=I(ro,[["__scopeId","data-v-28f9277b"]]);const io={class:"component__grid"},co=["onClick"],po={class:"component__text"},_o={name:"ChartGrid"},ho=M($(F({},_o),{props:{name:null},emits:["update:name"],setup(o,{emit:e}){const t=o,n=w(oe),a=w(t.name||"Area"),u=w(a.value),s=r=>{u.value=r,e("update:name",r)};return(r,d)=>(C(),D("div",io,[(C(!0),D(L,null,ee(n.value,(h,_)=>(C(),D("div",{key:_,class:lt(u.value===_?"component__item active":"component__item"),onClick:v=>s(_)},[l(Ne,{id:_+new Date().toString(),url:!1,name:_,options:h.defaultConfigs,"water-mark-options":!1,"use-store":!1},null,8,["id","name","options"]),g("p",po,K(h.text),1)],10,co))),128))]))}}));var fo=I(ho,[["__scopeId","data-v-12309911"]]);const mo=o=>(X("data-v-d90e7728"),o=o(),Z(),o),vo={style:{position:"relative","min-height":"660px"}},go=x("\u8BF7\u9009\u62E9\u60A8\u9700\u8981\u7684\u7C7B\u578B"),yo={class:"btn"},bo=mo(()=>g("p",null,"\u60A8\u5728\u4E4B\u524D\u5DF2\u914D\u7F6E\u8FC7\u8BE5\u56FE\u8868\uFF0C\u662F\u5426\u57FA\u4E8E\u4E4B\u524D\u7684\u914D\u7F6E\u4FEE\u6539\uFF1F",-1)),Co=x("> "),Ao=M({setup(o){const e=Q(),t=R(),n=oo(),a=ae(),u=w("Area"),s=T(()=>oe[u.value].text),r=T(()=>t.projectData),d=w(!1),h=()=>{t.initChart(r.value),e.push("/visual/config")},_=async(c,m)=>{const y=Object.assign(oe[u.value].defaultConfigs,{xField:m.x,yField:m.y,data:m.data});console.log(c,m,y);const A=!1;return await pe.updateChartPicConfig({chart_title:"",chart_type:u.value,chartpic_id:c,vis_config:JSON.stringify(y),watermark_config:JSON.stringify(A)})},v=async()=>{try{let c;if(e.currentRoute.value.query.status==="back"){const{xField:y,yField:A,data:f}=JSON.parse(t.projectData.vis_config);c={x:y,y:A,data:f}}else{if(!n.tableExport){N.error("\u6570\u636E\u672A\u5B9A\u4E49");return}const{x:y,y:A,data:f}=n.tableExport;c={x:y,y:A,data:f}}const m=await _(r.value.chartpic_id,c);t.initChart(m.result),e.push("/visual/config")}catch{}};return G(async()=>{if(e.currentRoute.value.query.status!=="back"){const{project_id:c}=a;if(c!==""&&c){const{result:{data:[m]}}=await pe.getAllChartPic(c);t.backupProjectData(m),m.chart_type!==null&&Object.keys(oe).includes(m.chart_type)&&(d.value=!0)}else N.warn("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u9879\u76EE",1),N.loading("\u6B63\u5728\u8FD4\u56DE\u9996\u9875",1,()=>{e.replace("/projects")})}}),(c,m)=>{const y=p("a-divider"),A=p("a-button"),f=p("a-modal");return C(),D(L,null,[g("div",vo,[l(y,{class:"text",orientation:"left"},{default:i(()=>[go]),_:1}),l(fo,{name:u.value,"onUpdate:name":m[0]||(m[0]=k=>u.value=k)},null,8,["name"]),g("div",yo,[l(A,{type:"primary",disabled:!E(s),onClick:v},{default:i(()=>[x("\u5DF2\u9009\u62E9\uFF1A"+K(E(s)||"\u672A\u9009\u62E9"),1)]),_:1},8,["disabled"])])]),(C(),S(ut,{to:"#modal"},[l(f,{title:"\u6CE8\u610F",visible:d.value,"ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onOk:h,onCancel:m[1]||(m[1]=k=>d.value=!1)},{default:i(()=>[bo]),_:1},8,["visible"]),Co]))],64)}}});var Fo=I(Ao,[["__scopeId","data-v-d90e7728"]]);const Eo={name:"KeyConfig"},wo=M($(F({},Eo),{setup(o){const e=R(),t=T(()=>{var s;return(s=e.chartInstance)==null?void 0:s.options}),n=T(()=>t.value&&t.value.data.length>0?Object.keys(t.value.data[0]).length>2:!1),a=w(F({xField:"",yField:"",seriesField:""},t.value));U(()=>a.value,s=>{e.update(F({},s))},{deep:!0});const u=(s,r)=>{var h;if(!((h=t.value)==null?void 0:h.data[0]))return[];let d=Object.keys(t.value.data[0]);return typeof s!="undefined"&&s.forEach(_=>{_&&(d=d.filter(v=>v!==_))}),typeof r!="undefined"&&(d=d.filter(_=>{var v;return typeof((v=t.value)==null?void 0:v.data[0][_])==typeof r})),d.map(_=>({value:_}))};return(s,r)=>{const d=p("a-select"),h=p("a-form-item"),_=p("a-form");return C(),S(_,{model:a.value},{default:i(()=>[l(h,{label:"x\u8F74\u5B57\u6BB5"},{default:i(()=>[l(d,{value:a.value.xField,"onUpdate:value":r[0]||(r[0]=v=>a.value.xField=v),placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5","allow-clear":!0,options:u([a.value.yField,a.value.seriesField])},null,8,["value","options"])]),_:1}),l(h,{label:"y\u8F74\u5B57\u6BB5"},{default:i(()=>[l(d,{value:a.value.yField,"onUpdate:value":r[1]||(r[1]=v=>a.value.yField=v),placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5","allow-clear":!0,options:u([a.value.xField,a.value.seriesField])},null,8,["value","options"])]),_:1}),me(l(h,{label:"\u5206\u7EC4\u5B57\u6BB5"},{default:i(()=>[l(d,{value:a.value.seriesField,"onUpdate:value":r[2]||(r[2]=v=>a.value.seriesField=v),placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5","allow-clear":!0,options:u([a.value.xField,a.value.yField],"string")},null,8,["value","options"])]),_:1},512),[[ve,E(n)]])]),_:1},8,["model"])}}}));const xo=x("x\u5750\u6807\u8F74"),ko=x("y\u5750\u6807\u8F74"),Bo={name:"AxisConfig"},So=M($(F({},Bo),{setup(o){const e=R(),t=T(()=>{var h;return(h=e.chartInstance)==null?void 0:h.options.xAxis}),n=T(()=>{var h;return(h=e.chartInstance)==null?void 0:h.options.yAxis}),a=w({text:"",position:"start"}),u=w({text:"",position:"start"}),s=w(F({position:"bottom"},t.value)),r=w(F({position:"left"},n.value)),d=w({position:[{value:"top",text:"\u4E0A\u65B9"},{value:"left",text:"\u5DE6\u8FB9"},{value:"right",text:"\u53F3\u8FB9"},{value:"bottom",text:"\u5E95\u90E8"}],titlePosition:[{value:"start",text:"\u9760\u524D"},{value:"center",text:"\u5C45\u4E2D"},{value:"end",text:"\u9760\u540E"}]});return U(()=>[s.value,a.value],h=>{e.update({xAxis:$(F({},h[0]),{title:h[1]})})},{deep:!0}),U(()=>[r.value,u.value],h=>{e.update({yAxis:$(F({},h[0]),{title:h[1]})})},{deep:!0}),(h,_)=>{const v=p("a-divider"),c=p("a-select"),m=p("a-form-item"),y=p("a-input"),A=p("a-radio"),f=p("a-radio-group"),k=p("a-form");return C(),D(L,null,[l(k,{model:s.value},{default:i(()=>[l(v,{orientation:"left"},{default:i(()=>[xo]),_:1}),l(m,{label:"\u4F4D\u7F6E"},{default:i(()=>[l(c,{value:s.value.position,"onUpdate:value":_[0]||(_[0]=b=>s.value.position=b),options:d.value.position.map(b=>({value:b.value,label:b.text}))},null,8,["value","options"])]),_:1}),l(m,{label:"\u6807\u9898"},{default:i(()=>[l(y,{value:a.value.text,"onUpdate:value":_[1]||(_[1]=b=>a.value.text=b),placeholder:"\u8BF7\u8F93\u5165x\u8F74\u6807\u9898"},null,8,["value"])]),_:1}),l(m,{label:"\u6807\u9898\u4F4D\u7F6E"},{default:i(()=>[l(f,{value:a.value.position,"onUpdate:value":_[2]||(_[2]=b=>a.value.position=b)},{default:i(()=>[(C(!0),D(L,null,ee(d.value.titlePosition,b=>(C(),S(A,{key:b.value,value:b.value},{default:i(()=>[x(K(b.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),l(v,{orientation:"left"},{default:i(()=>[ko]),_:1}),l(k,{model:r.value},{default:i(()=>[l(m,{label:"\u4F4D\u7F6E"},{default:i(()=>[l(c,{value:r.value.position,"onUpdate:value":_[3]||(_[3]=b=>r.value.position=b),options:d.value.position.map(b=>({value:b.value,label:b.text}))},null,8,["value","options"])]),_:1}),l(m,{label:"\u6807\u9898"},{default:i(()=>[l(y,{value:u.value.text,"onUpdate:value":_[4]||(_[4]=b=>u.value.text=b),placeholder:"\u8BF7\u8F93\u5165y\u8F74\u6807\u9898"},null,8,["value"])]),_:1}),l(m,{label:"\u6807\u9898\u4F4D\u7F6E"},{default:i(()=>[l(f,{value:u.value.position,"onUpdate:value":_[5]||(_[5]=b=>u.value.position=b)},{default:i(()=>[(C(!0),D(L,null,ee(d.value.titlePosition,b=>(C(),S(A,{key:b.value,value:b.value},{default:i(()=>[x(K(b.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}));var Do=I(So,[["__scopeId","data-v-28ca533e"]]);const Mo=x("\u6BCF\u9875 "),$o=x(" \u884C"),To={name:"LegendConfig"},Io=M($(F({},To),{setup(o){const e=R(),t=T(()=>{var u;return(u=e.chartInstance)==null?void 0:u.options}),n=w(F({position:"top",offsetX:0,offsetY:0,flipPage:!1,layout:"horizontal",maxRow:"1"},t.value?t.value.legend:{}));U(()=>n.value,u=>{e.update($(F({},t.value),{legend:F({},u)}))},{deep:!0});const a=w({position:[{value:"top",text:"\u4E0A\u65B9"},{value:"top-left",text:"\u4E0A\u504F\u5DE6"},{value:"top-right",text:"\u4E0A\u504F\u53F3"},{value:"left",text:"\u5DE6\u8FB9"},{value:"left-top",text:"\u5DE6\u504F\u4E0A"},{value:"left-bottom",text:"\u5DE6\u504F\u4E0B"},{value:"right",text:"\u53F3\u8FB9"},{value:"right-top",text:"\u53F3\u504F\u4E0A"},{value:"right-bottom",text:"\u53F3\u504F\u4E0B"},{value:"bottom",text:"\u5E95\u90E8"},{value:"bottom-left",text:"\u5E95\u504F\u5DE6"},{value:"bottom-right",text:"\u5E95\u504F\u53F3"}],layout:[{value:"horizontal",text:"\u6C34\u5E73"},{value:"vertical",text:"\u5782\u76F4"}]});return(u,s)=>{const r=p("a-select"),d=p("a-form-item"),h=p("a-radio"),_=p("a-radio-group"),v=p("a-switch"),c=p("a-input-number"),m=p("a-form");return C(),S(m,{model:n.value},{default:i(()=>[l(d,{label:"\u56FE\u4F8B\u4F4D\u7F6E"},{default:i(()=>[l(r,{value:n.value.position,"onUpdate:value":s[0]||(s[0]=y=>n.value.position=y),options:a.value.position.map(y=>({value:y.value,label:y.text}))},null,8,["value","options"])]),_:1}),l(d,{label:"\u56FE\u4F8B\u65B9\u5411"},{default:i(()=>[l(_,{value:n.value.layout,"onUpdate:value":s[1]||(s[1]=y=>n.value.layout=y)},{default:i(()=>[(C(!0),D(L,null,ee(a.value.layout,y=>(C(),S(h,{key:y.value,value:y.value},{default:i(()=>[x(K(y.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),l(d,{label:"\u662F\u5426\u5206\u9875"},{default:i(()=>[l(v,{checked:n.value.flipPage,"onUpdate:checked":s[2]||(s[2]=y=>n.value.flipPage=y),style:{"margin-right":"10px"}},null,8,["checked"]),me(g("div",null,[Mo,l(c,{value:n.value.maxRow,"onUpdate:value":s[3]||(s[3]=y=>n.value.maxRow=y),min:1,max:8},null,8,["value"]),$o],512),[[ve,n.value.flipPage&&n.value.layout==="horizontal"]])]),_:1})]),_:1},8,["model"])}}})),Oo={name:"BaseConfig"},jo=M($(F({},Oo),{setup(o){const e=R(),t=T(()=>{var r;return(r=e.chartInstance)==null?void 0:r.options}),n=w(F({width:400,height:300,autoFit:!1},t.value));U(()=>[n.value.width,n.value.height],r=>{e.update({width:r[0],height:r[1]}),e.changeSize(r[0],r[1])});const a=w(),u=T(()=>{var r,d;return((r=e.chartInstance)==null?void 0:r.options.seriesField)!==""&&((d=e.chartInstance)==null?void 0:d.options.seriesField)!==void 0}),s=r=>{r?(e.update({legend:{position:"top",offsetX:0,offsetY:0,flipPage:!1,layout:"horizontal",maxRow:"1"}}),a.value=""):e.update({legend:!1})};return(r,d)=>{const h=p("a-textarea"),_=p("a-form-item"),v=p("a-input-number"),c=p("a-collapse-panel"),m=p("a-switch"),y=p("a-collapse"),A=p("a-form");return C(),S(A,null,{default:i(()=>[l(_,{label:"\u6807\u9898"},{default:i(()=>[l(h,{value:E(e).chartTitle,"onUpdate:value":d[0]||(d[0]=f=>E(e).chartTitle=f),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["value"])]),_:1}),l(_,{label:"\u56FE\u8868\u5BBD\u5EA6"},{default:i(()=>[l(v,{value:n.value.width,"onUpdate:value":d[1]||(d[1]=f=>n.value.width=f),valueModifiers:{lazy:!0}},null,8,["value"])]),_:1}),l(_,{label:"\u56FE\u8868\u9AD8\u5EA6"},{default:i(()=>[l(v,{value:n.value.height,"onUpdate:value":d[2]||(d[2]=f=>n.value.height=f),valueModifiers:{lazy:!0}},null,8,["value"])]),_:1}),l(y,{activeKey:a.value,"onUpdate:activeKey":d[3]||(d[3]=f=>a.value=f),accordion:""},{default:i(()=>[l(c,{key:"key",header:"\u6570\u636E\u5B57\u6BB5"},{default:i(()=>[l(wo)]),_:1}),l(c,{key:"axis",header:"\u5750\u6807\u8F74"},{default:i(()=>[l(Do)]),_:1}),l(c,{key:"legend",header:"\u56FE\u4F8B",disabled:!E(u)},{extra:i(()=>{var f;return[l(m,{checked:!!((f=E(t))==null?void 0:f.legend)&&E(u),disabled:!E(u),onChange:s},null,8,["checked","disabled"])]}),default:i(()=>[l(Io)]),_:1},8,["disabled"])]),_:1},8,["activeKey"])]),_:1})}}})),Po={name:"LineConfig"},No=M($(F({},Po),{setup(o){var a;const e=R(),t=T(()=>{var u;return(u=e.chartInstance)==null?void 0:u.options}),n=w({smooth:(a=t.value)==null?void 0:a.smooth});return U(()=>n.value,u=>{e.update(F(F({},t.value),u))},{deep:!0}),(u,s)=>{const r=p("a-switch"),d=p("a-form-item"),h=p("a-form");return C(),S(h,{model:n.value},{default:i(()=>[l(d,{label:"\u66F2\u7EBF\u5E73\u6ED1"},{default:i(()=>[l(r,{checked:n.value.smooth,"onUpdate:checked":s[0]||(s[0]=_=>n.value.smooth=_)},null,8,["checked"])]),_:1})]),_:1},8,["model"])}}})),Uo={name:"OtherConfig"},Ro=M($(F({},Uo),{setup(o){const e=R(),t=T(()=>e.chartType);return(n,a)=>(C(),S(rt,null,[E(t)==="Line"?(C(),S(No,{key:0})):ke("",!0)],1024))}})),Lo={name:"TooltipConfig"},zo=M($(F({},Lo),{setup(o){var a;const e=R(),t=T(()=>{var u;return Object.keys(((u=e.chartOptions)==null?void 0:u.data[0])||{})}),n=w(F({fields:[],showTitle:!0,shared:!0,showCrosshairs:!0},((a=e.chartOptions)==null?void 0:a.tooltip)?e.chartOptions.tooltip:{}));return U(()=>n.value,u=>{e.update({tooltip:u})},{deep:!0}),(u,s)=>{const r=p("a-checkbox-group"),d=p("a-form-item"),h=p("a-switch"),_=p("a-form");return C(),S(_,{model:n.value},{default:i(()=>[l(d,{label:"\u81EA\u5B9A\u4E49\u5B57\u6BB5"},{default:i(()=>[l(r,{value:n.value.fields,"onUpdate:value":s[0]||(s[0]=v=>n.value.fields=v),name:"group",options:E(t)},null,8,["value","options"])]),_:1}),l(d,{label:"\u663E\u793A\u6807\u9898"},{default:i(()=>[l(h,{checked:n.value.showTitle,"onUpdate:checked":s[1]||(s[1]=v=>n.value.showTitle=v)},null,8,["checked"])]),_:1}),l(d,{label:"\u5C55\u793A\u76F8\u90BB\u6570\u636E"},{default:i(()=>[l(h,{checked:n.value.shared,"onUpdate:checked":s[2]||(s[2]=v=>n.value.shared=v)},null,8,["checked"])]),_:1}),l(d,{label:"\u663E\u793A\u8F85\u52A9\u7EBF"},{default:i(()=>[l(h,{checked:n.value.showCrosshairs,"onUpdate:checked":s[3]||(s[3]=v=>n.value.showCrosshairs=v)},null,8,["checked"])]),_:1})]),_:1},8,["model"])}}}));const Ko=o=>(X("data-v-d6e89876"),o=o(),Z(),o),Vo={style:{display:"flex"}},Wo={style:{display:"flex","align-items":"center"}},qo={class:"btn__list"},Go=x("\u5220\u9664\u6807\u8BB0"),Yo=Ko(()=>g("div",{style:{color:"rgba(0, 0, 0, 0.3)","margin-top":"10px"}},"Tip: \u70B9\u51FB\u56FE\u8868\u4E2D\u6807\u6CE8\u53EF\u4EE5\u8FDB\u884C\u4FEE\u6539\u54E6\uFF01",-1)),Ho={name:"TextAnnotationConfig"},Jo=M($(F({},Ho),{props:{id:null},setup(o){const e=o,t=R(),n=T(()=>{var f;return(f=t.chartInstance)==null?void 0:f.options.data}),a=T(()=>{var f;return((f=t.chartInstance)==null?void 0:f.options.xField)||""}),u=T(()=>{var f;return((f=t.chartInstance)==null?void 0:f.options.yField)||""}),s=w({type:"text",content:"",offsetX:0,offsetY:0,style:{fill:"#000000",fontSize:14},id:Date.now().toString(),position:["",""]}),r=w(""),d=w(!1),h=w(!1),_=({rgba:{r:f,g:k,b,a:z}})=>{s.value.style.fill=`rgba(${f},${k},${b},${z})`},v=f=>{s.value.position=f.split(","),s.value.position.shift()};U(()=>e.id,f=>{var k;if((k=t.chartInstance)==null?void 0:k.chart.annotation){const{option:b}=t.chartInstance.chart.annotation();if(b){const z=b.find(P=>P.id===f);r.value=z.position.join(","),Object.assign(s.value,z),d.value=!0}}});const c=()=>{d.value=!1,r.value="",s.value={type:"text",content:"",offsetX:0,offsetY:0,style:{fill:"#000000",fontSize:14},id:Date.now().toString(),position:["",""]}},m=()=>{var f;if((f=t.chartInstance)==null?void 0:f.chart.annotation){const{option:k}=t.chartInstance.chart.annotation();t.update({annotations:k})}},y=()=>{s.value.position.some(f=>f==="")||s.value.content===""||(d.value&&s.value.id&&(t.removeAnnotations([{id:s.value.id}]),s.value.id=Date.now().toString()),t.addAnnotations([s.value]),m(),c())},A=()=>{d.value&&s.value.id&&(t.removeAnnotations([{id:s.value.id}]),m(),c())};return(f,k)=>{const b=p("a-form-item"),z=p("a-select-option"),P=p("a-select"),J=p("a-input"),W=p("a-input-number"),O=p("a-col"),re=p("a-row"),Ce=p("a-button"),Re=p("a-form");return C(),S(Re,{model:s.value},{default:i(()=>[l(b,{label:"\u6548\u679C\u5C55\u793A"},{default:i(()=>[g("div",{class:"annotation__display",style:Y({height:s.value.style.fontSize+"px",lineHeight:s.value.style.fontSize+"px",fontSize:s.value.style.fontSize+"px",marginRight:"10px",color:s.value.style.fill})},K(s.value.content||"\u5F53\u524D\u65E0\u5185\u5BB9"),5)]),_:1}),l(b,{label:"\u5750\u6807\u4F4D\u7F6E"},{default:i(()=>[l(P,{value:r.value,"onUpdate:value":k[0]||(k[0]=j=>r.value=j),"show-search":"",placeholder:"\u8BF7\u9009\u62E9\u6807\u8BB0\u70B9",onChange:v},{default:i(()=>[(C(!0),D(L,null,ee(E(n),(j,Le)=>(C(),S(z,{key:Le+","+j[E(a)]+","+j[E(u)]},{default:i(()=>[x(K(j[E(a)]+","+j[E(u)]),1)]),_:2},1024))),128))]),_:1},8,["value"])]),_:1}),l(b,{label:"\u6587\u672C\u5185\u5BB9"},{default:i(()=>[l(J,{value:s.value.content,"onUpdate:value":k[1]||(k[1]=j=>s.value.content=j),placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9"},null,8,["value"])]),_:1}),l(re,{justify:"space-between"},{default:i(()=>[l(O,{span:11},{default:i(()=>[l(b,{label:"\u6C34\u5E73\u504F\u79FB"},{default:i(()=>[l(W,{value:s.value.offsetX,"onUpdate:value":k[2]||(k[2]=j=>s.value.offsetX=j)},null,8,["value"])]),_:1})]),_:1}),l(O,{span:11},{default:i(()=>[l(b,{label:"\u5782\u76F4\u504F\u79FB"},{default:i(()=>[l(W,{value:s.value.offsetY,"onUpdate:value":k[3]||(k[3]=j=>s.value.offsetY=j)},null,8,["value"])]),_:1})]),_:1})]),_:1}),l(b,{label:"\u6587\u672C\u989C\u8272",style:{position:"relative"}},{default:i(()=>[g("div",Vo,[g("div",{class:"color__display",style:Y({backgroundColor:s.value.style.fill}),onClick:k[4]||(k[4]=j=>h.value=!h.value)},null,4)]),l(E(De),{class:"color__picker",style:Y(h.value?{}:{display:"none"}),theme:"light",color:s.value.style.fill,"sucker-hide":!0,onChangeColor:_},null,8,["style","color"])]),_:1}),l(b,{label:"\u6587\u672C\u5927\u5C0F"},{default:i(()=>[g("div",Wo,[l(W,{value:s.value.style.fontSize,"onUpdate:value":k[5]||(k[5]=j=>s.value.style.fontSize=j)},null,8,["value"])])]),_:1}),g("div",qo,[g("div",null,[l(Ce,{type:"primary",style:{"margin-right":"10px"},onClick:y},{default:i(()=>[x(K(d.value?"\u4FEE\u6539\u6807\u8BB0":"\u65B0\u589E\u6807\u8BB0"),1)]),_:1}),me(l(Ce,{type:"primary",danger:"",onClick:A},{default:i(()=>[Go]),_:1},512),[[ve,d.value]])]),Yo])]),_:1},8,["model"])}}}));var Qo=I(Jo,[["__scopeId","data-v-d6e89876"]]);const Xo={name:"AnnotationConfig"},Zo=M($(F({},Xo),{setup(o){const e=R(),t=w("");return G(()=>{e.on("annotation:click",n=>{t.value=n.gEvent.delegateObject.annotation.cfg.id})}),Fe(()=>{e.off("annotation:click",()=>{})}),(n,a)=>(C(),S(Qo,{id:t.value},null,8,["id"]))}}));const en=["width","height"],tn={style:{display:"flex"}},an={name:"WaterMarkConfig"},on=M($(F({},an),{setup(o){const e=R(),t=w(F(F({},Oe),e.waterMarkOptions?e.waterMarkOptions:{}));let n=F({},t.value);const a=w(!1),u=({rgba:{r:c,g:m,b:y,a:A}})=>{t.value.color=`rgba(${c},${m},${y},${A})`},s=w(null),r=T(()=>{var c;return(c=s.value)==null?void 0:c.getContext("2d")}),d=()=>{if(s.value&&r.value){const c=s.value.toDataURL("image/png");e.changeWaterMark(t.value,c)}},h=c=>{r.value&&r.value.clearRect(0,0,c.width,c.height)},_=c=>{r.value&&(r.value.font=`${c.fontSize}px normal`,r.value.fillStyle=c.color,r.value.translate(c.width/2,c.width/2),r.value.rotate(c.rotate*Math.PI/180),r.value.translate(-c.width/2,-c.width/2),r.value.textAlign="center",r.value.fillText(c.content,c.width/2,(c.height+c.fontSize)/2,c.width),d())},v=(c,m)=>{if(s.value&&r.value){if(c.width!==m.width){s.value.width=c.width,_(c);return}if(c.height!==m.height){s.value.height=c.height,_(c);return}c.color!==m.color?r.value.fillStyle=c.color:c.fontSize!==m.fontSize?r.value.font=`${c.fontSize}px normal`:c.rotate!==m.rotate&&(r.value.translate(c.width/2,c.width/2),r.value.rotate((c.rotate-m.rotate)*Math.PI/180),r.value.translate(-c.width/2,-c.width/2)),r.value.fillText(c.content,c.width/2,(c.height+c.fontSize)/2,c.width)}};return G(()=>{_(t.value)}),U(()=>t.value,c=>{h(n),v(c,n),d(),n=F({},c)},{deep:!0}),(c,m)=>{const y=p("a-form-item"),A=p("a-input"),f=p("a-input-number"),k=p("a-form");return C(),S(k,{model:t.value},{default:i(()=>[l(y,{label:"\u9884\u89C8"},{default:i(()=>[g("canvas",{ref_key:"canvas",ref:s,class:"water__mark___canvas",width:t.value.width,height:t.value.height},null,8,en)]),_:1}),l(y,{label:"\u5B57\u4F53\u5185\u5BB9"},{default:i(()=>[l(A,{value:t.value.content,"onUpdate:value":m[0]||(m[0]=b=>t.value.content=b)},null,8,["value"])]),_:1}),l(y,{label:"\u5B57\u4F53\u5927\u5C0F"},{default:i(()=>[l(f,{value:t.value.fontSize,"onUpdate:value":m[1]||(m[1]=b=>t.value.fontSize=b),min:10,max:60},null,8,["value"])]),_:1}),l(y,{label:"\u6587\u672C\u989C\u8272",style:{position:"relative"}},{default:i(()=>[g("div",tn,[g("div",{class:"color__display",style:Y({backgroundColor:t.value.color}),onClick:m[2]||(m[2]=b=>a.value=!a.value)},null,4)]),l(E(De),{class:"color__picker",style:Y(a.value?{}:{display:"none"}),theme:"light",color:t.value.color,"sucker-hide":!0,onChangeColor:u},null,8,["style","color"])]),_:1}),l(y,{label:"\u65CB\u8F6C\u89D2\u5EA6"},{default:i(()=>[l(f,{value:t.value.rotate,"onUpdate:value":m[3]||(m[3]=b=>t.value.rotate=b),min:-180,max:180},null,8,["value"])]),_:1})]),_:1},8,["model"])}}}));var nn=I(on,[["__scopeId","data-v-77b9a9be"]]);const sn={name:"TableEdit"},ln=M($(F({},sn),{props:{table:null},emits:["tableDataChange"],setup(o,{emit:e}){const t=o,n=Se(JSON.parse(JSON.stringify(t.table)));function a(){const u=JSON.parse(JSON.stringify(n));u.data.forEach(s=>{Object.keys(s).forEach(r=>{Object.is(+s[r],NaN)||(s[r]=+s[r])}),delete s._X_ID,delete s.rowId}),e("tableDataChange",u)}return(u,s)=>{const r=p("vxe-input"),d=p("vxe-column"),h=p("vxe-table");return C(),D("div",null,[l(h,{class:"mytable-style","edit-config":{trigger:"click",mode:"cell"},data:E(n).data},{default:i(()=>[(C(!0),D(L,null,ee(E(n).cols,_=>(C(),S(d,{key:_.cid,field:_.cKey,title:_.cname,"edit-render":_.editable!==!1?{autofocus:".vxe-input--inner"}:null},it({_:2},[_.editable!==!1?{name:"edit",fn:i(({row:v})=>[l(r,{modelValue:v[_.cKey],"onUpdate:modelValue":c=>v[_.cKey]=c,onBlur:s[0]||(s[0]=c=>a())},null,8,["modelValue","onUpdate:modelValue"])])}:void 0]),1032,["field","title","edit-render"]))),128))]),_:1},8,["data"])])}}}));const un=o=>(X("data-v-a5631c0c"),o=o(),Z(),o),rn={class:"container__top"},cn={style:{width:"86%"}},dn=x("\u8BF7\u914D\u7F6E\u60A8\u7684\u56FE\u8868"),pn=un(()=>g("p",null,"\u6539\u53D8\u56FE\u8868\u7C7B\u578B\u5C06\u4F1A\u5BFC\u81F4\u60A8\u7684\u914D\u7F6E\u4E22\u5931\uFF0C\u662F\u5426\u786E\u8BA4\u8FD4\u56DE\uFF1F",-1)),_n=x("\u8FD4\u56DE"),hn=x("\u4E0B\u4E00\u6B65"),fn={class:"container"},mn={style:{width:"70%"}},vn={class:"chart"},gn={style:{width:"25%",position:"relative"}},yn={name:"ChartConfig"},bn=M($(F({},yn),{setup(o){const e=Q(),t=R(),n=T(()=>t.tableData),a=A=>{t.changeData(A.data)},u=w(["1"]),s=w("5"),r=w([{key:"1",header:"\u914D\u7F6E\u57FA\u672C\u4FE1\u606F"},{key:"2",header:"\u914D\u7F6E\u56FE\u8868\u4FE1\u606F"},{key:"3",header:"\u914D\u7F6E\u56FE\u8868\u6807\u8BB0"},{key:"4",header:"\u914D\u7F6E\u60AC\u6D6E\u63D0\u793A"},{key:"5",header:"\u914D\u7F6E\u56FE\u8868\u6C34\u5370"}]),d=()=>{e.push({path:"/visual/select",query:{status:"back"}})};let h;const _=A=>{var f;A?t.update({tooltip:h}):(h=F({},(f=t.chartOptions)==null?void 0:f.tooltip),t.update({tooltip:!1}),s.value="")};let v;const c=A=>{A?t.changeWaterMark(Oe,v||eo):(v=t.waterMarkUrl,t.changeWaterMark(!1,void 0),s.value="")},m=async()=>{if(!t.chartType||!t.chartPicId||!t.chartOptions){N.error("\u53C2\u6570\u4E0D\u5B8C\u6574");return}try{await pe.updateChartPicConfig({chart_title:t.chartTitle,chart_type:t.chartType,chartpic_id:t.chartPicId,vis_config:JSON.stringify(t.chartOptions),watermark_config:t.waterMarkOptions===!1?"false":JSON.stringify($(F({},t.waterMarkOptions),{url:t.waterMarkUrl}))}),await be.updateProjectStatus({project_id:y.project_id,third_finished:1}),e.push("/publish")}catch{}};G(()=>{s.value=""});const y=ae();return ct(async()=>{const{project_id:A}=y;if(A!==""&&A){const{result:{data:[f]}}=await pe.getAllChartPic(A);t.backupProjectData(f),f.chart_type!==null&&Object.keys(oe).includes(f.chart_type)&&t.initChart(f)}else N.warn("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u9879\u76EE",1),N.loading("\u6B63\u5728\u8FD4\u56DE\u9996\u9875",1,()=>{e.replace("/projects")})}),(A,f)=>{const k=p("a-divider"),b=p("a-button"),z=p("a-popconfirm"),P=p("a-collapse-panel"),J=p("a-collapse"),W=p("a-switch");return C(),D(L,null,[g("div",rn,[g("div",cn,[l(k,{class:"text",orientation:"left"},{default:i(()=>[dn]),_:1})]),l(z,{placement:"topLeft","ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onConfirm:d},{title:i(()=>[pn]),default:i(()=>[l(b,{type:"primary"},{default:i(()=>[_n]),_:1})]),_:1}),l(b,{type:"primary",onClick:m},{default:i(()=>[hn]),_:1})]),g("div",fn,[g("div",mn,[l(J,{activeKey:u.value,"onUpdate:activeKey":f[0]||(f[0]=O=>u.value=O)},{expandIcon:i(O=>[l(E(Me),{rotate:O.isActive?90:0},null,8,["rotate"])]),default:i(()=>[l(P,{key:"1",header:"\u56FE\u8868\u5C55\u793A"},{default:i(()=>[g("div",vn,[l(Ne,{url:E(t).waterMarkUrl,name:E(t).chartType,options:E(t).backupChartOptions,title:E(t).chartTitle,"use-store":!0},null,8,["url","name","options","title"])])]),_:1}),l(P,{key:"2",header:"\u56FE\u8868\u6570\u636E"},{default:i(()=>[l(ln,{table:E(n),class:"table",onTableDataChange:a},null,8,["table"])]),_:1})]),_:1},8,["activeKey"])]),g("div",gn,[l(J,{activeKey:s.value,"onUpdate:activeKey":f[1]||(f[1]=O=>s.value=O),accordion:"",onChange:f[2]||(f[2]=O=>s.value=O)},{expandIcon:i(O=>[l(E(Me),{rotate:O.isActive?90:0},null,8,["rotate"])]),default:i(()=>{var O;return[(C(),S(P,{key:r.value[0].key,header:r.value[0].header},{default:i(()=>[l(jo)]),_:1},8,["header"])),(C(),S(P,{key:r.value[1].key,header:r.value[1].header},{default:i(()=>[l(Ro)]),_:1},8,["header"])),(C(),S(P,{key:r.value[2].key,header:r.value[2].header},{default:i(()=>[l(Zo)]),_:1},8,["header"])),(C(),S(P,{key:r.value[3].key,header:r.value[3].header,disabled:!((O=E(t).chartOptions)==null?void 0:O.tooltip)},{extra:i(()=>{var re;return[l(W,{checked:!!((re=E(t).chartOptions)==null?void 0:re.tooltip),onChange:_},null,8,["checked"])]}),default:i(()=>[l(zo)]),_:1},8,["header","disabled"])),(C(),S(P,{key:r.value[4].key,header:r.value[4].header,disabled:!E(t).waterMarkOptions},{extra:i(()=>[l(W,{checked:!!E(t).waterMarkOptions,onChange:c},null,8,["checked"])]),default:i(()=>[l(nn)]),_:1},8,["header","disabled"]))]}),_:1},8,["activeKey"])])])],64)}}}));var Cn=I(bn,[["__scopeId","data-v-a5631c0c"]]);const An=o=>(X("data-v-6f51626c"),o=o(),Z(),o),Fn={class:"container"},En=An(()=>g("div",{class:"pic"},null,-1)),wn=x("\u8FD4\u56DE\u9996\u9875"),xn=M({setup(o){const e=Q(),t=()=>{e.push("/projects")};return(n,a)=>{const u=p("a-button");return C(),D("div",Fn,[En,l(u,{type:"primary",onClick:t},{default:i(()=>[wn]),_:1})])}}});var kn=I(xn,[["__scopeId","data-v-6f51626c"]]);const Bn=[{path:"/",name:"\u9996\u9875",component:Yt,redirect:"/projects",children:[{path:"/login",name:"login",component:la},{path:"/register",name:"register",component:va},{path:"/start",name:"start",component:Ya},{path:"/visual",name:"visual",component:Qa,redirect:"/visual/select",children:[{path:"/visual/select",name:"visual_select",component:Fo},{path:"/visual/config",name:"visual_config",component:Cn}]},{path:"/projects",name:"projects",component:()=>ge(()=>import("./index-7ecc772d.js"),["js/index-7ecc772d.js","css/index-c120ccbf.css","js/vendor-27fbe909.js","css/vendor-b91c48ae.css"])},{path:"/publish",name:"publish",component:()=>ge(()=>import("./index-d4989562.js"),["js/index-d4989562.js","css/index-abfded6a.css","js/vendor-27fbe909.js","css/vendor-b91c48ae.css"])},{path:"/preprocess",name:"preprocess",component:()=>ge(()=>import("./index-355d2b7c.js"),["js/index-355d2b7c.js","css/index-437d4f2e.css","js/vendor-27fbe909.js","css/vendor-b91c48ae.css"])}]},{path:"/:catchAll(.*)",component:kn}],_e=dt({history:pt(),routes:Bn});_e.beforeEach((o,e,t)=>{o.path==="/login"?te.getItem("user")?_e.push("/projects"):t():te.getItem("user")?t():(N.info("\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55"),_e.push("/login"))});const Ue=_t();Ue.use(ht);ft(At).use(_e).use(Ue).use(mt).use(vt).mount("#app");export{Ne as C,ue as P,le as T,I as _,Te as a,R as b,V as c,te as d,oo as e,Da as g,ae as u};
